var VI=Object.create;var ka=Object.defineProperty;var $I=Object.getOwnPropertyDescriptor;var HI=Object.getOwnPropertyNames;var GI=Object.getPrototypeOf,BI=Object.prototype.hasOwnProperty;var n=(t,e)=>ka(t,"name",{value:e,configurable:!0}),U=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var $e=(t,e)=>()=>(t&&(e=t(t=0)),e);var u=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Iv=(t,e)=>{for(var r in e)ka(t,r,{get:e[r],enumerable:!0})},qv=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of HI(e))!BI.call(t,s)&&s!==r&&ka(t,s,{get:()=>e[s],enumerable:!(i=$I(e,s))||i.enumerable});return t};var JI=(t,e,r)=>(r=t!=null?VI(GI(t)):{},qv(e||!t||!t.__esModule?ka(r,"default",{value:t,enumerable:!0}):r,t)),b=t=>qv(ka({},"__esModule",{value:!0}),t);var x={};Iv(x,{__assign:()=>Q_,__asyncDelegator:()=>Gq,__asyncGenerator:()=>Hq,__asyncValues:()=>Bq,__await:()=>_c,__awaiter:()=>zq,__classPrivateFieldGet:()=>Xq,__classPrivateFieldIn:()=>eC,__classPrivateFieldSet:()=>Zq,__createBinding:()=>Z_,__decorate:()=>qq,__esDecorate:()=>kq,__exportStar:()=>Wq,__extends:()=>Rq,__generator:()=>Uq,__importDefault:()=>Qq,__importStar:()=>Yq,__makeTemplateObject:()=>Jq,__metadata:()=>Lq,__param:()=>Cq,__propKey:()=>Dq,__read:()=>bE,__rest:()=>Iq,__runInitializers:()=>Mq,__setFunctionName:()=>Fq,__spread:()=>jq,__spreadArray:()=>$q,__spreadArrays:()=>Vq,__values:()=>X_});function Rq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Y_(t,e);function r(){this.constructor=t}n(r,"__"),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Iq(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function qq(t,e,r,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function Cq(t,e){return function(r,i){e(r,i,t)}}function kq(t,e,r,i,s,o){function a(ie){if(ie!==void 0&&typeof ie!="function")throw new TypeError("Function expected");return ie}n(a,"accept");for(var c=i.kind,l=c==="getter"?"get":c==="setter"?"set":"value",p=!e&&t?i.static?t:t.prototype:null,f=e||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),m,h=!1,_=r.length-1;_>=0;_--){var w={};for(var g in i)w[g]=g==="access"?{}:i[g];for(var g in i.access)w.access[g]=i.access[g];w.addInitializer=function(ie){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(ie||null))};var S=(0,r[_])(c==="accessor"?{get:f.get,set:f.set}:f[l],w);if(c==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(m=a(S.get))&&(f.get=m),(m=a(S.set))&&(f.set=m),(m=a(S.init))&&s.push(m)}else(m=a(S))&&(c==="field"?s.push(m):f[l]=m)}p&&Object.defineProperty(p,i.name,f),h=!0}function Mq(t,e,r){for(var i=arguments.length>2,s=0;s<e.length;s++)r=i?e[s].call(t,r):e[s].call(t);return i?r:void 0}function Dq(t){return typeof t=="symbol"?t:"".concat(t)}function Fq(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Lq(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function zq(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})}function Uq(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(p){return function(f){return l([p,f])}}function l(p){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(r=0)),r;)try{if(i=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,s=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(f){p=[6,f],s=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Wq(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Z_(e,t,r)}function X_(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bE(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function jq(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bE(arguments[e]));return t}function Vq(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,s++)i[s]=o[a];return i}function $q(t,e,r){if(r||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function _c(t){return this instanceof _c?(this.v=t,this):new _c(t)}function Hq(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(h){i[h]&&(s[h]=function(_){return new Promise(function(w,g){o.push([h,_,w,g])>1||c(h,_)})})}function c(h,_){try{l(i[h](_))}catch(w){m(o[0][3],w)}}function l(h){h.value instanceof _c?Promise.resolve(h.value.v).then(p,f):m(o[0][2],h)}function p(h){c("next",h)}function f(h){c("throw",h)}function m(h,_){h(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Gq(t){var e,r;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,o){e[s]=t[s]?function(a){return(r=!r)?{value:_c(t[s](a)),done:!1}:o?o(a):a}:o}}function Bq(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof X_=="function"?X_(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),s(c,l,a.done,a.value)})}}function s(o,a,c,l){Promise.resolve(l).then(function(p){o({value:p,done:c})},a)}}function Jq(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Yq(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Z_(e,t,r);return Kq(e,t),e}function Qq(t){return t&&t.__esModule?t:{default:t}}function Xq(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function Zq(t,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function eC(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}var Y_,Q_,Z_,Kq,A=$e(()=>{Y_=n(function(t,e){return Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},Y_(t,e)},"extendStatics");n(Rq,"__extends");Q_=n(function(){return Q_=Object.assign||n(function(e){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},"__assign"),Q_.apply(this,arguments)},"__assign");n(Iq,"__rest");n(qq,"__decorate");n(Cq,"__param");n(kq,"__esDecorate");n(Mq,"__runInitializers");n(Dq,"__propKey");n(Fq,"__setFunctionName");n(Lq,"__metadata");n(zq,"__awaiter");n(Uq,"__generator");Z_=Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]};n(Wq,"__exportStar");n(X_,"__values");n(bE,"__read");n(jq,"__spread");n(Vq,"__spreadArrays");n($q,"__spreadArray");n(_c,"__await");n(Hq,"__asyncGenerator");n(Gq,"__asyncDelegator");n(Bq,"__asyncValues");n(Jq,"__makeTemplateObject");Kq=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};n(Yq,"__importStar");n(Qq,"__importDefault");n(Xq,"__classPrivateFieldGet");n(Zq,"__classPrivateFieldSet");n(eC,"__classPrivateFieldIn")});var xE=u(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.isArnBucketName=ut.isDnsCompatibleBucketName=ut.S3_HOSTNAME_PATTERN=ut.DOT_PATTERN=ut.resolveParamsForS3=void 0;var tC=n(async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(0,ut.isArnBucketName)(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!(0,ut.isDnsCompatibleBucketName)(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},"resolveParamsForS3");ut.resolveParamsForS3=tC;var rC=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,iC=/(\d+\.){3}\d+/,nC=/\.\./;ut.DOT_PATTERN=/\./;ut.S3_HOSTNAME_PATTERN=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./;var sC=n(t=>rC.test(t)&&!iC.test(t)&&!nC.test(t),"isDnsCompatibleBucketName");ut.isDnsCompatibleBucketName=sC;var oC=n(t=>{let[e,r,i,s,o,a]=t.split(":"),c=e==="arn"&&t.split(":").length>=6,l=[e,r,i,o,a].filter(Boolean).length===5;if(c&&!l)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return e==="arn"&&!!r&&!!i&&!!o&&!!a},"isArnBucketName");ut.isArnBucketName=oC});var AE=u(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});var aC=(A(),b(x));aC.__exportStar(xE(),ey)});var TE=u(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.createConfigValueProvider=void 0;var cC=n((t,e,r)=>{let i=n(async()=>{var s;let o=(s=r[t])!==null&&s!==void 0?s:r[e];return typeof o=="function"?o():o},"configProvider");return t==="endpoint"||e==="endpoint"?async()=>{let s=await i();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:o,hostname:a,port:c,path:l}=s;return`${o}//${a}${c?":"+c:""}${l}`}}return s}:i},"createConfigValueProvider");uu.createConfigValueProvider=cC});var ty=u(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.resolveParams=kn.getEndpointFromInstructions=void 0;var dC=AE(),uC=TE(),lC=n(async(t,e,r,i)=>{let s=await(0,kn.resolveParams)(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,i)},"getEndpointFromInstructions");kn.getEndpointFromInstructions=lC;var pC=n(async(t,e,r)=>{var i;let s={},o=((i=e?.getEndpointParameterInstructions)===null||i===void 0?void 0:i.call(e))||{};for(let[a,c]of Object.entries(o))switch(c.type){case"staticContextParams":s[a]=c.value;break;case"contextParams":s[a]=t[c.name];break;case"clientContextParams":case"builtInParams":s[a]=await(0,uC.createConfigValueProvider)(c.name,a,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(c))}return Object.keys(o).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await(0,dC.resolveParamsForS3)(s),s},"resolveParams");kn.resolveParams=pC});var OE=u(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.parseQueryString=void 0;function fC(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[i,s=null]=r.split("=");i=decodeURIComponent(i),s&&(s=decodeURIComponent(s)),i in e?Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]:e[i]=s}return e}n(fC,"parseQueryString");lu.parseQueryString=fC});var Mn=u(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.parseUrl=void 0;var mC=OE(),hC=n(t=>{if(typeof t=="string")return(0,yc.parseUrl)(new URL(t));let{hostname:e,pathname:r,port:i,protocol:s,search:o}=t,a;return o&&(a=(0,mC.parseQueryString)(o)),{hostname:e,port:i?parseInt(i):void 0,protocol:s,path:r,query:a}},"parseUrl");yc.parseUrl=hC});var ry=u(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.toEndpointV1=void 0;var PE=Mn(),_C=n(t=>typeof t=="object"?"url"in t?(0,PE.parseUrl)(t.url):t:(0,PE.parseUrl)(t),"toEndpointV1");pu.toEndpointV1=_C});var IE=u(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});var RE=(A(),b(x));RE.__exportStar(ty(),fu);RE.__exportStar(ry(),fu)});var iy=u(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.endpointMiddleware=void 0;var yC=ty(),gC=n(({config:t,instructions:e})=>(r,i)=>async s=>{var o,a;let c=await(0,yC.getEndpointFromInstructions)(s.input,{getEndpointParameterInstructions(){return e}},{...t},i);i.endpointV2=c,i.authSchemes=(o=c.properties)===null||o===void 0?void 0:o.authSchemes;let l=(a=i.authSchemes)===null||a===void 0?void 0:a[0];return l&&(i.signing_region=l.signingRegion,i.signing_service=l.signingName),r({...s})},"endpointMiddleware");mu.endpointMiddleware=gC});var ny=u(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.deserializerMiddleware=void 0;var wC=n((t,e)=>(r,i)=>async s=>{let{response:o}=await r(s);try{let a=await e(o,t);return{response:o,output:a}}catch(a){throw Object.defineProperty(a,"$response",{value:o}),a}},"deserializerMiddleware");hu.deserializerMiddleware=wC});var sy=u(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.serializerMiddleware=void 0;var vC=n((t,e)=>(r,i)=>async s=>{var o;let a=!((o=i.endpointV2)===null||o===void 0)&&o.url&&t.urlParser?async()=>t.urlParser(i.endpointV2.url):t.endpoint;if(!a)throw new Error("No valid endpoint provider available.");let c=await e(s.input,{...t,endpoint:a});return r({...s,request:c})},"serializerMiddleware");_u.serializerMiddleware=vC});var qE=u(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.getSerdePlugin=pr.serializerMiddlewareOption=pr.deserializerMiddlewareOption=void 0;var EC=ny(),SC=sy();pr.deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0};pr.serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function NC(t,e,r){return{applyToStack:i=>{i.add((0,EC.deserializerMiddleware)(t,r),pr.deserializerMiddlewareOption),i.add((0,SC.serializerMiddleware)(t,e),pr.serializerMiddlewareOption)}}}n(NC,"getSerdePlugin");pr.getSerdePlugin=NC});var me=u(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var oy=(A(),b(x));oy.__exportStar(ny(),gc);oy.__exportStar(qE(),gc);oy.__exportStar(sy(),gc)});var CE=u(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getEndpointPlugin=Dn.endpointMiddlewareOptions=void 0;var bC=me(),xC=iy();Dn.endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:bC.serializerMiddlewareOption.name};var AC=n((t,e)=>({applyToStack:r=>{r.addRelativeTo((0,xC.endpointMiddleware)({config:t,instructions:e}),Dn.endpointMiddlewareOptions)}}),"getEndpointPlugin");Dn.getEndpointPlugin=AC});var kE=u(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.normalizeProvider=void 0;var TC=n(t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e},"normalizeProvider");yu.normalizeProvider=TC});var Fn=u(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});var OC=(A(),b(x));OC.__exportStar(kE(),ay)});var ME=u(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.resolveEndpointConfig=void 0;var cy=Fn(),PC=ry(),RC=n(t=>{var e,r,i;let s=(e=t.tls)!==null&&e!==void 0?e:!0,{endpoint:o}=t,a=o!=null?async()=>(0,PC.toEndpointV1)(await(0,cy.normalizeProvider)(o)()):void 0;return{...t,endpoint:a,tls:s,isCustomEndpoint:!!o,useDualstackEndpoint:(0,cy.normalizeProvider)((r=t.useDualstackEndpoint)!==null&&r!==void 0?r:!1),useFipsEndpoint:(0,cy.normalizeProvider)((i=t.useFipsEndpoint)!==null&&i!==void 0?i:!1)}},"resolveEndpointConfig");gu.resolveEndpointConfig=RC});var FE=u(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0})});var ne=u(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var wc=(A(),b(x));wc.__exportStar(IE(),Ln);wc.__exportStar(iy(),Ln);wc.__exportStar(CE(),Ln);wc.__exportStar(ME(),Ln);wc.__exportStar(FE(),Ln)});var LE=u(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.NoOpLogger=void 0;var wu=class{trace(){}debug(){}info(){}warn(){}error(){}};n(wu,"NoOpLogger");vu.NoOpLogger=wu});var WE=u(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.constructStack=void 0;var IC=n(()=>{let t=[],e=[],r=new Set,i=n(f=>f.sort((m,h)=>zE[h.step]-zE[m.step]||UE[h.priority||"normal"]-UE[m.priority||"normal"]),"sort"),s=n(f=>{let m=!1,h=n(_=>_.name&&_.name===f?(m=!0,r.delete(f),!1):!0,"filterCb");return t=t.filter(h),e=e.filter(h),m},"removeByName"),o=n(f=>{let m=!1,h=n(_=>_.middleware===f?(m=!0,_.name&&r.delete(_.name),!1):!0,"filterCb");return t=t.filter(h),e=e.filter(h),m},"removeByReference"),a=n(f=>(t.forEach(m=>{f.add(m.middleware,{...m})}),e.forEach(m=>{f.addRelativeTo(m.middleware,{...m})}),f),"cloneTo"),c=n(f=>{let m=[];return f.before.forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m.push(f),f.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m},"expandRelativeMiddlewareList"),l=n((f=!1)=>{let m=[],h=[],_={};return t.forEach(g=>{let S={...g,before:[],after:[]};S.name&&(_[S.name]=S),m.push(S)}),e.forEach(g=>{let S={...g,before:[],after:[]};S.name&&(_[S.name]=S),h.push(S)}),h.forEach(g=>{if(g.toMiddleware){let S=_[g.toMiddleware];if(S===void 0){if(f)return;throw new Error(`${g.toMiddleware} is not found when adding ${g.name||"anonymous"} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&S.after.push(g),g.relation==="before"&&S.before.push(g)}}),i(m).map(c).reduce((g,S)=>(g.push(...S),g),[])},"getMiddlewareList"),p={add:(f,m={})=>{let{name:h,override:_}=m,w={step:"initialize",priority:"normal",middleware:f,...m};if(h){if(r.has(h)){if(!_)throw new Error(`Duplicate middleware name '${h}'`);let g=t.findIndex(ie=>ie.name===h),S=t[g];if(S.step!==w.step||S.priority!==w.priority)throw new Error(`"${h}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by same-name middleware with ${w.priority} priority in ${w.step} step.`);t.splice(g,1)}r.add(h)}t.push(w)},addRelativeTo:(f,m)=>{let{name:h,override:_}=m,w={middleware:f,...m};if(h){if(r.has(h)){if(!_)throw new Error(`Duplicate middleware name '${h}'`);let g=e.findIndex(ie=>ie.name===h),S=e[g];if(S.toMiddleware!==w.toMiddleware||S.relation!==w.relation)throw new Error(`"${h}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by same-name middleware ${w.relation} "${w.toMiddleware}" middleware.`);e.splice(g,1)}r.add(h)}e.push(w)},clone:()=>a((0,Ps.constructStack)()),use:f=>{f.applyToStack(p)},remove:f=>typeof f=="string"?s(f):o(f),removeByTag:f=>{let m=!1,h=n(_=>{let{tags:w,name:g}=_;return w&&w.includes(f)?(g&&r.delete(g),m=!0,!1):!0},"filterCb");return t=t.filter(h),e=e.filter(h),m},concat:f=>{let m=a((0,Ps.constructStack)());return m.use(f),m},applyToStack:a,identify:()=>l(!0).map(f=>f.name+": "+(f.tags||[]).join(",")),resolve:(f,m)=>{for(let h of l().map(_=>_.middleware).reverse())f=h(f,m);return f}};return p},"constructStack");Ps.constructStack=IC;var zE={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},UE={high:3,normal:2,low:1}});var uy=u(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});var qC=(A(),b(x));qC.__exportStar(WE(),dy)});var jE=u(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.Client=void 0;var CC=uy(),Eu=class{constructor(e){this.middlewareStack=(0,CC.constructStack)(),this.config=e}send(e,r,i){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:i,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};n(Eu,"Client");Su.Client=Eu});var VE=u(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.Command=void 0;var kC=uy(),Nu=class{constructor(){this.middlewareStack=(0,kC.constructStack)()}};n(Nu,"Command");bu.Command=Nu});var $E=u(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.SENSITIVE_STRING=void 0;xu.SENSITIVE_STRING="***SensitiveInformation***"});var py=u(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.logger=E.strictParseByte=E.strictParseShort=E.strictParseInt32=E.strictParseInt=E.strictParseLong=E.limitedParseFloat32=E.limitedParseFloat=E.handleFloat=E.limitedParseDouble=E.strictParseFloat32=E.strictParseFloat=E.strictParseDouble=E.expectUnion=E.expectString=E.expectObject=E.expectNonNull=E.expectByte=E.expectShort=E.expectInt32=E.expectInt=E.expectLong=E.expectFloat32=E.expectNumber=E.expectBoolean=E.parseBoolean=void 0;var MC=n(t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},"parseBoolean");E.parseBoolean=MC;var DC=n(t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&E.logger.warn(Au(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&E.logger.warn(Au(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},"expectBoolean");E.expectBoolean=DC;var FC=n(t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&E.logger.warn(Au(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},"expectNumber");E.expectNumber=FC;var LC=Math.ceil(2**127*(2-2**-23)),zC=n(t=>{let e=(0,E.expectNumber)(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>LC)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},"expectFloat32");E.expectFloat32=zC;var UC=n(t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},"expectLong");E.expectLong=UC;E.expectInt=E.expectLong;var WC=n(t=>ly(t,32),"expectInt32");E.expectInt32=WC;var jC=n(t=>ly(t,16),"expectShort");E.expectShort=jC;var VC=n(t=>ly(t,8),"expectByte");E.expectByte=VC;var ly=n((t,e)=>{let r=(0,E.expectLong)(t);if(r!==void 0&&$C(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},"expectSizedInt"),$C=n((t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},"castInt"),HC=n((t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},"expectNonNull");E.expectNonNull=HC;var GC=n(t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},"expectObject");E.expectObject=GC;var BC=n(t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return E.logger.warn(Au(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},"expectString");E.expectString=BC;var JC=n(t=>{if(t==null)return;let e=(0,E.expectObject)(t),r=Object.entries(e).filter(([,i])=>i!=null).map(([i])=>i);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},"expectUnion");E.expectUnion=JC;var KC=n(t=>typeof t=="string"?(0,E.expectNumber)(Rs(t)):(0,E.expectNumber)(t),"strictParseDouble");E.strictParseDouble=KC;E.strictParseFloat=E.strictParseDouble;var YC=n(t=>typeof t=="string"?(0,E.expectFloat32)(Rs(t)):(0,E.expectFloat32)(t),"strictParseFloat32");E.strictParseFloat32=YC;var QC=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Rs=n(t=>{let e=t.match(QC);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},"parseNumber"),XC=n(t=>typeof t=="string"?HE(t):(0,E.expectNumber)(t),"limitedParseDouble");E.limitedParseDouble=XC;E.handleFloat=E.limitedParseDouble;E.limitedParseFloat=E.limitedParseDouble;var ZC=n(t=>typeof t=="string"?HE(t):(0,E.expectFloat32)(t),"limitedParseFloat32");E.limitedParseFloat32=ZC;var HE=n(t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},"parseFloatString"),e1=n(t=>typeof t=="string"?(0,E.expectLong)(Rs(t)):(0,E.expectLong)(t),"strictParseLong");E.strictParseLong=e1;E.strictParseInt=E.strictParseLong;var t1=n(t=>typeof t=="string"?(0,E.expectInt32)(Rs(t)):(0,E.expectInt32)(t),"strictParseInt32");E.strictParseInt32=t1;var r1=n(t=>typeof t=="string"?(0,E.expectShort)(Rs(t)):(0,E.expectShort)(t),"strictParseShort");E.strictParseShort=r1;var i1=n(t=>typeof t=="string"?(0,E.expectByte)(Rs(t)):(0,E.expectByte)(t),"strictParseByte");E.strictParseByte=i1;var Au=n(t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),"stackTraceWarning");E.logger={warn:console.warn}});var GE=u(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.parseEpochTimestamp=Pt.parseRfc7231DateTime=Pt.parseRfc3339DateTimeWithOffset=Pt.parseRfc3339DateTime=Pt.dateToUtcString=void 0;var Li=py(),n1=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],my=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function s1(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),i=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),a=t.getUTCMinutes(),c=t.getUTCSeconds(),l=s<10?`0${s}`:`${s}`,p=o<10?`0${o}`:`${o}`,f=a<10?`0${a}`:`${a}`,m=c<10?`0${c}`:`${c}`;return`${n1[i]}, ${l} ${my[r]} ${e} ${p}:${f}:${m} GMT`}n(s1,"dateToUtcString");Pt.dateToUtcString=s1;var o1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),a1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=o1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,i,s,o,a,c,l,p]=e,f=(0,Li.strictParseShort)(Is(i)),m=fr(s,"month",1,12),h=fr(o,"day",1,31);return vc(f,m,h,{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p})},"parseRfc3339DateTime");Pt.parseRfc3339DateTime=a1;var c1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),d1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=c1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,i,s,o,a,c,l,p,f]=e,m=(0,Li.strictParseShort)(Is(i)),h=fr(s,"month",1,12),_=fr(o,"day",1,31),w=vc(m,h,_,{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p});return f.toUpperCase()!="Z"&&w.setTime(w.getTime()-S1(f)),w},"parseRfc3339DateTimeWithOffset");Pt.parseRfc3339DateTimeWithOffset=d1;var u1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),l1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),p1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),f1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=u1.exec(t);if(e){let[r,i,s,o,a,c,l,p]=e;return vc((0,Li.strictParseShort)(Is(o)),fy(s),fr(i,"day",1,31),{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p})}if(e=l1.exec(t),e){let[r,i,s,o,a,c,l,p]=e;return y1(vc(h1(o),fy(s),fr(i,"day",1,31),{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p}))}if(e=p1.exec(t),e){let[r,i,s,o,a,c,l,p]=e;return vc((0,Li.strictParseShort)(Is(p)),fy(i),fr(s.trimLeft(),"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime");Pt.parseRfc7231DateTime=f1;var m1=n(t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=(0,Li.strictParseDouble)(t);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},"parseEpochTimestamp");Pt.parseEpochTimestamp=m1;var vc=n((t,e,r,i)=>{let s=e-1;return w1(t,s,r),new Date(Date.UTC(t,s,r,fr(i.hours,"hour",0,23),fr(i.minutes,"minute",0,59),fr(i.seconds,"seconds",0,60),E1(i.fractionalMilliseconds)))},"buildDate"),h1=n(t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+(0,Li.strictParseShort)(Is(t));return r<e?r+100:r},"parseTwoDigitYear"),_1=50*365*24*60*60*1e3,y1=n(t=>t.getTime()-new Date().getTime()>_1?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,"adjustRfc850Year"),fy=n(t=>{let e=my.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},"parseMonthByShortName"),g1=[31,28,31,30,31,30,31,31,30,31,30,31],w1=n((t,e,r)=>{let i=g1[e];if(e===1&&v1(t)&&(i=29),r>i)throw new TypeError(`Invalid day for ${my[e]} in ${t}: ${r}`)},"validateDayOfMonth"),v1=n(t=>t%4===0&&(t%100!==0||t%400===0),"isLeapYear"),fr=n((t,e,r,i)=>{let s=(0,Li.strictParseByte)(Is(t));if(s<r||s>i)throw new TypeError(`${e} must be between ${r} and ${i}, inclusive`);return s},"parseDateValue"),E1=n(t=>t==null?0:(0,Li.strictParseFloat32)("0."+t)*1e3,"parseMilliseconds"),S1=n(t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let i=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(i*60+s)*60*1e3},"parseOffsetToMilliseconds"),Is=n(t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},"stripLeadingZeroes")});var hy=u(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.decorateServiceException=Cs.ServiceException=void 0;var qs=class extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,qs.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}};n(qs,"ServiceException");Cs.ServiceException=qs;var N1=n((t,e={})=>{Object.entries(e).filter(([,i])=>i!==void 0).forEach(([i,s])=>{(t[i]==null||t[i]==="")&&(t[i]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},"decorateServiceException");Cs.decorateServiceException=N1});var BE=u(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.throwDefaultError=void 0;var b1=hy(),x1=n(({output:t,parsedBody:e,exceptionCtor:r,errorCode:i})=>{let s=A1(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new r({name:e?.code||e?.Code||i||o||"UnknownError",$fault:"client",$metadata:s});throw(0,b1.decorateServiceException)(a,e)},"throwDefaultError");Tu.throwDefaultError=x1;var A1=n(t=>{var e,r;return{httpStatusCode:t.statusCode,requestId:(r=(e=t.headers["x-amzn-requestid"])!==null&&e!==void 0?e:t.headers["x-amzn-request-id"])!==null&&r!==void 0?r:t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}},"deserializeMetadata")});var JE=u(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.loadConfigsForDefaultMode=void 0;var T1=n(t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode");Ou.loadConfigsForDefaultMode=T1});var YE=u(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.emitWarningIfUnsupportedVersion=void 0;var KE=!1,O1=n(t=>{t&&!KE&&parseInt(t.substring(1,t.indexOf(".")))<14&&(KE=!0)},"emitWarningIfUnsupportedVersion");Pu.emitWarningIfUnsupportedVersion=O1});var _y=u(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.extendedEncodeURIComponent=void 0;function P1(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}n(P1,"extendedEncodeURIComponent");Ru.extendedEncodeURIComponent=P1});var QE=u(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.getArrayIfSingleItem=void 0;var R1=n(t=>Array.isArray(t)?t:[t],"getArrayIfSingleItem");Iu.getArrayIfSingleItem=R1});var XE=u(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.getValueFromTextNode=void 0;var I1=n(t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=(0,Ec.getValueFromTextNode)(t[r]));return t},"getValueFromTextNode");Ec.getValueFromTextNode=I1});var ZE=u(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.LazyJsonString=mr.StringWrapper=void 0;var q1=n(function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r},"StringWrapper");mr.StringWrapper=q1;mr.StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:mr.StringWrapper,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(mr.StringWrapper,String);var zi=class extends mr.StringWrapper{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(e){return e instanceof zi?e:e instanceof String||typeof e=="string"?new zi(e):new zi(JSON.stringify(e))}};n(zi,"LazyJsonString");mr.LazyJsonString=zi});var tS=u(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.convertMap=ks.map=void 0;function eS(t,e,r){let i,s,o;if(typeof e>"u"&&typeof r>"u")i={},o=t;else{if(i=t,typeof e=="function")return s=e,o=r,k1(i,s,o);o=e}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){i[a]=o[a];continue}let[c,l]=o[a];if(typeof l=="function"){let p,f=c===void 0&&(p=l())!=null,m=typeof c=="function"&&!!c(void 0)||typeof c!="function"&&!!c;f?i[a]=p:m&&(i[a]=l())}else{let p=c===void 0&&l!=null,f=typeof c=="function"&&!!c(l)||typeof c!="function"&&!!c;(p||f)&&(i[a]=l)}}return i}n(eS,"map");ks.map=eS;var C1=n(t=>{let e={};for(let[r,i]of Object.entries(t||{}))e[r]=[,i];return e},"convertMap");ks.convertMap=C1;var k1=n((t,e,r)=>eS(t,Object.entries(r).reduce((i,[s,o])=>(Array.isArray(o)?i[s]=o:typeof o=="function"?i[s]=[e,o()]:i[s]=[e,o],i),{})),"mapWithFilter")});var iS=u(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.resolvedPath=void 0;var rS=_y(),M1=n((t,e,r,i,s,o)=>{if(e!=null&&e[r]!==void 0){let a=i();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?a.split("/").map(c=>(0,rS.extendedEncodeURIComponent)(c)).join("/"):(0,rS.extendedEncodeURIComponent)(a))}else throw new Error("No value provided for input HTTP label: "+r+".");return t},"resolvedPath");qu.resolvedPath=M1});var nS=u(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.serializeFloat=void 0;var D1=n(t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},"serializeFloat");Cu.serializeFloat=D1});var sS=u(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.splitEvery=void 0;function F1(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let i=t.split(e);if(r===1)return i;let s=[],o="";for(let a=0;a<i.length;a++)o===""?o=i[a]:o+=e+i[a],(a+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}n(F1,"splitEvery");ku.splitEvery=F1});var C=u(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});var qe=(A(),b(x));qe.__exportStar(LE(),Ae);qe.__exportStar(jE(),Ae);qe.__exportStar(VE(),Ae);qe.__exportStar($E(),Ae);qe.__exportStar(GE(),Ae);qe.__exportStar(BE(),Ae);qe.__exportStar(JE(),Ae);qe.__exportStar(YE(),Ae);qe.__exportStar(hy(),Ae);qe.__exportStar(_y(),Ae);qe.__exportStar(QE(),Ae);qe.__exportStar(XE(),Ae);qe.__exportStar(ZE(),Ae);qe.__exportStar(tS(),Ae);qe.__exportStar(py(),Ae);qe.__exportStar(iS(),Ae);qe.__exportStar(nS(),Ae);qe.__exportStar(sS(),Ae)});var Du=u(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.RDSDataServiceException=void 0;var L1=C(),Ms=class extends L1.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Ms.prototype)}};n(Ms,"RDSDataServiceException");Mu.RDSDataServiceException=Ms});var ri=u(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.ExecuteSqlResponseFilterSensitiveLog=y.SqlStatementResultFilterSensitiveLog=y.ResultFrameFilterSensitiveLog=y.ExecuteStatementResponseFilterSensitiveLog=y._RecordFilterSensitiveLog=y.BatchExecuteStatementResponseFilterSensitiveLog=y.BatchExecuteStatementRequestFilterSensitiveLog=y.StructValueFilterSensitiveLog=y.ExecuteStatementRequestFilterSensitiveLog=y.ValueFilterSensitiveLog=y.UpdateResultFilterSensitiveLog=y.SqlParameterFilterSensitiveLog=y.FieldFilterSensitiveLog=y.ArrayValueFilterSensitiveLog=y.RollbackTransactionResponseFilterSensitiveLog=y.RollbackTransactionRequestFilterSensitiveLog=y.ResultSetOptionsFilterSensitiveLog=y.ResultSetMetadataFilterSensitiveLog=y.ExecuteSqlRequestFilterSensitiveLog=y.CommitTransactionResponseFilterSensitiveLog=y.CommitTransactionRequestFilterSensitiveLog=y.ColumnMetadataFilterSensitiveLog=y.BeginTransactionResponseFilterSensitiveLog=y.BeginTransactionRequestFilterSensitiveLog=y.Value=y.Field=y.ArrayValue=y.LongReturnType=y.RecordsFormatType=y.DecimalReturnType=y.NotFoundException=y.StatementTimeoutException=y.ServiceUnavailableError=y.InternalServerErrorException=y.ForbiddenException=y.TypeHint=y.BadRequestException=y.AccessDeniedException=void 0;var zn=Du(),Ds=class extends zn.RDSDataServiceException{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Ds.prototype)}};n(Ds,"AccessDeniedException");y.AccessDeniedException=Ds;var Fs=class extends zn.RDSDataServiceException{constructor(e){super({name:"BadRequestException",$fault:"client",...e}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Fs.prototype)}};n(Fs,"BadRequestException");y.BadRequestException=Fs;var z1;(function(t){t.DATE="DATE",t.DECIMAL="DECIMAL",t.JSON="JSON",t.TIME="TIME",t.TIMESTAMP="TIMESTAMP",t.UUID="UUID"})(z1=y.TypeHint||(y.TypeHint={}));var Ls=class extends zn.RDSDataServiceException{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,Ls.prototype)}};n(Ls,"ForbiddenException");y.ForbiddenException=Ls;var zs=class extends zn.RDSDataServiceException{constructor(e){super({name:"InternalServerErrorException",$fault:"server",...e}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,zs.prototype)}};n(zs,"InternalServerErrorException");y.InternalServerErrorException=zs;var Us=class extends zn.RDSDataServiceException{constructor(e){super({name:"ServiceUnavailableError",$fault:"server",...e}),this.name="ServiceUnavailableError",this.$fault="server",Object.setPrototypeOf(this,Us.prototype)}};n(Us,"ServiceUnavailableError");y.ServiceUnavailableError=Us;var Ws=class extends zn.RDSDataServiceException{constructor(e){super({name:"StatementTimeoutException",$fault:"client",...e}),this.name="StatementTimeoutException",this.$fault="client",Object.setPrototypeOf(this,Ws.prototype),this.dbConnectionId=e.dbConnectionId}};n(Ws,"StatementTimeoutException");y.StatementTimeoutException=Ws;var js=class extends zn.RDSDataServiceException{constructor(e){super({name:"NotFoundException",$fault:"client",...e}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,js.prototype)}};n(js,"NotFoundException");y.NotFoundException=js;var U1;(function(t){t.DOUBLE_OR_LONG="DOUBLE_OR_LONG",t.STRING="STRING"})(U1=y.DecimalReturnType||(y.DecimalReturnType={}));var W1;(function(t){t.JSON="JSON",t.NONE="NONE"})(W1=y.RecordsFormatType||(y.RecordsFormatType={}));var j1;(function(t){t.LONG="LONG",t.STRING="STRING"})(j1=y.LongReturnType||(y.LongReturnType={}));var V1;(function(t){t.visit=(e,r)=>e.booleanValues!==void 0?r.booleanValues(e.booleanValues):e.longValues!==void 0?r.longValues(e.longValues):e.doubleValues!==void 0?r.doubleValues(e.doubleValues):e.stringValues!==void 0?r.stringValues(e.stringValues):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):r._(e.$unknown[0],e.$unknown[1])})(V1=y.ArrayValue||(y.ArrayValue={}));var $1;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.booleanValue!==void 0?r.booleanValue(e.booleanValue):e.longValue!==void 0?r.longValue(e.longValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValue!==void 0?r.arrayValue(e.arrayValue):r._(e.$unknown[0],e.$unknown[1])})($1=y.Field||(y.Field={}));var H1;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.bitValue!==void 0?r.bitValue(e.bitValue):e.bigIntValue!==void 0?r.bigIntValue(e.bigIntValue):e.intValue!==void 0?r.intValue(e.intValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.realValue!==void 0?r.realValue(e.realValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):e.structValue!==void 0?r.structValue(e.structValue):r._(e.$unknown[0],e.$unknown[1])})(H1=y.Value||(y.Value={}));var G1=n(t=>({...t}),"BeginTransactionRequestFilterSensitiveLog");y.BeginTransactionRequestFilterSensitiveLog=G1;var B1=n(t=>({...t}),"BeginTransactionResponseFilterSensitiveLog");y.BeginTransactionResponseFilterSensitiveLog=B1;var J1=n(t=>({...t}),"ColumnMetadataFilterSensitiveLog");y.ColumnMetadataFilterSensitiveLog=J1;var K1=n(t=>({...t}),"CommitTransactionRequestFilterSensitiveLog");y.CommitTransactionRequestFilterSensitiveLog=K1;var Y1=n(t=>({...t}),"CommitTransactionResponseFilterSensitiveLog");y.CommitTransactionResponseFilterSensitiveLog=Y1;var Q1=n(t=>({...t}),"ExecuteSqlRequestFilterSensitiveLog");y.ExecuteSqlRequestFilterSensitiveLog=Q1;var X1=n(t=>({...t}),"ResultSetMetadataFilterSensitiveLog");y.ResultSetMetadataFilterSensitiveLog=X1;var Z1=n(t=>({...t}),"ResultSetOptionsFilterSensitiveLog");y.ResultSetOptionsFilterSensitiveLog=Z1;var ek=n(t=>({...t}),"RollbackTransactionRequestFilterSensitiveLog");y.RollbackTransactionRequestFilterSensitiveLog=ek;var tk=n(t=>({...t}),"RollbackTransactionResponseFilterSensitiveLog");y.RollbackTransactionResponseFilterSensitiveLog=tk;var rk=n(t=>{if(t.booleanValues!==void 0)return{booleanValues:t.booleanValues};if(t.longValues!==void 0)return{longValues:t.longValues};if(t.doubleValues!==void 0)return{doubleValues:t.doubleValues};if(t.stringValues!==void 0)return{stringValues:t.stringValues};if(t.arrayValues!==void 0)return{arrayValues:t.arrayValues.map(e=>(0,y.ArrayValueFilterSensitiveLog)(e))};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"ArrayValueFilterSensitiveLog");y.ArrayValueFilterSensitiveLog=rk;var ik=n(t=>{if(t.isNull!==void 0)return{isNull:t.isNull};if(t.booleanValue!==void 0)return{booleanValue:t.booleanValue};if(t.longValue!==void 0)return{longValue:t.longValue};if(t.doubleValue!==void 0)return{doubleValue:t.doubleValue};if(t.stringValue!==void 0)return{stringValue:t.stringValue};if(t.blobValue!==void 0)return{blobValue:t.blobValue};if(t.arrayValue!==void 0)return{arrayValue:(0,y.ArrayValueFilterSensitiveLog)(t.arrayValue)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"FieldFilterSensitiveLog");y.FieldFilterSensitiveLog=ik;var nk=n(t=>({...t,...t.value&&{value:(0,y.FieldFilterSensitiveLog)(t.value)}}),"SqlParameterFilterSensitiveLog");y.SqlParameterFilterSensitiveLog=nk;var sk=n(t=>({...t,...t.generatedFields&&{generatedFields:t.generatedFields.map(e=>(0,y.FieldFilterSensitiveLog)(e))}}),"UpdateResultFilterSensitiveLog");y.UpdateResultFilterSensitiveLog=sk;var ok=n(t=>{if(t.isNull!==void 0)return{isNull:t.isNull};if(t.bitValue!==void 0)return{bitValue:t.bitValue};if(t.bigIntValue!==void 0)return{bigIntValue:t.bigIntValue};if(t.intValue!==void 0)return{intValue:t.intValue};if(t.doubleValue!==void 0)return{doubleValue:t.doubleValue};if(t.realValue!==void 0)return{realValue:t.realValue};if(t.stringValue!==void 0)return{stringValue:t.stringValue};if(t.blobValue!==void 0)return{blobValue:t.blobValue};if(t.arrayValues!==void 0)return{arrayValues:t.arrayValues.map(e=>(0,y.ValueFilterSensitiveLog)(e))};if(t.structValue!==void 0)return{structValue:(0,y.StructValueFilterSensitiveLog)(t.structValue)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"ValueFilterSensitiveLog");y.ValueFilterSensitiveLog=ok;var ak=n(t=>({...t,...t.parameters&&{parameters:t.parameters.map(e=>(0,y.SqlParameterFilterSensitiveLog)(e))}}),"ExecuteStatementRequestFilterSensitiveLog");y.ExecuteStatementRequestFilterSensitiveLog=ak;var ck=n(t=>({...t,...t.attributes&&{attributes:t.attributes.map(e=>(0,y.ValueFilterSensitiveLog)(e))}}),"StructValueFilterSensitiveLog");y.StructValueFilterSensitiveLog=ck;var dk=n(t=>({...t,...t.parameterSets&&{parameterSets:t.parameterSets.map(e=>e.map(r=>(0,y.SqlParameterFilterSensitiveLog)(r)))}}),"BatchExecuteStatementRequestFilterSensitiveLog");y.BatchExecuteStatementRequestFilterSensitiveLog=dk;var uk=n(t=>({...t,...t.updateResults&&{updateResults:t.updateResults.map(e=>(0,y.UpdateResultFilterSensitiveLog)(e))}}),"BatchExecuteStatementResponseFilterSensitiveLog");y.BatchExecuteStatementResponseFilterSensitiveLog=uk;var lk=n(t=>({...t,...t.values&&{values:t.values.map(e=>(0,y.ValueFilterSensitiveLog)(e))}}),"_RecordFilterSensitiveLog");y._RecordFilterSensitiveLog=lk;var pk=n(t=>({...t,...t.records&&{records:t.records.map(e=>e.map(r=>(0,y.FieldFilterSensitiveLog)(r)))},...t.generatedFields&&{generatedFields:t.generatedFields.map(e=>(0,y.FieldFilterSensitiveLog)(e))}}),"ExecuteStatementResponseFilterSensitiveLog");y.ExecuteStatementResponseFilterSensitiveLog=pk;var fk=n(t=>({...t,...t.records&&{records:t.records.map(e=>(0,y._RecordFilterSensitiveLog)(e))}}),"ResultFrameFilterSensitiveLog");y.ResultFrameFilterSensitiveLog=fk;var mk=n(t=>({...t}),"SqlStatementResultFilterSensitiveLog");y.SqlStatementResultFilterSensitiveLog=mk;var hk=n(t=>({...t}),"ExecuteSqlResponseFilterSensitiveLog");y.ExecuteSqlResponseFilterSensitiveLog=hk});var yy=u(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.FieldPosition=void 0;var _k;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(_k=Sc.FieldPosition||(Sc.FieldPosition={}))});var oS=u(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Field=void 0;var yk=yy(),Fu=class{constructor({name:e,kind:r=yk.FieldPosition.HEADER,values:i=[]}){this.name=e,this.kind=r,this.values=i}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}};n(Fu,"Field");Lu.Field=Fu});var aS=u(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.Fields=void 0;var zu=class{constructor({fields:e=[],encoding:r="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name]=e}getField(e){return this.entries[e]}removeField(e){delete this.entries[e]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}};n(zu,"Fields");Uu.Fields=zu});var dS=u(cS=>{"use strict";Object.defineProperty(cS,"__esModule",{value:!0})});var uS=u(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.HttpRequest=void 0;var Vs=class{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new Vs({...this,headers:{...this.headers}});return e.query&&(e.query=gk(e.query)),e}};n(Vs,"HttpRequest");Wu.HttpRequest=Vs;function gk(t){return Object.keys(t).reduce((e,r)=>{let i=t[r];return{...e,[r]:Array.isArray(i)?[...i]:i}},{})}n(gk,"cloneQuery")});var lS=u(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.HttpResponse=void 0;var ju=class{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};n(ju,"HttpResponse");Vu.HttpResponse=ju});var pS=u($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.isValidHostname=void 0;function wk(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}n(wk,"isValidHostname");$u.isValidHostname=wk});var tt=u(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});var Un=(A(),b(x));Un.__exportStar(oS(),ii);Un.__exportStar(yy(),ii);Un.__exportStar(aS(),ii);Un.__exportStar(dS(),ii);Un.__exportStar(uS(),ii);Un.__exportStar(lS(),ii);Un.__exportStar(pS(),ii)});var jn=u(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.deserializeAws_restJson1RollbackTransactionCommand=se.deserializeAws_restJson1ExecuteStatementCommand=se.deserializeAws_restJson1ExecuteSqlCommand=se.deserializeAws_restJson1CommitTransactionCommand=se.deserializeAws_restJson1BeginTransactionCommand=se.deserializeAws_restJson1BatchExecuteStatementCommand=se.serializeAws_restJson1RollbackTransactionCommand=se.serializeAws_restJson1ExecuteStatementCommand=se.serializeAws_restJson1ExecuteSqlCommand=se.serializeAws_restJson1CommitTransactionCommand=se.serializeAws_restJson1BeginTransactionCommand=se.serializeAws_restJson1BatchExecuteStatementCommand=void 0;var $s=tt(),v=C(),ni=ri(),Hs=Du(),vk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BatchExecute`,l;return l=JSON.stringify({...t.database!=null&&{database:t.database},...t.parameterSets!=null&&{parameterSets:Hk(t.parameterSets,e)},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn},...t.sql!=null&&{sql:t.sql},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1BatchExecuteStatementCommand");se.serializeAws_restJson1BatchExecuteStatementCommand=vk;var Ek=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BeginTransaction`,l;return l=JSON.stringify({...t.database!=null&&{database:t.database},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1BeginTransactionCommand");se.serializeAws_restJson1BeginTransactionCommand=Ek;var Sk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/CommitTransaction`,l;return l=JSON.stringify({...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.secretArn!=null&&{secretArn:t.secretArn},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1CommitTransactionCommand");se.serializeAws_restJson1CommitTransactionCommand=Sk;var Nk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/ExecuteSql`,l;return l=JSON.stringify({...t.awsSecretStoreArn!=null&&{awsSecretStoreArn:t.awsSecretStoreArn},...t.database!=null&&{database:t.database},...t.dbClusterOrInstanceArn!=null&&{dbClusterOrInstanceArn:t.dbClusterOrInstanceArn},...t.schema!=null&&{schema:t.schema},...t.sqlStatements!=null&&{sqlStatements:t.sqlStatements}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1ExecuteSqlCommand");se.serializeAws_restJson1ExecuteSqlCommand=Nk;var bk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/Execute`,l;return l=JSON.stringify({...t.continueAfterTimeout!=null&&{continueAfterTimeout:t.continueAfterTimeout},...t.database!=null&&{database:t.database},...t.formatRecordsAs!=null&&{formatRecordsAs:t.formatRecordsAs},...t.includeResultMetadata!=null&&{includeResultMetadata:t.includeResultMetadata},...t.parameters!=null&&{parameters:hS(t.parameters,e)},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.resultSetOptions!=null&&{resultSetOptions:Vk(t.resultSetOptions,e)},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn},...t.sql!=null&&{sql:t.sql},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1ExecuteStatementCommand");se.serializeAws_restJson1ExecuteStatementCommand=bk;var xk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/RollbackTransaction`,l;return l=JSON.stringify({...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.secretArn!=null&&{secretArn:t.secretArn},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1RollbackTransactionCommand");se.serializeAws_restJson1RollbackTransactionCommand=xk;var Ak=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Tk(t,e);let r=Et({$metadata:St(t)}),i=(0,v.expectNonNull)((0,v.expectObject)(await Wn(t.body,e)),"body");return i.updateResults!=null&&(r.updateResults=uM(i.updateResults,e)),r},"deserializeAws_restJson1BatchExecuteStatementCommand");se.deserializeAws_restJson1BatchExecuteStatementCommand=Ak;var Tk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,v.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1BatchExecuteStatementCommandError"),Ok=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Pk(t,e);let r=Et({$metadata:St(t)}),i=(0,v.expectNonNull)((0,v.expectObject)(await Wn(t.body,e)),"body");return i.transactionId!=null&&(r.transactionId=(0,v.expectString)(i.transactionId)),r},"deserializeAws_restJson1BeginTransactionCommand");se.deserializeAws_restJson1BeginTransactionCommand=Ok;var Pk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,v.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1BeginTransactionCommandError"),Rk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Ik(t,e);let r=Et({$metadata:St(t)}),i=(0,v.expectNonNull)((0,v.expectObject)(await Wn(t.body,e)),"body");return i.transactionStatus!=null&&(r.transactionStatus=(0,v.expectString)(i.transactionStatus)),r},"deserializeAws_restJson1CommitTransactionCommand");se.deserializeAws_restJson1CommitTransactionCommand=Rk;var Ik=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await fS(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,v.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1CommitTransactionCommandError"),qk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Ck(t,e);let r=Et({$metadata:St(t)}),i=(0,v.expectNonNull)((0,v.expectObject)(await Wn(t.body,e)),"body");return i.sqlStatementResults!=null&&(r.sqlStatementResults=oM(i.sqlStatementResults,e)),r},"deserializeAws_restJson1ExecuteSqlCommand");se.deserializeAws_restJson1ExecuteSqlCommand=qk;var Ck=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);default:let s=r.body;(0,v.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1ExecuteSqlCommandError"),kk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Mk(t,e);let r=Et({$metadata:St(t)}),i=(0,v.expectNonNull)((0,v.expectObject)(await Wn(t.body,e)),"body");return i.columnMetadata!=null&&(r.columnMetadata=gS(i.columnMetadata,e)),i.formattedRecords!=null&&(r.formattedRecords=(0,v.expectString)(i.formattedRecords)),i.generatedFields!=null&&(r.generatedFields=gy(i.generatedFields,e)),i.numberOfRecordsUpdated!=null&&(r.numberOfRecordsUpdated=(0,v.expectLong)(i.numberOfRecordsUpdated)),i.records!=null&&(r.records=nM(i.records,e)),r},"deserializeAws_restJson1ExecuteStatementCommand");se.deserializeAws_restJson1ExecuteStatementCommand=kk;var Mk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,v.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1ExecuteStatementCommandError"),Dk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Fk(t,e);let r=Et({$metadata:St(t)}),i=(0,v.expectNonNull)((0,v.expectObject)(await Wn(t.body,e)),"body");return i.transactionStatus!=null&&(r.transactionStatus=(0,v.expectString)(i.transactionStatus)),r},"deserializeAws_restJson1RollbackTransactionCommand");se.deserializeAws_restJson1RollbackTransactionCommand=Dk;var Fk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await fS(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,v.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1RollbackTransactionCommandError"),Et=v.map,Gs=n(async(t,e)=>{let r=Et({}),i=t.body;i.message!=null&&(r.message=(0,v.expectString)(i.message));let s=new ni.AccessDeniedException({$metadata:St(t),...r});return(0,v.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AccessDeniedExceptionResponse"),Bs=n(async(t,e)=>{let r=Et({}),i=t.body;i.message!=null&&(r.message=(0,v.expectString)(i.message));let s=new ni.BadRequestException({$metadata:St(t),...r});return(0,v.decorateServiceException)(s,t.body)},"deserializeAws_restJson1BadRequestExceptionResponse"),Js=n(async(t,e)=>{let r=Et({}),i=t.body;i.message!=null&&(r.message=(0,v.expectString)(i.message));let s=new ni.ForbiddenException({$metadata:St(t),...r});return(0,v.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ForbiddenExceptionResponse"),Ks=n(async(t,e)=>{let r=Et({}),i=t.body,s=new ni.InternalServerErrorException({$metadata:St(t),...r});return(0,v.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InternalServerErrorExceptionResponse"),fS=n(async(t,e)=>{let r=Et({}),i=t.body;i.message!=null&&(r.message=(0,v.expectString)(i.message));let s=new ni.NotFoundException({$metadata:St(t),...r});return(0,v.decorateServiceException)(s,t.body)},"deserializeAws_restJson1NotFoundExceptionResponse"),Ys=n(async(t,e)=>{let r=Et({}),i=t.body,s=new ni.ServiceUnavailableError({$metadata:St(t),...r});return(0,v.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ServiceUnavailableErrorResponse"),Nc=n(async(t,e)=>{let r=Et({}),i=t.body;i.dbConnectionId!=null&&(r.dbConnectionId=(0,v.expectLong)(i.dbConnectionId)),i.message!=null&&(r.message=(0,v.expectString)(i.message));let s=new ni.StatementTimeoutException({$metadata:St(t),...r});return(0,v.decorateServiceException)(s,t.body)},"deserializeAws_restJson1StatementTimeoutExceptionResponse"),Lk=n((t,e)=>t.filter(r=>r!=null).map(r=>mS(r,e)),"serializeAws_restJson1ArrayOfArray"),mS=n((t,e)=>ni.ArrayValue.visit(t,{arrayValues:r=>({arrayValues:Lk(r,e)}),booleanValues:r=>({booleanValues:zk(r,e)}),doubleValues:r=>({doubleValues:Uk(r,e)}),longValues:r=>({longValues:jk(r,e)}),stringValues:r=>({stringValues:Gk(r,e)}),_:(r,i)=>({name:i})}),"serializeAws_restJson1ArrayValue"),zk=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1BooleanArray"),Uk=n((t,e)=>t.filter(r=>r!=null).map(r=>(0,v.serializeFloat)(r)),"serializeAws_restJson1DoubleArray"),Wk=n((t,e)=>ni.Field.visit(t,{arrayValue:r=>({arrayValue:mS(r,e)}),blobValue:r=>({blobValue:e.base64Encoder(r)}),booleanValue:r=>({booleanValue:r}),doubleValue:r=>({doubleValue:(0,v.serializeFloat)(r)}),isNull:r=>({isNull:r}),longValue:r=>({longValue:r}),stringValue:r=>({stringValue:r}),_:(r,i)=>({name:i})}),"serializeAws_restJson1Field"),jk=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1LongArray"),Vk=n((t,e)=>({...t.decimalReturnType!=null&&{decimalReturnType:t.decimalReturnType},...t.longReturnType!=null&&{longReturnType:t.longReturnType}}),"serializeAws_restJson1ResultSetOptions"),$k=n((t,e)=>({...t.name!=null&&{name:t.name},...t.typeHint!=null&&{typeHint:t.typeHint},...t.value!=null&&{value:Wk(t.value,e)}}),"serializeAws_restJson1SqlParameter"),Hk=n((t,e)=>t.filter(r=>r!=null).map(r=>hS(r,e)),"serializeAws_restJson1SqlParameterSets"),hS=n((t,e)=>t.filter(r=>r!=null).map(r=>$k(r,e)),"serializeAws_restJson1SqlParametersList"),Gk=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1StringArray"),Bk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:_S((0,v.expectUnion)(i),e)),"deserializeAws_restJson1ArrayOfArray"),_S=n((t,e)=>t.arrayValues!=null?{arrayValues:Bk(t.arrayValues,e)}:t.booleanValues!=null?{booleanValues:Jk(t.booleanValues,e)}:t.doubleValues!=null?{doubleValues:Yk(t.doubleValues,e)}:t.longValues!=null?{longValues:Xk(t.longValues,e)}:t.stringValues!=null?{stringValues:aM(t.stringValues,e)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1ArrayValue"),yS=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:wS((0,v.expectUnion)(i),e)),"deserializeAws_restJson1ArrayValueList"),Jk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,v.expectBoolean)(i)),"deserializeAws_restJson1BooleanArray"),Kk=n((t,e)=>({arrayBaseColumnType:(0,v.expectInt32)(t.arrayBaseColumnType),isAutoIncrement:(0,v.expectBoolean)(t.isAutoIncrement),isCaseSensitive:(0,v.expectBoolean)(t.isCaseSensitive),isCurrency:(0,v.expectBoolean)(t.isCurrency),isSigned:(0,v.expectBoolean)(t.isSigned),label:(0,v.expectString)(t.label),name:(0,v.expectString)(t.name),nullable:(0,v.expectInt32)(t.nullable),precision:(0,v.expectInt32)(t.precision),scale:(0,v.expectInt32)(t.scale),schemaName:(0,v.expectString)(t.schemaName),tableName:(0,v.expectString)(t.tableName),type:(0,v.expectInt32)(t.type),typeName:(0,v.expectString)(t.typeName)}),"deserializeAws_restJson1ColumnMetadata"),Yk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,v.limitedParseDouble)(i)),"deserializeAws_restJson1DoubleArray"),Qk=n((t,e)=>t.arrayValue!=null?{arrayValue:_S((0,v.expectUnion)(t.arrayValue),e)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,v.expectBoolean)(t.booleanValue)!==void 0?{booleanValue:(0,v.expectBoolean)(t.booleanValue)}:(0,v.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,v.limitedParseDouble)(t.doubleValue)}:(0,v.expectBoolean)(t.isNull)!==void 0?{isNull:(0,v.expectBoolean)(t.isNull)}:(0,v.expectLong)(t.longValue)!==void 0?{longValue:(0,v.expectLong)(t.longValue)}:(0,v.expectString)(t.stringValue)!==void 0?{stringValue:(0,v.expectString)(t.stringValue)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1Field"),gy=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:Qk((0,v.expectUnion)(i),e)),"deserializeAws_restJson1FieldList"),Xk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,v.expectLong)(i)),"deserializeAws_restJson1LongArray"),gS=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:Kk(i,e)),"deserializeAws_restJson1Metadata"),Zk=n((t,e)=>({values:t.values!=null?iM(t.values,e):void 0}),"deserializeAws_restJson1_Record"),eM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:Zk(i,e)),"deserializeAws_restJson1Records"),tM=n((t,e)=>({records:t.records!=null?eM(t.records,e):void 0,resultSetMetadata:t.resultSetMetadata!=null?rM(t.resultSetMetadata,e):void 0}),"deserializeAws_restJson1ResultFrame"),rM=n((t,e)=>({columnCount:(0,v.expectLong)(t.columnCount),columnMetadata:t.columnMetadata!=null?gS(t.columnMetadata,e):void 0}),"deserializeAws_restJson1ResultSetMetadata"),iM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:wS((0,v.expectUnion)(i),e)),"deserializeAws_restJson1Row"),nM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:gy(i,e)),"deserializeAws_restJson1SqlRecords"),sM=n((t,e)=>({numberOfRecordsUpdated:(0,v.expectLong)(t.numberOfRecordsUpdated),resultFrame:t.resultFrame!=null?tM(t.resultFrame,e):void 0}),"deserializeAws_restJson1SqlStatementResult"),oM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:sM(i,e)),"deserializeAws_restJson1SqlStatementResults"),aM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,v.expectString)(i)),"deserializeAws_restJson1StringArray"),cM=n((t,e)=>({attributes:t.attributes!=null?yS(t.attributes,e):void 0}),"deserializeAws_restJson1StructValue"),dM=n((t,e)=>({generatedFields:t.generatedFields!=null?gy(t.generatedFields,e):void 0}),"deserializeAws_restJson1UpdateResult"),uM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:dM(i,e)),"deserializeAws_restJson1UpdateResults"),wS=n((t,e)=>t.arrayValues!=null?{arrayValues:yS(t.arrayValues,e)}:(0,v.expectLong)(t.bigIntValue)!==void 0?{bigIntValue:(0,v.expectLong)(t.bigIntValue)}:(0,v.expectBoolean)(t.bitValue)!==void 0?{bitValue:(0,v.expectBoolean)(t.bitValue)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,v.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,v.limitedParseDouble)(t.doubleValue)}:(0,v.expectInt32)(t.intValue)!==void 0?{intValue:(0,v.expectInt32)(t.intValue)}:(0,v.expectBoolean)(t.isNull)!==void 0?{isNull:(0,v.expectBoolean)(t.isNull)}:(0,v.limitedParseFloat32)(t.realValue)!==void 0?{realValue:(0,v.limitedParseFloat32)(t.realValue)}:(0,v.expectString)(t.stringValue)!==void 0?{stringValue:(0,v.expectString)(t.stringValue)}:t.structValue!=null?{structValue:cM(t.structValue,e)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1Value"),St=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),lM=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),pM=n((t,e)=>lM(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Wn=n((t,e)=>pM(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),Qs=n(async(t,e)=>{let r=await Wn(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),Xs=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var wy=u(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.BatchExecuteStatementCommand=void 0;var fM=ne(),mM=me(),hM=C(),vS=ri(),ES=jn(),Zs=class extends hM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,mM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,fM.getEndpointPlugin)(r,Zs.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"BatchExecuteStatementCommand",inputFilterSensitiveLog:vS.BatchExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:vS.BatchExecuteStatementResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,ES.serializeAws_restJson1BatchExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,ES.deserializeAws_restJson1BatchExecuteStatementCommand)(e,r)}};n(Zs,"BatchExecuteStatementCommand");Hu.BatchExecuteStatementCommand=Zs});var vy=u(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.BeginTransactionCommand=void 0;var _M=ne(),yM=me(),gM=C(),SS=ri(),NS=jn(),eo=class extends gM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,yM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,_M.getEndpointPlugin)(r,eo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"BeginTransactionCommand",inputFilterSensitiveLog:SS.BeginTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:SS.BeginTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,NS.serializeAws_restJson1BeginTransactionCommand)(e,r)}deserialize(e,r){return(0,NS.deserializeAws_restJson1BeginTransactionCommand)(e,r)}};n(eo,"BeginTransactionCommand");Gu.BeginTransactionCommand=eo});var Ey=u(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.CommitTransactionCommand=void 0;var wM=ne(),vM=me(),EM=C(),bS=ri(),xS=jn(),to=class extends EM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,vM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,wM.getEndpointPlugin)(r,to.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"CommitTransactionCommand",inputFilterSensitiveLog:bS.CommitTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:bS.CommitTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,xS.serializeAws_restJson1CommitTransactionCommand)(e,r)}deserialize(e,r){return(0,xS.deserializeAws_restJson1CommitTransactionCommand)(e,r)}};n(to,"CommitTransactionCommand");Bu.CommitTransactionCommand=to});var Sy=u(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.ExecuteSqlCommand=void 0;var SM=ne(),NM=me(),bM=C(),AS=ri(),TS=jn(),ro=class extends bM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,NM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,SM.getEndpointPlugin)(r,ro.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"ExecuteSqlCommand",inputFilterSensitiveLog:AS.ExecuteSqlRequestFilterSensitiveLog,outputFilterSensitiveLog:AS.ExecuteSqlResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,TS.serializeAws_restJson1ExecuteSqlCommand)(e,r)}deserialize(e,r){return(0,TS.deserializeAws_restJson1ExecuteSqlCommand)(e,r)}};n(ro,"ExecuteSqlCommand");Ju.ExecuteSqlCommand=ro});var Ny=u(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.ExecuteStatementCommand=void 0;var xM=ne(),AM=me(),TM=C(),OS=ri(),PS=jn(),io=class extends TM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,AM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,xM.getEndpointPlugin)(r,io.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"ExecuteStatementCommand",inputFilterSensitiveLog:OS.ExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:OS.ExecuteStatementResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,PS.serializeAws_restJson1ExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,PS.deserializeAws_restJson1ExecuteStatementCommand)(e,r)}};n(io,"ExecuteStatementCommand");Ku.ExecuteStatementCommand=io});var by=u(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.RollbackTransactionCommand=void 0;var OM=ne(),PM=me(),RM=C(),RS=ri(),IS=jn(),no=class extends RM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,PM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,OM.getEndpointPlugin)(r,no.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"RollbackTransactionCommand",inputFilterSensitiveLog:RS.RollbackTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:RS.RollbackTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,IS.serializeAws_restJson1RollbackTransactionCommand)(e,r)}deserialize(e,r){return(0,IS.deserializeAws_restJson1RollbackTransactionCommand)(e,r)}};n(no,"RollbackTransactionCommand");Yu.RollbackTransactionCommand=no});var qS=u(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.booleanSelector=Vn.SelectorType=void 0;var IM;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(IM=Vn.SelectorType||(Vn.SelectorType={}));var qM=n((t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},"booleanSelector");Vn.booleanSelector=qM});var Ay=u(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});var CM=(A(),b(x));CM.__exportStar(qS(),xy)});var CS=u(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=Rt.DEFAULT_USE_DUALSTACK_ENDPOINT=Rt.CONFIG_USE_DUALSTACK_ENDPOINT=Rt.ENV_USE_DUALSTACK_ENDPOINT=void 0;var Qu=Ay();Rt.ENV_USE_DUALSTACK_ENDPOINT="AWS_USE_DUALSTACK_ENDPOINT";Rt.CONFIG_USE_DUALSTACK_ENDPOINT="use_dualstack_endpoint";Rt.DEFAULT_USE_DUALSTACK_ENDPOINT=!1;Rt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>(0,Qu.booleanSelector)(t,Rt.ENV_USE_DUALSTACK_ENDPOINT,Qu.SelectorType.ENV),configFileSelector:t=>(0,Qu.booleanSelector)(t,Rt.CONFIG_USE_DUALSTACK_ENDPOINT,Qu.SelectorType.CONFIG),default:!1}});var kS=u(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=It.DEFAULT_USE_FIPS_ENDPOINT=It.CONFIG_USE_FIPS_ENDPOINT=It.ENV_USE_FIPS_ENDPOINT=void 0;var Xu=Ay();It.ENV_USE_FIPS_ENDPOINT="AWS_USE_FIPS_ENDPOINT";It.CONFIG_USE_FIPS_ENDPOINT="use_fips_endpoint";It.DEFAULT_USE_FIPS_ENDPOINT=!1;It.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>(0,Xu.booleanSelector)(t,It.ENV_USE_FIPS_ENDPOINT,Xu.SelectorType.ENV),configFileSelector:t=>(0,Xu.booleanSelector)(t,It.CONFIG_USE_FIPS_ENDPOINT,Xu.SelectorType.CONFIG),default:!1}});var DS=u(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.resolveCustomEndpointsConfig=void 0;var MS=Fn(),kM=n(t=>{var e,r;let{endpoint:i,urlParser:s}=t;return{...t,tls:(e=t.tls)!==null&&e!==void 0?e:!0,endpoint:(0,MS.normalizeProvider)(typeof i=="string"?s(i):i),isCustomEndpoint:!0,useDualstackEndpoint:(0,MS.normalizeProvider)((r=t.useDualstackEndpoint)!==null&&r!==void 0?r:!1)}},"resolveCustomEndpointsConfig");Zu.resolveCustomEndpointsConfig=kM});var FS=u(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.getEndpointFromRegion=void 0;var MM=n(async t=>{var e;let{tls:r=!0}=t,i=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(i))throw new Error("Invalid region in client config");let o=await t.useDualstackEndpoint(),a=await t.useFipsEndpoint(),{hostname:c}=(e=await t.regionInfoProvider(i,{useDualstackEndpoint:o,useFipsEndpoint:a}))!==null&&e!==void 0?e:{};if(!c)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${r?"https:":"http:"}//${c}`)},"getEndpointFromRegion");el.getEndpointFromRegion=MM});var zS=u(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.resolveEndpointsConfig=void 0;var LS=Fn(),DM=FS(),FM=n(t=>{var e,r;let i=(0,LS.normalizeProvider)((e=t.useDualstackEndpoint)!==null&&e!==void 0?e:!1),{endpoint:s,useFipsEndpoint:o,urlParser:a}=t;return{...t,tls:(r=t.tls)!==null&&r!==void 0?r:!0,endpoint:s?(0,LS.normalizeProvider)(typeof s=="string"?a(s):s):()=>(0,DM.getEndpointFromRegion)({...t,useDualstackEndpoint:i,useFipsEndpoint:o}),isCustomEndpoint:!!s,useDualstackEndpoint:i}},"resolveEndpointsConfig");tl.resolveEndpointsConfig=FM});var US=u(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});var rl=(A(),b(x));rl.__exportStar(CS(),so);rl.__exportStar(kS(),so);rl.__exportStar(DS(),so);rl.__exportStar(zS(),so)});var WS=u(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.NODE_REGION_CONFIG_FILE_OPTIONS=qt.NODE_REGION_CONFIG_OPTIONS=qt.REGION_INI_NAME=qt.REGION_ENV_NAME=void 0;qt.REGION_ENV_NAME="AWS_REGION";qt.REGION_INI_NAME="region";qt.NODE_REGION_CONFIG_OPTIONS={environmentVariableSelector:t=>t[qt.REGION_ENV_NAME],configFileSelector:t=>t[qt.REGION_INI_NAME],default:()=>{throw new Error("Region is missing")}};qt.NODE_REGION_CONFIG_FILE_OPTIONS={preferredFile:"credentials"}});var Ty=u(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.isFipsRegion=void 0;var LM=n(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion");il.isFipsRegion=LM});var jS=u(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.getRealRegion=void 0;var zM=Ty(),UM=n(t=>(0,zM.isFipsRegion)(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion");nl.getRealRegion=UM});var $S=u(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.resolveRegionConfig=void 0;var VS=jS(),WM=Ty(),jM=n(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return(0,VS.getRealRegion)(e);let i=await e();return(0,VS.getRealRegion)(i)},useFipsEndpoint:async()=>{let i=typeof e=="string"?e:await e();return(0,WM.isFipsRegion)(i)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig");sl.resolveRegionConfig=jM});var GS=u(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var HS=(A(),b(x));HS.__exportStar(WS(),ol);HS.__exportStar($S(),ol)});var JS=u(BS=>{"use strict";Object.defineProperty(BS,"__esModule",{value:!0})});var YS=u(KS=>{"use strict";Object.defineProperty(KS,"__esModule",{value:!0})});var QS=u(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.getHostnameFromVariants=void 0;var VM=n((t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>{var i;return(i=t.find(({tags:s})=>e===s.includes("fips")&&r===s.includes("dualstack")))===null||i===void 0?void 0:i.hostname},"getHostnameFromVariants");al.getHostnameFromVariants=VM});var XS=u(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.getResolvedHostname=void 0;var $M=n((t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),"getResolvedHostname");cl.getResolvedHostname=$M});var ZS=u(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.getResolvedPartition=void 0;var HM=n((t,{partitionHash:e})=>{var r;return(r=Object.keys(e||{}).find(i=>e[i].regions.includes(t)))!==null&&r!==void 0?r:"aws"},"getResolvedPartition");dl.getResolvedPartition=HM});var eN=u(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.getResolvedSigningRegion=void 0;var GM=n((t,{signingRegion:e,regionRegex:r,useFipsEndpoint:i})=>{if(e)return e;if(i){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(s);if(o)return o[0].slice(1,-1)}},"getResolvedSigningRegion");ul.getResolvedSigningRegion=GM});var rN=u(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.getRegionInfo=void 0;var tN=QS(),BM=XS(),JM=ZS(),KM=eN(),YM=n((t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:i,regionHash:s,partitionHash:o})=>{var a,c,l,p,f,m;let h=(0,JM.getResolvedPartition)(t,{partitionHash:o}),_=t in s?t:(c=(a=o[h])===null||a===void 0?void 0:a.endpoint)!==null&&c!==void 0?c:t,w={useFipsEndpoint:e,useDualstackEndpoint:r},g=(0,tN.getHostnameFromVariants)((l=s[_])===null||l===void 0?void 0:l.variants,w),S=(0,tN.getHostnameFromVariants)((p=o[h])===null||p===void 0?void 0:p.variants,w),ie=(0,BM.getResolvedHostname)(_,{regionHostname:g,partitionHostname:S});if(ie===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:_,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let Ie=(0,KM.getResolvedSigningRegion)(ie,{signingRegion:(f=s[_])===null||f===void 0?void 0:f.signingRegion,regionRegex:o[h].regionRegex,useFipsEndpoint:e});return{partition:h,signingService:i,hostname:ie,...Ie&&{signingRegion:Ie},...((m=s[_])===null||m===void 0?void 0:m.signingService)&&{signingService:s[_].signingService}}},"getRegionInfo");ll.getRegionInfo=YM});var iN=u(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var Oy=(A(),b(x));Oy.__exportStar(JS(),bc);Oy.__exportStar(YS(),bc);Oy.__exportStar(rN(),bc)});var hr=u(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var Py=(A(),b(x));Py.__exportStar(US(),xc);Py.__exportStar(GS(),xc);Py.__exportStar(iN(),xc)});var Ac=u(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.getContentLengthPlugin=si.contentLengthMiddlewareOptions=si.contentLengthMiddleware=void 0;var QM=tt(),nN="content-length";function sN(t){return e=>async r=>{let i=r.request;if(QM.HttpRequest.isInstance(i)){let{body:s,headers:o}=i;if(s&&Object.keys(o).map(a=>a.toLowerCase()).indexOf(nN)===-1)try{let a=t(s);i.headers={...i.headers,[nN]:String(a)}}catch{}}return e({...r,request:i})}}n(sN,"contentLengthMiddleware");si.contentLengthMiddleware=sN;si.contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};var XM=n(t=>({applyToStack:e=>{e.add(sN(t.bodyLengthChecker),si.contentLengthMiddlewareOptions)}}),"getContentLengthPlugin");si.getContentLengthPlugin=XM});var Tc=u(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.getHostHeaderPlugin=Ct.hostHeaderMiddlewareOptions=Ct.hostHeaderMiddleware=Ct.resolveHostHeaderConfig=void 0;var ZM=tt();function eD(t){return t}n(eD,"resolveHostHeaderConfig");Ct.resolveHostHeaderConfig=eD;var tD=n(t=>e=>async r=>{if(!ZM.HttpRequest.isInstance(r.request))return e(r);let{request:i}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!i.headers[":authority"])delete i.headers.host,i.headers[":authority"]="";else if(!i.headers.host){let o=i.hostname;i.port!=null&&(o+=`:${i.port}`),i.headers.host=o}return e(r)},"hostHeaderMiddleware");Ct.hostHeaderMiddleware=tD;Ct.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0};var rD=n(t=>({applyToStack:e=>{e.add((0,Ct.hostHeaderMiddleware)(t),Ct.hostHeaderMiddlewareOptions)}}),"getHostHeaderPlugin");Ct.getHostHeaderPlugin=rD});var oN=u(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.getLoggerPlugin=_r.loggerMiddlewareOptions=_r.loggerMiddleware=void 0;var iD=n(()=>(t,e)=>async r=>{let i=await t(r),{clientName:s,commandName:o,logger:a,inputFilterSensitiveLog:c,outputFilterSensitiveLog:l,dynamoDbDocumentClientOptions:p={}}=e,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:m}=p;if(!a)return i;if(typeof a.info=="function"){let{$metadata:h,..._}=i.output;a.info({clientName:s,commandName:o,input:(f??c)(r.input),output:(m??l)(_),metadata:h})}return i},"loggerMiddleware");_r.loggerMiddleware=iD;_r.loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var nD=n(t=>({applyToStack:e=>{e.add((0,_r.loggerMiddleware)(),_r.loggerMiddlewareOptions)}}),"getLoggerPlugin");_r.getLoggerPlugin=nD});var Oc=u(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0});var sD=(A(),b(x));sD.__exportStar(oN(),Ry)});var Pc=u(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.getRecursionDetectionPlugin=yr.addRecursionDetectionMiddlewareOptions=yr.recursionDetectionMiddleware=void 0;var oD=tt(),aN="X-Amzn-Trace-Id",aD="AWS_LAMBDA_FUNCTION_NAME",cD="_X_AMZN_TRACE_ID",dD=n(t=>e=>async r=>{let{request:i}=r;if(!oD.HttpRequest.isInstance(i)||t.runtime!=="node"||i.headers.hasOwnProperty(aN))return e(r);let s=process.env[aD],o=process.env[cD],a=n(c=>typeof c=="string"&&c.length>0,"nonEmptyString");return a(s)&&a(o)&&(i.headers[aN]=o),e({...r,request:i})},"recursionDetectionMiddleware");yr.recursionDetectionMiddleware=dD;yr.addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var uD=n(t=>({applyToStack:e=>{e.add((0,yr.recursionDetectionMiddleware)(t),yr.addRecursionDetectionMiddlewareOptions)}}),"getRecursionDetectionPlugin");yr.getRecursionDetectionPlugin=uD});var pl=u(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.DEFAULT_RETRY_MODE=oi.DEFAULT_MAX_ATTEMPTS=oi.RETRY_MODES=void 0;var lD;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(lD=oi.RETRY_MODES||(oi.RETRY_MODES={}));oi.DEFAULT_MAX_ATTEMPTS=3;oi.DEFAULT_RETRY_MODE="STANDARD"});var cN=u(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.NODEJS_TIMEOUT_ERROR_CODES=kt.TRANSIENT_ERROR_STATUS_CODES=kt.TRANSIENT_ERROR_CODES=kt.THROTTLING_ERROR_CODES=kt.CLOCK_SKEW_ERROR_CODES=void 0;kt.CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"];kt.THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"];kt.TRANSIENT_ERROR_CODES=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"];kt.TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504];kt.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var Ic=u(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.isServerError=Nt.isTransientError=Nt.isThrottlingError=Nt.isClockSkewError=Nt.isRetryableByTrait=void 0;var Rc=cN(),pD=n(t=>t.$retryable!==void 0,"isRetryableByTrait");Nt.isRetryableByTrait=pD;var fD=n(t=>Rc.CLOCK_SKEW_ERROR_CODES.includes(t.name),"isClockSkewError");Nt.isClockSkewError=fD;var mD=n(t=>{var e,r;return((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)===429||Rc.THROTTLING_ERROR_CODES.includes(t.name)||((r=t.$retryable)===null||r===void 0?void 0:r.throttling)==!0},"isThrottlingError");Nt.isThrottlingError=mD;var hD=n(t=>{var e;return Rc.TRANSIENT_ERROR_CODES.includes(t.name)||Rc.NODEJS_TIMEOUT_ERROR_CODES.includes(t?.code||"")||Rc.TRANSIENT_ERROR_STATUS_CODES.includes(((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)||0)},"isTransientError");Nt.isTransientError=hD;var _D=n(t=>{var e;if(((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!(0,Nt.isTransientError)(t)}return!1},"isServerError");Nt.isServerError=_D});var Iy=u(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.DefaultRateLimiter=void 0;var yD=Ic(),fl=class{constructor(e){var r,i,s,o,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(r=e?.beta)!==null&&r!==void 0?r:.7,this.minCapacity=(i=e?.minCapacity)!==null&&i!==void 0?i:1,this.minFillRate=(s=e?.minFillRate)!==null&&s!==void 0?s:.5,this.scaleConstant=(o=e?.scaleConstant)!==null&&o!==void 0?o:.4,this.smooth=(a=e?.smooth)!==null&&a!==void 0?a:.8;let c=this.getCurrentTimeInSeconds();this.lastThrottleTime=c,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(i=>setTimeout(i,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),(0,yD.isThrottlingError)(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let i=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(i)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let i=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(i*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};n(fl,"DefaultRateLimiter");ml.DefaultRateLimiter=fl});var qc=u(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.REQUEST_HEADER=Te.INVOCATION_ID_HEADER=Te.NO_RETRY_INCREMENT=Te.TIMEOUT_RETRY_COST=Te.RETRY_COST=Te.INITIAL_RETRY_TOKENS=Te.THROTTLING_RETRY_DELAY_BASE=Te.MAXIMUM_RETRY_DELAY=Te.DEFAULT_RETRY_DELAY_BASE=void 0;Te.DEFAULT_RETRY_DELAY_BASE=100;Te.MAXIMUM_RETRY_DELAY=20*1e3;Te.THROTTLING_RETRY_DELAY_BASE=500;Te.INITIAL_RETRY_TOKENS=500;Te.RETRY_COST=5;Te.TIMEOUT_RETRY_COST=10;Te.NO_RETRY_INCREMENT=1;Te.INVOCATION_ID_HEADER="amz-sdk-invocation-id";Te.REQUEST_HEADER="amz-sdk-request"});var uN=u(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.getDefaultRetryBackoffStrategy=void 0;var dN=qc(),gD=n(()=>{let t=dN.DEFAULT_RETRY_DELAY_BASE;return{computeNextBackoffDelay:n(i=>Math.floor(Math.min(dN.MAXIMUM_RETRY_DELAY,Math.random()*2**i*t)),"computeNextBackoffDelay"),setDelayBase:n(i=>{t=i},"setDelayBase")}},"getDefaultRetryBackoffStrategy");hl.getDefaultRetryBackoffStrategy=gD});var lN=u(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.getDefaultRetryToken=void 0;var oo=qc(),wD=uN(),vD=n((t,e,r,i)=>{var s,o,a;let c=t,l=(s=i?.retryCost)!==null&&s!==void 0?s:oo.RETRY_COST,p=(o=i?.timeoutRetryCost)!==null&&o!==void 0?o:oo.TIMEOUT_RETRY_COST,f=(a=i?.retryBackoffStrategy)!==null&&a!==void 0?a:(0,wD.getDefaultRetryBackoffStrategy)(),m=t,h=Math.min(oo.MAXIMUM_RETRY_DELAY,e),_,w=r??0,g=n(Gt=>Gt==="TRANSIENT"?p:l,"getCapacityAmount"),S=n(()=>w,"getRetryCount"),ie=n(()=>h,"getRetryDelay"),Ie=n(()=>_,"getLastRetryCost"),Ne=n(Gt=>g(Gt)<=m,"hasRetryTokens");return{getRetryCount:S,getRetryDelay:ie,getLastRetryCost:Ie,hasRetryTokens:Ne,getRetryTokenCount:n(Gt=>{let T_=Gt.errorType;if(!Ne(T_))throw new Error("No retry token available");let O_=g(T_),WI=T_==="THROTTLING"?oo.THROTTLING_RETRY_DELAY_BASE:oo.DEFAULT_RETRY_DELAY_BASE;f.setDelayBase(WI);let Rv=f.computeNextBackoffDelay(w);if(Gt.retryAfterHint){let jI=Gt.retryAfterHint.getTime()-Date.now();h=Math.max(jI||0,Rv)}else h=Rv;return w++,_=O_,m-=O_,O_},"getRetryTokenCount"),releaseRetryTokens:n(Gt=>{m+=Gt??oo.NO_RETRY_INCREMENT,m=Math.min(m,c)},"releaseRetryTokens")}},"getDefaultRetryToken");_l.getDefaultRetryToken=vD});var Cy=u(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.StandardRetryStrategy=void 0;var qy=pl(),pN=qc(),ED=lN(),yl=class{constructor(e){this.maxAttemptsProvider=e,this.mode=qy.RETRY_MODES.STANDARD,this.retryToken=(0,ED.getDefaultRetryToken)(pN.INITIAL_RETRY_TOKENS,pN.DEFAULT_RETRY_DELAY_BASE),this.maxAttemptsProvider=e}async acquireInitialRetryToken(e){return this.retryToken}async refreshRetryTokenForRetry(e,r){let i=await this.getMaxAttempts();if(this.shouldRetry(e,r,i))return e.getRetryTokenCount(r),e;throw new Error("No retry token available")}recordSuccess(e){this.retryToken.releaseRetryTokens(e.getLastRetryCost())}async getMaxAttempts(){let e;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${qy.DEFAULT_MAX_ATTEMPTS}`),qy.DEFAULT_MAX_ATTEMPTS}}shouldRetry(e,r,i){return e.getRetryCount()<i&&e.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};n(yl,"StandardRetryStrategy");gl.StandardRetryStrategy=yl});var fN=u(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.AdaptiveRetryStrategy=void 0;var SD=pl(),ND=Iy(),bD=Cy(),wl=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=SD.RETRY_MODES.ADAPTIVE;let{rateLimiter:i}=r??{};this.rateLimiter=i??new ND.DefaultRateLimiter,this.standardRetryStrategy=new bD.StandardRetryStrategy(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};n(wl,"AdaptiveRetryStrategy");vl.AdaptiveRetryStrategy=wl});var hN=u(mN=>{"use strict";Object.defineProperty(mN,"__esModule",{value:!0})});var Mt=u(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var ao=(A(),b(x));ao.__exportStar(fN(),Ui);ao.__exportStar(Iy(),Ui);ao.__exportStar(Cy(),Ui);ao.__exportStar(pl(),Ui);ao.__exportStar(qc(),Ui);ao.__exportStar(hN(),Ui)});import xD from"crypto";function Cc(){return El>Sl.length-16&&(xD.randomFillSync(Sl),El=0),Sl.slice(El,El+=16)}var Sl,El,ky=$e(()=>{Sl=new Uint8Array(256),El=Sl.length;n(Cc,"rng")});var _N,yN=$e(()=>{_N=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function AD(t){return typeof t=="string"&&_N.test(t)}var Wi,kc=$e(()=>{yN();n(AD,"validate");Wi=AD});function TD(t,e=0){let r=(Ue[t[e+0]]+Ue[t[e+1]]+Ue[t[e+2]]+Ue[t[e+3]]+"-"+Ue[t[e+4]]+Ue[t[e+5]]+"-"+Ue[t[e+6]]+Ue[t[e+7]]+"-"+Ue[t[e+8]]+Ue[t[e+9]]+"-"+Ue[t[e+10]]+Ue[t[e+11]]+Ue[t[e+12]]+Ue[t[e+13]]+Ue[t[e+14]]+Ue[t[e+15]]).toLowerCase();if(!Wi(r))throw TypeError("Stringified UUID is invalid");return r}var Ue,ji,Mc=$e(()=>{kc();Ue=[];for(let t=0;t<256;++t)Ue.push((t+256).toString(16).substr(1));n(TD,"stringify");ji=TD});function OD(t,e,r){let i=e&&r||0,s=e||new Array(16);t=t||{};let o=t.node||gN,a=t.clockseq!==void 0?t.clockseq:My;if(o==null||a==null){let h=t.random||(t.rng||Cc)();o==null&&(o=gN=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),a==null&&(a=My=(h[6]<<8|h[7])&16383)}let c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:Fy+1,p=c-Dy+(l-Fy)/1e4;if(p<0&&t.clockseq===void 0&&(a=a+1&16383),(p<0||c>Dy)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dy=c,Fy=l,My=a,c+=122192928e5;let f=((c&268435455)*1e4+l)%4294967296;s[i++]=f>>>24&255,s[i++]=f>>>16&255,s[i++]=f>>>8&255,s[i++]=f&255;let m=c/4294967296*1e4&268435455;s[i++]=m>>>8&255,s[i++]=m&255,s[i++]=m>>>24&15|16,s[i++]=m>>>16&255,s[i++]=a>>>8|128,s[i++]=a&255;for(let h=0;h<6;++h)s[i+h]=o[h];return e||ji(s)}var gN,My,Dy,Fy,wN,vN=$e(()=>{ky();Mc();Dy=0,Fy=0;n(OD,"v1");wN=OD});function PD(t){if(!Wi(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Nl,Ly=$e(()=>{kc();n(PD,"parse");Nl=PD});function RD(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function Dc(t,e,r){function i(s,o,a,c){if(typeof s=="string"&&(s=RD(s)),typeof o=="string"&&(o=Nl(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+s.length);if(l.set(o),l.set(s,o.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,a){c=c||0;for(let p=0;p<16;++p)a[c+p]=l[p];return a}return ji(l)}n(i,"generateUUID");try{i.name=t}catch{}return i.DNS=ID,i.URL=qD,i}var ID,qD,zy=$e(()=>{Mc();Ly();n(RD,"stringToBytes");ID="6ba7b810-9dad-11d1-80b4-00c04fd430c8",qD="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n(Dc,"default")});import CD from"crypto";function kD(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),CD.createHash("md5").update(t).digest()}var EN,SN=$e(()=>{n(kD,"md5");EN=kD});var MD,NN,bN=$e(()=>{zy();SN();MD=Dc("v3",48,EN),NN=MD});function DD(t,e,r){t=t||{};let i=t.random||(t.rng||Cc)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=i[s];return e}return ji(i)}var xN,AN=$e(()=>{ky();Mc();n(DD,"v4");xN=DD});import FD from"crypto";function LD(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),FD.createHash("sha1").update(t).digest()}var TN,ON=$e(()=>{n(LD,"sha1");TN=LD});var zD,PN,RN=$e(()=>{zy();ON();zD=Dc("v5",80,TN),PN=zD});var IN,qN=$e(()=>{IN="00000000-0000-0000-0000-000000000000"});function UD(t){if(!Wi(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var CN,kN=$e(()=>{kc();n(UD,"version");CN=UD});var Uy={};Iv(Uy,{NIL:()=>IN,parse:()=>Nl,stringify:()=>ji,v1:()=>wN,v3:()=>NN,v4:()=>xN,v5:()=>PN,validate:()=>Wi,version:()=>CN});var Wy=$e(()=>{vN();bN();AN();RN();qN();kN();kc();Mc();Ly()});var MN=u(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.getDefaultRetryQuota=void 0;var jy=Mt(),WD=n((t,e)=>{var r,i,s;let o=t,a=(r=e?.noRetryIncrement)!==null&&r!==void 0?r:jy.NO_RETRY_INCREMENT,c=(i=e?.retryCost)!==null&&i!==void 0?i:jy.RETRY_COST,l=(s=e?.timeoutRetryCost)!==null&&s!==void 0?s:jy.TIMEOUT_RETRY_COST,p=t,f=n(w=>w.name==="TimeoutError"?l:c,"getCapacityAmount"),m=n(w=>f(w)<=p,"hasRetryTokens");return Object.freeze({hasRetryTokens:m,retrieveRetryTokens:n(w=>{if(!m(w))throw new Error("No retry token available");let g=f(w);return p-=g,g},"retrieveRetryTokens"),releaseRetryTokens:n(w=>{p+=w??a,p=Math.min(p,o)},"releaseRetryTokens")})},"getDefaultRetryQuota");bl.getDefaultRetryQuota=WD});var Vy=u(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.defaultDelayDecider=void 0;var jD=Mt(),VD=n((t,e)=>Math.floor(Math.min(jD.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),"defaultDelayDecider");xl.defaultDelayDecider=VD});var $y=u(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.defaultRetryDecider=void 0;var Al=Ic(),$D=n(t=>t?(0,Al.isRetryableByTrait)(t)||(0,Al.isClockSkewError)(t)||(0,Al.isThrottlingError)(t)||(0,Al.isTransientError)(t):!1,"defaultRetryDecider");Tl.defaultRetryDecider=$D});var Hy=u(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.asSdkError=void 0;var HD=n(t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),"asSdkError");Ol.asSdkError=HD});var By=u(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.StandardRetryStrategy=void 0;var Gy=tt(),GD=Ic(),$n=Mt(),BD=(Wy(),b(Uy)),JD=MN(),KD=Vy(),YD=$y(),QD=Hy(),Pl=class{constructor(e,r){var i,s,o;this.maxAttemptsProvider=e,this.mode=$n.RETRY_MODES.STANDARD,this.retryDecider=(i=r?.retryDecider)!==null&&i!==void 0?i:YD.defaultRetryDecider,this.delayDecider=(s=r?.delayDecider)!==null&&s!==void 0?s:KD.defaultDelayDecider,this.retryQuota=(o=r?.retryQuota)!==null&&o!==void 0?o:(0,JD.getDefaultRetryQuota)($n.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,i){return r<i&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=$n.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,i){let s,o=0,a=0,c=await this.getMaxAttempts(),{request:l}=r;for(Gy.HttpRequest.isInstance(l)&&(l.headers[$n.INVOCATION_ID_HEADER]=(0,BD.v4)());;)try{Gy.HttpRequest.isInstance(l)&&(l.headers[$n.REQUEST_HEADER]=`attempt=${o+1}; max=${c}`),i?.beforeRequest&&await i.beforeRequest();let{response:p,output:f}=await e(r);return i?.afterRequest&&i.afterRequest(p),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=o+1,f.$metadata.totalRetryDelay=a,{response:p,output:f}}catch(p){let f=(0,QD.asSdkError)(p);if(o++,this.shouldRetry(f,o,c)){s=this.retryQuota.retrieveRetryTokens(f);let m=this.delayDecider((0,GD.isThrottlingError)(f)?$n.THROTTLING_RETRY_DELAY_BASE:$n.DEFAULT_RETRY_DELAY_BASE,o),h=XD(f.$response),_=Math.max(h||0,m);a+=_,await new Promise(w=>setTimeout(w,_));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=o,f.$metadata.totalRetryDelay=a,f}}};n(Pl,"StandardRetryStrategy");Rl.StandardRetryStrategy=Pl;var XD=n(t=>{if(!Gy.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],i=Number(r);return Number.isNaN(i)?new Date(r).getTime()-Date.now():i*1e3},"getDelayFromRetryAfterHeader")});var FN=u(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.AdaptiveRetryStrategy=void 0;var DN=Mt(),ZD=By(),Il=class extends ZD.StandardRetryStrategy{constructor(e,r){let{rateLimiter:i,...s}=r??{};super(e,s),this.rateLimiter=i??new DN.DefaultRateLimiter,this.mode=DN.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:i=>{this.rateLimiter.updateClientSendingRate(i)}})}};n(Il,"AdaptiveRetryStrategy");ql.AdaptiveRetryStrategy=Il});var zN=u(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.NODE_RETRY_MODE_CONFIG_OPTIONS=ge.CONFIG_RETRY_MODE=ge.ENV_RETRY_MODE=ge.resolveRetryConfig=ge.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=ge.CONFIG_MAX_ATTEMPTS=ge.ENV_MAX_ATTEMPTS=void 0;var LN=Fn(),co=Mt();ge.ENV_MAX_ATTEMPTS="AWS_MAX_ATTEMPTS";ge.CONFIG_MAX_ATTEMPTS="max_attempts";ge.NODE_MAX_ATTEMPT_CONFIG_OPTIONS={environmentVariableSelector:t=>{let e=t[ge.ENV_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${ge.ENV_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[ge.CONFIG_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${ge.CONFIG_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},default:co.DEFAULT_MAX_ATTEMPTS};var eF=n(t=>{var e;let{retryStrategy:r}=t,i=(0,LN.normalizeProvider)((e=t.maxAttempts)!==null&&e!==void 0?e:co.DEFAULT_MAX_ATTEMPTS);return{...t,maxAttempts:i,retryStrategy:async()=>r||(await(0,LN.normalizeProvider)(t.retryMode)()===co.RETRY_MODES.ADAPTIVE?new co.AdaptiveRetryStrategy(i):new co.StandardRetryStrategy(i))}},"resolveRetryConfig");ge.resolveRetryConfig=eF;ge.ENV_RETRY_MODE="AWS_RETRY_MODE";ge.CONFIG_RETRY_MODE="retry_mode";ge.NODE_RETRY_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[ge.ENV_RETRY_MODE],configFileSelector:t=>t[ge.CONFIG_RETRY_MODE],default:co.DEFAULT_RETRY_MODE}});var WN=u(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.getOmitRetryHeadersPlugin=gr.omitRetryHeadersMiddlewareOptions=gr.omitRetryHeadersMiddleware=void 0;var tF=tt(),UN=Mt(),rF=n(()=>t=>async e=>{let{request:r}=e;return tF.HttpRequest.isInstance(r)&&(delete r.headers[UN.INVOCATION_ID_HEADER],delete r.headers[UN.REQUEST_HEADER]),t(e)},"omitRetryHeadersMiddleware");gr.omitRetryHeadersMiddleware=rF;gr.omitRetryHeadersMiddlewareOptions={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0};var iF=n(t=>({applyToStack:e=>{e.addRelativeTo((0,gr.omitRetryHeadersMiddleware)(),gr.omitRetryHeadersMiddlewareOptions)}}),"getOmitRetryHeadersPlugin");gr.getOmitRetryHeadersPlugin=iF});var VN=u(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.getRetryAfterHint=bt.getRetryPlugin=bt.retryMiddlewareOptions=bt.retryMiddleware=void 0;var Ky=tt(),Jy=Ic(),jN=Mt(),nF=(Wy(),b(Uy)),sF=Hy(),oF=n(t=>(e,r)=>async i=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(aF(s)){s=s;let a=await s.acquireInitialRetryToken(r.partition_id),c=new Error,l=0,p=0,{request:f}=i;for(Ky.HttpRequest.isInstance(f)&&(f.headers[jN.INVOCATION_ID_HEADER]=(0,nF.v4)());;)try{Ky.HttpRequest.isInstance(f)&&(f.headers[jN.REQUEST_HEADER]=`attempt=${l+1}; max=${o}`);let{response:m,output:h}=await e(i);return s.recordSuccess(a),h.$metadata.attempts=l+1,h.$metadata.totalRetryDelay=p,{response:m,output:h}}catch(m){let h=cF(m);c=(0,sF.asSdkError)(m);try{a=await s.refreshRetryTokenForRetry(a,h)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=l+1,c.$metadata.totalRetryDelay=p,c}l=a.getRetryCount();let _=a.getRetryDelay();p+=_,await new Promise(w=>setTimeout(w,_))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,i)},"retryMiddleware");bt.retryMiddleware=oF;var aF=n(t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u","isRetryStrategyV2"),cF=n(t=>{let e={errorType:dF(t)},r=(0,bt.getRetryAfterHint)(t.$response);return r&&(e.retryAfterHint=r),e},"getRetyErrorInto"),dF=n(t=>(0,Jy.isThrottlingError)(t)?"THROTTLING":(0,Jy.isTransientError)(t)?"TRANSIENT":(0,Jy.isServerError)(t)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType");bt.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};var uF=n(t=>({applyToStack:e=>{e.add((0,bt.retryMiddleware)(t),bt.retryMiddlewareOptions)}}),"getRetryPlugin");bt.getRetryPlugin=uF;var lF=n(t=>{if(!Ky.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],i=Number(r);return Number.isNaN(i)?new Date(r):new Date(i*1e3)},"getRetryAfterHint");bt.getRetryAfterHint=lF});var ci=u(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var Hn=(A(),b(x));Hn.__exportStar(FN(),ai);Hn.__exportStar(By(),ai);Hn.__exportStar(zN(),ai);Hn.__exportStar(Vy(),ai);Hn.__exportStar(WN(),ai);Hn.__exportStar($y(),ai);Hn.__exportStar(VN(),ai)});var Fc=u(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.ProviderError=void 0;var uo=class extends Error{constructor(e,r=!0){super(e),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,uo.prototype)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};n(uo,"ProviderError");Cl.ProviderError=uo});var $N=u(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.CredentialsProviderError=void 0;var pF=Fc(),lo=class extends pF.ProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,lo.prototype)}};n(lo,"CredentialsProviderError");kl.CredentialsProviderError=lo});var HN=u(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.TokenProviderError=void 0;var fF=Fc(),po=class extends fF.ProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,po.prototype)}};n(po,"TokenProviderError");Ml.TokenProviderError=po});var GN=u(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.chain=void 0;var mF=Fc();function hF(...t){return()=>{let e=Promise.reject(new mF.ProviderError("No providers in chain"));for(let r of t)e=e.catch(i=>{if(i?.tryNextLink)return r();throw i});return e}}n(hF,"chain");Dl.chain=hF});var BN=u(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.fromStatic=void 0;var _F=n(t=>()=>Promise.resolve(t),"fromStatic");Fl.fromStatic=_F});var JN=u(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.memoize=void 0;var yF=n((t,e,r)=>{let i,s,o,a=!1,c=n(async()=>{s||(s=t());try{i=await s,o=!0,a=!1}finally{s=void 0}return i},"coalesceProvider");return e===void 0?async l=>((!o||l?.forceRefresh)&&(i=await c()),i):async l=>((!o||l?.forceRefresh)&&(i=await c()),a?i:r&&!r(i)?(a=!0,i):(e(i)&&await c(),i))},"memoize");Ll.memoize=yF});var ee=u(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});var fo=(A(),b(x));fo.__exportStar($N(),Vi);fo.__exportStar(Fc(),Vi);fo.__exportStar(HN(),Vi);fo.__exportStar(GN(),Vi);fo.__exportStar(BN(),Vi);fo.__exportStar(JN(),Vi)});var zl=u(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.toHex=mo.fromHex=void 0;var KN={},Yy={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),KN[t]=e,Yy[e]=t}function gF(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let i=t.slice(r,r+2).toLowerCase();if(i in Yy)e[r/2]=Yy[i];else throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return e}n(gF,"fromHex");mo.fromHex=gF;function wF(t){let e="";for(let r=0;r<t.byteLength;r++)e+=KN[t[r]];return e}n(wF,"toHex");mo.toHex=wF});var Qy=u(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.isArrayBuffer=void 0;var vF=n(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer");Ul.isArrayBuffer=vF});var _o=u(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.fromString=ho.fromArrayBuffer=void 0;var EF=Qy(),Xy=U("buffer"),SF=n((t,e=0,r=t.byteLength-e)=>{if(!(0,EF.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Xy.Buffer.from(t,e,r)},"fromArrayBuffer");ho.fromArrayBuffer=SF;var NF=n((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Xy.Buffer.from(t,e):Xy.Buffer.from(t)},"fromString");ho.fromString=NF});var Zy=u(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.fromUtf8=void 0;var bF=_o(),xF=n(t=>{let e=(0,bF.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8");Wl.fromUtf8=xF});var YN=u(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.toUint8Array=void 0;var AF=Zy(),TF=n(t=>typeof t=="string"?(0,AF.fromUtf8)(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array");jl.toUint8Array=TF});var QN=u(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.toUtf8=void 0;var OF=_o(),PF=n(t=>(0,OF.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8"),"toUtf8");Vl.toUtf8=PF});var di=u(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var eg=(A(),b(x));eg.__exportStar(Zy(),Lc);eg.__exportStar(YN(),Lc);eg.__exportStar(QN(),Lc)});var Gn=u(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.MAX_PRESIGNED_TTL=O.KEY_TYPE_IDENTIFIER=O.MAX_CACHE_SIZE=O.UNSIGNED_PAYLOAD=O.EVENT_ALGORITHM_IDENTIFIER=O.ALGORITHM_IDENTIFIER_V4A=O.ALGORITHM_IDENTIFIER=O.UNSIGNABLE_PATTERNS=O.SEC_HEADER_PATTERN=O.PROXY_HEADER_PATTERN=O.ALWAYS_UNSIGNABLE_HEADERS=O.HOST_HEADER=O.TOKEN_HEADER=O.SHA256_HEADER=O.SIGNATURE_HEADER=O.GENERATED_HEADERS=O.DATE_HEADER=O.AMZ_DATE_HEADER=O.AUTH_HEADER=O.REGION_SET_PARAM=O.TOKEN_QUERY_PARAM=O.SIGNATURE_QUERY_PARAM=O.EXPIRES_QUERY_PARAM=O.SIGNED_HEADERS_QUERY_PARAM=O.AMZ_DATE_QUERY_PARAM=O.CREDENTIAL_QUERY_PARAM=O.ALGORITHM_QUERY_PARAM=void 0;O.ALGORITHM_QUERY_PARAM="X-Amz-Algorithm";O.CREDENTIAL_QUERY_PARAM="X-Amz-Credential";O.AMZ_DATE_QUERY_PARAM="X-Amz-Date";O.SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders";O.EXPIRES_QUERY_PARAM="X-Amz-Expires";O.SIGNATURE_QUERY_PARAM="X-Amz-Signature";O.TOKEN_QUERY_PARAM="X-Amz-Security-Token";O.REGION_SET_PARAM="X-Amz-Region-Set";O.AUTH_HEADER="authorization";O.AMZ_DATE_HEADER=O.AMZ_DATE_QUERY_PARAM.toLowerCase();O.DATE_HEADER="date";O.GENERATED_HEADERS=[O.AUTH_HEADER,O.AMZ_DATE_HEADER,O.DATE_HEADER];O.SIGNATURE_HEADER=O.SIGNATURE_QUERY_PARAM.toLowerCase();O.SHA256_HEADER="x-amz-content-sha256";O.TOKEN_HEADER=O.TOKEN_QUERY_PARAM.toLowerCase();O.HOST_HEADER="host";O.ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0};O.PROXY_HEADER_PATTERN=/^proxy-/;O.SEC_HEADER_PATTERN=/^sec-/;O.UNSIGNABLE_PATTERNS=[/^proxy-/i,/^sec-/i];O.ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256";O.ALGORITHM_IDENTIFIER_V4A="AWS4-ECDSA-P256-SHA256";O.EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD";O.UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD";O.MAX_CACHE_SIZE=50;O.KEY_TYPE_IDENTIFIER="aws4_request";O.MAX_PRESIGNED_TTL=60*60*24*7});var rg=u($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.clearCredentialCache=$i.getSigningKey=$i.createScope=void 0;var RF=zl(),IF=di(),tg=Gn(),yo={},$l=[],qF=n((t,e,r)=>`${t}/${e}/${r}/${tg.KEY_TYPE_IDENTIFIER}`,"createScope");$i.createScope=qF;var CF=n(async(t,e,r,i,s)=>{let o=await XN(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${i}:${s}:${(0,RF.toHex)(o)}:${e.sessionToken}`;if(a in yo)return yo[a];for($l.push(a);$l.length>tg.MAX_CACHE_SIZE;)delete yo[$l.shift()];let c=`AWS4${e.secretAccessKey}`;for(let l of[r,i,s,tg.KEY_TYPE_IDENTIFIER])c=await XN(t,c,l);return yo[a]=c},"getSigningKey");$i.getSigningKey=CF;var kF=n(()=>{$l.length=0,Object.keys(yo).forEach(t=>{delete yo[t]})},"clearCredentialCache");$i.clearCredentialCache=kF;var XN=n((t,e,r)=>{let i=new t(e);return i.update((0,IF.toUint8Array)(r)),i.digest()},"hmac")});var ng=u(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.getCanonicalHeaders=void 0;var ig=Gn(),MF=n(({headers:t},e,r)=>{let i={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in ig.ALWAYS_UNSIGNABLE_HEADERS||e?.has(o)||ig.PROXY_HEADER_PATTERN.test(o)||ig.SEC_HEADER_PATTERN.test(o))&&(!r||r&&!r.has(o))||(i[o]=t[s].trim().replace(/\s+/g," "))}return i},"getCanonicalHeaders");Hl.getCanonicalHeaders=MF});var sg=u(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.escapeUri=void 0;var DF=n(t=>encodeURIComponent(t).replace(/[!'()*]/g,FF),"escapeUri");Gl.escapeUri=DF;var FF=n(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode")});var ZN=u(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.escapeUriPath=void 0;var LF=sg(),zF=n(t=>t.split("/").map(LF.escapeUri).join("/"),"escapeUriPath");Bl.escapeUriPath=zF});var og=u(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var eb=(A(),b(x));eb.__exportStar(sg(),Jl);eb.__exportStar(ZN(),Jl)});var ag=u(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.getCanonicalQuery=void 0;var Kl=og(),UF=Gn(),WF=n(({query:t={}})=>{let e=[],r={};for(let i of Object.keys(t).sort()){if(i.toLowerCase()===UF.SIGNATURE_HEADER)continue;e.push(i);let s=t[i];typeof s=="string"?r[i]=`${(0,Kl.escapeUri)(i)}=${(0,Kl.escapeUri)(s)}`:Array.isArray(s)&&(r[i]=s.slice(0).sort().reduce((o,a)=>o.concat([`${(0,Kl.escapeUri)(i)}=${(0,Kl.escapeUri)(a)}`]),[]).join("&"))}return e.map(i=>r[i]).filter(i=>i).join("&")},"getCanonicalQuery");Yl.getCanonicalQuery=WF});var cg=u(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.getPayloadHash=void 0;var jF=Qy(),VF=zl(),$F=di(),tb=Gn(),HF=n(async({headers:t,body:e},r)=>{for(let i of Object.keys(t))if(i.toLowerCase()===tb.SHA256_HEADER)return t[i];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||(0,jF.isArrayBuffer)(e)){let i=new r;return i.update((0,$F.toUint8Array)(e)),(0,VF.toHex)(await i.digest())}return tb.UNSIGNED_PAYLOAD},"getPayloadHash");Ql.getPayloadHash=HF});var rb=u(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.deleteHeader=Hi.getHeaderValue=Hi.hasHeader=void 0;var GF=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},"hasHeader");Hi.hasHeader=GF;var BF=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return e[r]},"getHeaderValue");Hi.getHeaderValue=BF;var JF=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))t===r.toLowerCase()&&delete e[r]},"deleteHeader");Hi.deleteHeader=JF});var dg=u(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.cloneQuery=Bn.cloneRequest=void 0;var KF=n(({headers:t,query:e,...r})=>({...r,headers:{...t},query:e?(0,Bn.cloneQuery)(e):void 0}),"cloneRequest");Bn.cloneRequest=KF;var YF=n(t=>Object.keys(t).reduce((e,r)=>{let i=t[r];return{...e,[r]:Array.isArray(i)?[...i]:i}},{}),"cloneQuery");Bn.cloneQuery=YF});var ug=u(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.moveHeadersToQuery=void 0;var QF=dg(),XF=n((t,e={})=>{var r;let{headers:i,query:s={}}=typeof t.clone=="function"?t.clone():(0,QF.cloneRequest)(t);for(let o of Object.keys(i)){let a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!(!((r=e.unhoistableHeaders)===null||r===void 0)&&r.has(a))&&(s[o]=i[o],delete i[o])}return{...t,headers:i,query:s}},"moveHeadersToQuery");Xl.moveHeadersToQuery=XF});var lg=u(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.prepareRequest=void 0;var ZF=dg(),eL=Gn(),tL=n(t=>{t=typeof t.clone=="function"?t.clone():(0,ZF.cloneRequest)(t);for(let e of Object.keys(t.headers))eL.GENERATED_HEADERS.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},"prepareRequest");Zl.prepareRequest=tL});var ib=u(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.toDate=Jn.iso8601=void 0;var rL=n(t=>(0,Jn.toDate)(t).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601");Jn.iso8601=rL;var iL=n(t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,"toDate");Jn.toDate=iL});var cb=u(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.SignatureV4=void 0;var ep=zl(),nb=Fn(),pg=di(),We=Gn(),tp=rg(),sb=ng(),nL=ag(),fg=cg(),sL=rb(),oL=ug(),ob=lg(),aL=ib(),ip=class{constructor({applyChecksum:e,credentials:r,region:i,service:s,sha256:o,uriEscapePath:a=!0}){this.service=s,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,nb.normalizeProvider)(i),this.credentialProvider=(0,nb.normalizeProvider)(r)}async presign(e,r={}){let{signingDate:i=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,signingRegion:l,signingService:p}=r,f=await this.credentialProvider();this.validateResolvedCredentials(f);let m=l??await this.regionProvider(),{longDate:h,shortDate:_}=rp(i);if(s>We.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=(0,tp.createScope)(_,m,p??this.service),g=(0,oL.moveHeadersToQuery)((0,ob.prepareRequest)(e),{unhoistableHeaders:a});f.sessionToken&&(g.query[We.TOKEN_QUERY_PARAM]=f.sessionToken),g.query[We.ALGORITHM_QUERY_PARAM]=We.ALGORITHM_IDENTIFIER,g.query[We.CREDENTIAL_QUERY_PARAM]=`${f.accessKeyId}/${w}`,g.query[We.AMZ_DATE_QUERY_PARAM]=h,g.query[We.EXPIRES_QUERY_PARAM]=s.toString(10);let S=(0,sb.getCanonicalHeaders)(g,o,c);return g.query[We.SIGNED_HEADERS_QUERY_PARAM]=ab(S),g.query[We.SIGNATURE_QUERY_PARAM]=await this.getSignature(h,w,this.getSigningKey(f,m,_,p),this.createCanonicalRequest(g,S,await(0,fg.getPayloadHash)(e,this.sha256))),g}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:i=new Date,priorSignature:s,signingRegion:o,signingService:a}){let c=o??await this.regionProvider(),{shortDate:l,longDate:p}=rp(i),f=(0,tp.createScope)(l,c,a??this.service),m=await(0,fg.getPayloadHash)({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let _=(0,ep.toHex)(await h.digest()),w=[We.EVENT_ALGORITHM_IDENTIFIER,p,f,s,_,m].join(`
`);return this.signString(w,{signingDate:i,signingRegion:c,signingService:a})}async signString(e,{signingDate:r=new Date,signingRegion:i,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=i??await this.regionProvider(),{shortDate:c}=rp(r),l=new this.sha256(await this.getSigningKey(o,a,c,s));return l.update((0,pg.toUint8Array)(e)),(0,ep.toHex)(await l.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:i,unsignableHeaders:s,signingRegion:o,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let l=o??await this.regionProvider(),p=(0,ob.prepareRequest)(e),{longDate:f,shortDate:m}=rp(r),h=(0,tp.createScope)(m,l,a??this.service);p.headers[We.AMZ_DATE_HEADER]=f,c.sessionToken&&(p.headers[We.TOKEN_HEADER]=c.sessionToken);let _=await(0,fg.getPayloadHash)(p,this.sha256);!(0,sL.hasHeader)(We.SHA256_HEADER,p.headers)&&this.applyChecksum&&(p.headers[We.SHA256_HEADER]=_);let w=(0,sb.getCanonicalHeaders)(p,s,i),g=await this.getSignature(f,h,this.getSigningKey(c,l,m,a),this.createCanonicalRequest(p,w,_));return p.headers[We.AUTH_HEADER]=`${We.ALGORITHM_IDENTIFIER} Credential=${c.accessKeyId}/${h}, SignedHeaders=${ab(w)}, Signature=${g}`,p}createCanonicalRequest(e,r,i){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${(0,nL.getCanonicalQuery)(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${i}`}async createStringToSign(e,r,i){let s=new this.sha256;s.update((0,pg.toUint8Array)(i));let o=await s.digest();return`${We.ALGORITHM_IDENTIFIER}
${e}
${r}
${(0,ep.toHex)(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let i=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return encodeURIComponent(i).replace(/%2F/g,"/")}return e}async getSignature(e,r,i,s){let o=await this.createStringToSign(e,r,s),a=new this.sha256(await i);return a.update((0,pg.toUint8Array)(o)),(0,ep.toHex)(await a.digest())}getSigningKey(e,r,i,s){return(0,tp.getSigningKey)(this.sha256,e,i,r,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};n(ip,"SignatureV4");np.SignatureV4=ip;var rp=n(t=>{let e=(0,aL.iso8601)(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},"formatDate"),ab=n(t=>Object.keys(t).sort().join(";"),"getCanonicalHeaderList")});var ub=u(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.prepareRequest=lt.moveHeadersToQuery=lt.getPayloadHash=lt.getCanonicalQuery=lt.getCanonicalHeaders=void 0;var db=(A(),b(x));db.__exportStar(cb(),lt);var cL=ng();Object.defineProperty(lt,"getCanonicalHeaders",{enumerable:!0,get:function(){return cL.getCanonicalHeaders}});var dL=ag();Object.defineProperty(lt,"getCanonicalQuery",{enumerable:!0,get:function(){return dL.getCanonicalQuery}});var uL=cg();Object.defineProperty(lt,"getPayloadHash",{enumerable:!0,get:function(){return uL.getPayloadHash}});var lL=ug();Object.defineProperty(lt,"moveHeadersToQuery",{enumerable:!0,get:function(){return lL.moveHeadersToQuery}});var pL=lg();Object.defineProperty(lt,"prepareRequest",{enumerable:!0,get:function(){return pL.prepareRequest}});db.__exportStar(rg(),lt)});var pb=u(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.resolveSigV4AuthConfig=wo.resolveAwsAuthConfig=void 0;var fL=ee(),mg=ub(),go=Fn(),mL=3e5,hL=n(t=>{let e=t.credentials?lb(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=(0,go.normalizeProvider)(t.signer):t.regionInfoProvider?o=n(()=>(0,go.normalizeProvider)(t.region)().then(async a=>[await t.regionInfoProvider(a,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},a]).then(([a,c])=>{let{signingRegion:l,signingService:p}=a;t.signingRegion=t.signingRegion||l||c,t.signingName=t.signingName||p||t.serviceId;let f={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},m=t.signerConstructor||mg.SignatureV4;return new m(f)}),"signer"):o=n(async a=>{a=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await(0,go.normalizeProvider)(t.region)(),properties:{}},a);let c=a.signingRegion,l=a.signingName;t.signingRegion=t.signingRegion||c,t.signingName=t.signingName||l||t.serviceId;let p={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},f=t.signerConstructor||mg.SignatureV4;return new f(p)},"signer"),{...t,systemClockOffset:i,signingEscapePath:r,credentials:e,signer:o}},"resolveAwsAuthConfig");wo.resolveAwsAuthConfig=hL;var _L=n(t=>{let e=t.credentials?lb(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=(0,go.normalizeProvider)(t.signer):o=(0,go.normalizeProvider)(new mg.SignatureV4({credentials:e,region:t.region,service:t.signingName,sha256:s,uriEscapePath:r})),{...t,systemClockOffset:i,signingEscapePath:r,credentials:e,signer:o}},"resolveSigV4AuthConfig");wo.resolveSigV4AuthConfig=_L;var lb=n(t=>typeof t=="function"?(0,fL.memoize)(t,e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<mL,e=>e.expiration!==void 0):(0,go.normalizeProvider)(t),"normalizeCredentialProvider")});var hg=u(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.getSkewCorrectedDate=void 0;var yL=n(t=>new Date(Date.now()+t),"getSkewCorrectedDate");sp.getSkewCorrectedDate=yL});var fb=u(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.isClockSkewed=void 0;var gL=hg(),wL=n((t,e)=>Math.abs((0,gL.getSkewCorrectedDate)(e).getTime()-t)>=3e5,"isClockSkewed");op.isClockSkewed=wL});var mb=u(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.getUpdatedSystemClockOffset=void 0;var vL=fb(),EL=n((t,e)=>{let r=Date.parse(t);return(0,vL.isClockSkewed)(r,e)?r-Date.now():e},"getUpdatedSystemClockOffset");ap.getUpdatedSystemClockOffset=EL});var gb=u(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.getSigV4AuthPlugin=xt.getAwsAuthPlugin=xt.awsAuthMiddlewareOptions=xt.awsAuthMiddleware=void 0;var yb=tt(),SL=hg(),hb=mb(),NL=n(t=>(e,r)=>async function(i){var s,o,a,c;if(!yb.HttpRequest.isInstance(i.request))return e(i);let l=(a=(o=(s=r.endpointV2)===null||s===void 0?void 0:s.properties)===null||o===void 0?void 0:o.authSchemes)===null||a===void 0?void 0:a[0],p=l?.name==="sigv4a"?(c=l?.signingRegionSet)===null||c===void 0?void 0:c.join(","):void 0,f=await t.signer(l),m=await e({...i,request:await f.sign(i.request,{signingDate:(0,SL.getSkewCorrectedDate)(t.systemClockOffset),signingRegion:p||r.signing_region,signingService:r.signing_service})}).catch(_=>{var w;let g=(w=_.ServerTime)!==null&&w!==void 0?w:_b(_.$response);throw g&&(t.systemClockOffset=(0,hb.getUpdatedSystemClockOffset)(g,t.systemClockOffset)),_}),h=_b(m.response);return h&&(t.systemClockOffset=(0,hb.getUpdatedSystemClockOffset)(h,t.systemClockOffset)),m},"awsAuthMiddleware");xt.awsAuthMiddleware=NL;var _b=n(t=>{var e,r,i;return yb.HttpResponse.isInstance(t)?(r=(e=t.headers)===null||e===void 0?void 0:e.date)!==null&&r!==void 0?r:(i=t.headers)===null||i===void 0?void 0:i.Date:void 0},"getDateHeader");xt.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};var bL=n(t=>({applyToStack:e=>{e.addRelativeTo((0,xt.awsAuthMiddleware)(t),xt.awsAuthMiddlewareOptions)}}),"getAwsAuthPlugin");xt.getAwsAuthPlugin=bL;xt.getSigV4AuthPlugin=xt.getAwsAuthPlugin});var ui=u(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});var wb=(A(),b(x));wb.__exportStar(pb(),cp);wb.__exportStar(gb(),cp)});var vb=u(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.resolveUserAgentConfig=void 0;function xL(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}n(xL,"resolveUserAgentConfig");dp.resolveUserAgentConfig=xL});var Eb=u(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.UA_ESCAPE_REGEX=wr.SPACE=wr.X_AMZ_USER_AGENT=wr.USER_AGENT=void 0;wr.USER_AGENT="user-agent";wr.X_AMZ_USER_AGENT="x-amz-user-agent";wr.SPACE=" ";wr.UA_ESCAPE_REGEX=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g});var Sb=u(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.getUserAgentPlugin=vr.getUserAgentMiddlewareOptions=vr.userAgentMiddleware=void 0;var AL=tt(),Gi=Eb(),TL=n(t=>(e,r)=>async i=>{var s,o;let{request:a}=i;if(!AL.HttpRequest.isInstance(a))return e(i);let{headers:c}=a,l=((s=r?.userAgent)===null||s===void 0?void 0:s.map(_g))||[],p=(await t.defaultUserAgentProvider()).map(_g),f=((o=t?.customUserAgent)===null||o===void 0?void 0:o.map(_g))||[],m=[...p,...l,...f].join(Gi.SPACE),h=[...p.filter(_=>_.startsWith("aws-sdk-")),...f].join(Gi.SPACE);return t.runtime!=="browser"?(h&&(c[Gi.X_AMZ_USER_AGENT]=c[Gi.X_AMZ_USER_AGENT]?`${c[Gi.USER_AGENT]} ${h}`:h),c[Gi.USER_AGENT]=m):c[Gi.X_AMZ_USER_AGENT]=m,e({...i,request:a})},"userAgentMiddleware");vr.userAgentMiddleware=TL;var _g=n(([t,e])=>{let r=t.indexOf("/"),i=t.substring(0,r),s=t.substring(r+1);return i==="api"&&(s=s.toLowerCase()),[i,s,e].filter(o=>o&&o.length>0).map(o=>o?.replace(Gi.UA_ESCAPE_REGEX,"_")).join("/")},"escapeUserAgent");vr.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var OL=n(t=>({applyToStack:e=>{e.add((0,vr.userAgentMiddleware)(t),vr.getUserAgentMiddlewareOptions)}}),"getUserAgentPlugin");vr.getUserAgentPlugin=OL});var zc=u(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});var Nb=(A(),b(x));Nb.__exportStar(vb(),up);Nb.__exportStar(Sb(),up)});var bb=u(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.resolveClientEndpointParameters=void 0;var PL=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"rds-data"}),"resolveClientEndpointParameters");lp.resolveClientEndpointParameters=PL});var xb=u((Dpe,RL)=>{RL.exports={name:"@aws-sdk/client-rds-data",description:"AWS SDK for JavaScript Rds Data Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo rds-data"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.279.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rds-data",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rds-data"}}});var fp=u(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.STSServiceException=void 0;var IL=C(),vo=class extends IL.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,vo.prototype)}};n(vo,"STSServiceException");pp.STSServiceException=vo});var Zt=u(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.GetSessionTokenResponseFilterSensitiveLog=P.GetSessionTokenRequestFilterSensitiveLog=P.GetFederationTokenResponseFilterSensitiveLog=P.FederatedUserFilterSensitiveLog=P.GetFederationTokenRequestFilterSensitiveLog=P.GetCallerIdentityResponseFilterSensitiveLog=P.GetCallerIdentityRequestFilterSensitiveLog=P.GetAccessKeyInfoResponseFilterSensitiveLog=P.GetAccessKeyInfoRequestFilterSensitiveLog=P.DecodeAuthorizationMessageResponseFilterSensitiveLog=P.DecodeAuthorizationMessageRequestFilterSensitiveLog=P.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=P.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=P.AssumeRoleWithSAMLResponseFilterSensitiveLog=P.AssumeRoleWithSAMLRequestFilterSensitiveLog=P.AssumeRoleResponseFilterSensitiveLog=P.CredentialsFilterSensitiveLog=P.AssumeRoleRequestFilterSensitiveLog=P.TagFilterSensitiveLog=P.PolicyDescriptorTypeFilterSensitiveLog=P.AssumedRoleUserFilterSensitiveLog=P.InvalidAuthorizationMessageException=P.IDPCommunicationErrorException=P.InvalidIdentityTokenException=P.IDPRejectedClaimException=P.RegionDisabledException=P.PackedPolicyTooLargeException=P.MalformedPolicyDocumentException=P.ExpiredTokenException=void 0;var Bi=fp(),Eo=class extends Bi.STSServiceException{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Eo.prototype)}};n(Eo,"ExpiredTokenException");P.ExpiredTokenException=Eo;var So=class extends Bi.STSServiceException{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,So.prototype)}};n(So,"MalformedPolicyDocumentException");P.MalformedPolicyDocumentException=So;var No=class extends Bi.STSServiceException{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,No.prototype)}};n(No,"PackedPolicyTooLargeException");P.PackedPolicyTooLargeException=No;var bo=class extends Bi.STSServiceException{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,bo.prototype)}};n(bo,"RegionDisabledException");P.RegionDisabledException=bo;var xo=class extends Bi.STSServiceException{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,xo.prototype)}};n(xo,"IDPRejectedClaimException");P.IDPRejectedClaimException=xo;var Ao=class extends Bi.STSServiceException{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,Ao.prototype)}};n(Ao,"InvalidIdentityTokenException");P.InvalidIdentityTokenException=Ao;var To=class extends Bi.STSServiceException{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,To.prototype)}};n(To,"IDPCommunicationErrorException");P.IDPCommunicationErrorException=To;var Oo=class extends Bi.STSServiceException{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,Oo.prototype)}};n(Oo,"InvalidAuthorizationMessageException");P.InvalidAuthorizationMessageException=Oo;var qL=n(t=>({...t}),"AssumedRoleUserFilterSensitiveLog");P.AssumedRoleUserFilterSensitiveLog=qL;var CL=n(t=>({...t}),"PolicyDescriptorTypeFilterSensitiveLog");P.PolicyDescriptorTypeFilterSensitiveLog=CL;var kL=n(t=>({...t}),"TagFilterSensitiveLog");P.TagFilterSensitiveLog=kL;var ML=n(t=>({...t}),"AssumeRoleRequestFilterSensitiveLog");P.AssumeRoleRequestFilterSensitiveLog=ML;var DL=n(t=>({...t}),"CredentialsFilterSensitiveLog");P.CredentialsFilterSensitiveLog=DL;var FL=n(t=>({...t}),"AssumeRoleResponseFilterSensitiveLog");P.AssumeRoleResponseFilterSensitiveLog=FL;var LL=n(t=>({...t}),"AssumeRoleWithSAMLRequestFilterSensitiveLog");P.AssumeRoleWithSAMLRequestFilterSensitiveLog=LL;var zL=n(t=>({...t}),"AssumeRoleWithSAMLResponseFilterSensitiveLog");P.AssumeRoleWithSAMLResponseFilterSensitiveLog=zL;var UL=n(t=>({...t}),"AssumeRoleWithWebIdentityRequestFilterSensitiveLog");P.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=UL;var WL=n(t=>({...t}),"AssumeRoleWithWebIdentityResponseFilterSensitiveLog");P.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=WL;var jL=n(t=>({...t}),"DecodeAuthorizationMessageRequestFilterSensitiveLog");P.DecodeAuthorizationMessageRequestFilterSensitiveLog=jL;var VL=n(t=>({...t}),"DecodeAuthorizationMessageResponseFilterSensitiveLog");P.DecodeAuthorizationMessageResponseFilterSensitiveLog=VL;var $L=n(t=>({...t}),"GetAccessKeyInfoRequestFilterSensitiveLog");P.GetAccessKeyInfoRequestFilterSensitiveLog=$L;var HL=n(t=>({...t}),"GetAccessKeyInfoResponseFilterSensitiveLog");P.GetAccessKeyInfoResponseFilterSensitiveLog=HL;var GL=n(t=>({...t}),"GetCallerIdentityRequestFilterSensitiveLog");P.GetCallerIdentityRequestFilterSensitiveLog=GL;var BL=n(t=>({...t}),"GetCallerIdentityResponseFilterSensitiveLog");P.GetCallerIdentityResponseFilterSensitiveLog=BL;var JL=n(t=>({...t}),"GetFederationTokenRequestFilterSensitiveLog");P.GetFederationTokenRequestFilterSensitiveLog=JL;var KL=n(t=>({...t}),"FederatedUserFilterSensitiveLog");P.FederatedUserFilterSensitiveLog=KL;var YL=n(t=>({...t}),"GetFederationTokenResponseFilterSensitiveLog");P.GetFederationTokenResponseFilterSensitiveLog=YL;var QL=n(t=>({...t}),"GetSessionTokenRequestFilterSensitiveLog");P.GetSessionTokenRequestFilterSensitiveLog=QL;var XL=n(t=>({...t}),"GetSessionTokenResponseFilterSensitiveLog");P.GetSessionTokenResponseFilterSensitiveLog=XL});var yg=u(li=>{"use strict";var Ab=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ZL=Ab+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Tb="["+Ab+"]["+ZL+"]*",ez=new RegExp("^"+Tb+"$"),tz=n(function(t,e){let r=[],i=e.exec(t);for(;i;){let s=[];s.startIndex=e.lastIndex-i[0].length;let o=i.length;for(let a=0;a<o;a++)s.push(i[a]);r.push(s),i=e.exec(t)}return r},"getAllMatches"),rz=n(function(t){let e=ez.exec(t);return!(e===null||typeof e>"u")},"isName");li.isExist=function(t){return typeof t<"u"};li.isEmptyObject=function(t){return Object.keys(t).length===0};li.merge=function(t,e,r){if(e){let i=Object.keys(e),s=i.length;for(let o=0;o<s;o++)r==="strict"?t[i[o]]=[e[i[o]]]:t[i[o]]=e[i[o]]}};li.getValue=function(t){return li.isExist(t)?t:""};li.isName=rz;li.getAllMatches=tz;li.nameRegexp=Tb});var wg=u(qb=>{"use strict";var gg=yg(),iz={allowBooleanAttributes:!1,unpairedTags:[]};qb.validate=function(t,e){e=Object.assign({},iz,e);let r=[],i=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=Pb(t,o),o.err)return o}else if(t[o]==="<"){let a=o;if(o++,t[o]==="!"){o=Rb(t,o);continue}else{let c=!1;t[o]==="/"&&(c=!0,o++);let l="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)l+=t[o];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),o--),!lz(l)){let m;return l.trim().length===0?m="Invalid space after '<'.":m="Tag '"+l+"' is an invalid name.",Oe("InvalidTag",m,pt(t,o))}let p=oz(t,o);if(p===!1)return Oe("InvalidAttr","Attributes for '"+l+"' have open quote.",pt(t,o));let f=p.value;if(o=p.index,f[f.length-1]==="/"){let m=o-f.length;f=f.substring(0,f.length-1);let h=Ib(f,e);if(h===!0)i=!0;else return Oe(h.err.code,h.err.msg,pt(t,m+h.err.line))}else if(c)if(p.tagClosed){if(f.trim().length>0)return Oe("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",pt(t,a));{let m=r.pop();if(l!==m.tagName){let h=pt(t,m.tagStartPos);return Oe("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+l+"'.",pt(t,a))}r.length==0&&(s=!0)}}else return Oe("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",pt(t,o));else{let m=Ib(f,e);if(m!==!0)return Oe(m.err.code,m.err.msg,pt(t,o-f.length+m.err.line));if(s===!0)return Oe("InvalidXml","Multiple possible root nodes found.",pt(t,o));e.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:a}),i=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=Rb(t,o);continue}else if(t[o+1]==="?"){if(o=Pb(t,++o),o.err)return o}else break;else if(t[o]==="&"){let m=dz(t,o);if(m==-1)return Oe("InvalidChar","char '&' is not expected.",pt(t,o));o=m}else if(s===!0&&!Ob(t[o]))return Oe("InvalidXml","Extra text at the end",pt(t,o));t[o]==="<"&&o--}}else{if(Ob(t[o]))continue;return Oe("InvalidChar","char '"+t[o]+"' is not expected.",pt(t,o))}if(i){if(r.length==1)return Oe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",pt(t,r[0].tagStartPos));if(r.length>0)return Oe("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Oe("InvalidXml","Start tag expected.",1);return!0};function Ob(t){return t===" "||t==="	"||t===`
`||t==="\r"}n(Ob,"isWhiteSpace");function Pb(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let i=t.substr(r,e-r);if(e>5&&i==="xml")return Oe("InvalidXml","XML declaration allowed only at the start of the document.",pt(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}n(Pb,"readPI");function Rb(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}n(Rb,"readCommentAndCDATA");var nz='"',sz="'";function oz(t,e){let r="",i="",s=!1;for(;e<t.length;e++){if(t[e]===nz||t[e]===sz)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){s=!0;break}r+=t[e]}return i!==""?!1:{value:r,index:e,tagClosed:s}}n(oz,"readAttributeStr");var az=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ib(t,e){let r=gg.getAllMatches(t,az),i={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return Oe("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Uc(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return Oe("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Uc(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return Oe("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Uc(r[s]));let o=r[s][2];if(!uz(o))return Oe("InvalidAttr","Attribute '"+o+"' is an invalid name.",Uc(r[s]));if(!i.hasOwnProperty(o))i[o]=1;else return Oe("InvalidAttr","Attribute '"+o+"' is repeated.",Uc(r[s]))}return!0}n(Ib,"validateAttributeString");function cz(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}n(cz,"validateNumberAmpersand");function dz(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,cz(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}n(dz,"validateAmpersand");function Oe(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}n(Oe,"getErrorObject");function uz(t){return gg.isName(t)}n(uz,"validateAttrName");function lz(t){return gg.isName(t)}n(lz,"validateTagName");function pt(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}n(pt,"getLineNumberForPosition");function Uc(t){return t.startIndex+t[1].length}n(Uc,"getPositionFromMatch")});var kb=u(vg=>{var Cb={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},pz=n(function(t){return Object.assign({},Cb,t)},"buildOptions");vg.buildOptions=pz;vg.defaultOptions=Cb});var Db=u((Bpe,Mb)=>{"use strict";var mp=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}};n(mp,"XmlNode");Mb.exports=mp});var Lb=u((Kpe,Fb)=>{function fz(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,a=!1,c="";for(;e<t.length;e++)if(t[e]==="<"&&!a){if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y")e+=7,o=!0;else if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N")e+=9;else if(t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");i++,c=""}else if(t[e]===">"){if(a?t[e-1]==="-"&&t[e-2]==="-"&&(a=!1,i--):(o&&(hz(c,r),o=!1),i--),i===0)break}else t[e]==="["?s=!0:c+=t[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}n(fz,"readDocType");var mz=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function hz(t,e){let r=mz.exec(t);r&&(e[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}n(hz,"parseEntityExp");Fb.exports=fz});var Ub=u((Qpe,zb)=>{var _z=/^[-+]?0x[a-fA-F0-9]+$/,yz=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var gz={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function wz(t,e={}){if(e=Object.assign({},gz,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&_z.test(r))return Number.parseInt(r,16);{let i=yz.exec(r);if(i){let s=i[1],o=i[2],a=vz(i[3]),c=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&o.length>0&&!s&&r[1]!==".")return t;{let l=Number(r),p=""+l;return p.search(/[eE]/)!==-1||c?e.eNotation?l:t:r.indexOf(".")!==-1?p==="0"&&a===""||p===a||s&&p==="-"+a?l:t:o?a===p||s+a===p?l:t:r===p||r===s+p?l:t}}else return t}}n(wz,"toNumber");function vz(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}n(vz,"trimZeros");zb.exports=wz});var jb=u((efe,Wb)=>{"use strict";var Ng=yg(),Wc=Db(),Ez=Lb(),Sz=Ub(),Zpe="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Ng.nameRegexp),hp=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=Nz,this.parseXml=Oz,this.parseTextData=bz,this.resolveNameSpace=xz,this.buildAttributesMap=Tz,this.isItStopNode=Iz,this.replaceEntitiesValue=Pz,this.readStopNodeData=Cz,this.saveTextToParentTag=Rz}};n(hp,"OrderedObjParser");function Nz(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}n(Nz,"addExternalEntities");function bz(t,e,r,i,s,o,a){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));let c=this.options.tagValueProcessor(e,t,r,s,o);return c==null?t:typeof c!=typeof t||c!==t?c:this.options.trimValues?Sg(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Sg(t,this.options.parseTagValue,this.options.numberParseOptions):t}}n(bz,"parseTextData");function xz(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}n(xz,"resolveNameSpace");var Az=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Tz(t,e){if(!this.options.ignoreAttributes&&typeof t=="string"){let r=Ng.getAllMatches(t,Az),i=r.length,s={};for(let o=0;o<i;o++){let a=this.resolveNameSpace(r[o][1]),c=r[o][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let p=this.options.attributeValueProcessor(a,c,e);p==null?s[l]=c:typeof p!=typeof c||p!==c?s[l]=p:s[l]=Sg(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=s,o}return s}}n(Tz,"buildAttributesMap");var Oz=n(function(t){t=t.replace(/\r\n?/g,`
`);let e=new Wc("!xml"),r=e,i="",s="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){let c=Kn(t,">",o,"Closing Tag is not closed."),l=t.substring(o+2,c).trim();if(this.options.removeNSPrefix){let p=l.indexOf(":");p!==-1&&(l=l.substr(p+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(i=this.saveTextToParentTag(i,r,s)),s=s.substr(0,s.lastIndexOf(".")),r=this.tagsNodeStack.pop(),i="",o=c}else if(t[o+1]==="?"){let c=Eg(t,o,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,s),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){let l=new Wc(c.tagName);l.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(l[":@"]=this.buildAttributesMap(c.tagExp,s)),r.addChild(l)}o=c.closeIndex+1}else if(t.substr(o+1,3)==="!--"){let c=Kn(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let l=t.substring(o+4,c-2);i=this.saveTextToParentTag(i,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}o=c}else if(t.substr(o+1,2)==="!D"){let c=Ez(t,o);this.docTypeEntities=c.entities,o=c.i}else if(t.substr(o+1,2)==="!["){let c=Kn(t,"]]>",o,"CDATA is not closed.")-2,l=t.substring(o+9,c);if(i=this.saveTextToParentTag(i,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]);else{let p=this.parseTextData(l,r.tagname,s,!0,!1,!0);p==null&&(p=""),r.add(this.options.textNodeName,p)}o=c+2}else{let c=Eg(t,o,this.options.removeNSPrefix),l=c.tagName,p=c.tagExp,f=c.attrExpPresent,m=c.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&i&&r.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,r,s,!1)),l!==e.tagname&&(s+=s?"."+l:l);let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,s,l)){let _="";if(p.length>0&&p.lastIndexOf("/")===p.length-1)o=c.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)o=c.closeIndex;else{let g=this.readStopNodeData(t,l,m+1);if(!g)throw new Error(`Unexpected end of ${l}`);o=g.i,_=g.tagContent}let w=new Wc(l);l!==p&&f&&(w[":@"]=this.buildAttributesMap(p,s)),_&&(_=this.parseTextData(_,l,s,!0,f,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),w.add(this.options.textNodeName,_),r.addChild(w)}else{if(p.length>0&&p.lastIndexOf("/")===p.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),p=l):p=p.substr(0,p.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let _=new Wc(l);l!==p&&f&&(_[":@"]=this.buildAttributesMap(p,s)),s=s.substr(0,s.lastIndexOf(".")),r.addChild(_)}else{let _=new Wc(l);this.tagsNodeStack.push(r),l!==p&&f&&(_[":@"]=this.buildAttributesMap(p,s)),r.addChild(_),r=_}i="",o=m}}else i+=t[o];return e.child},"parseXml"),Pz=n(function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t},"replaceEntitiesValue");function Rz(t,e,r,i){return t&&(i===void 0&&(i=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}n(Rz,"saveTextToParentTag");function Iz(t,e,r){let i="*."+r;for(let s in t){let o=t[s];if(i===o||e===o)return!0}return!1}n(Iz,"isItStopNode");function qz(t,e,r=">"){let i,s="";for(let o=e;o<t.length;o++){let a=t[o];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===r[0])if(r[1]){if(t[o+1]===r[1])return{data:s,index:o}}else return{data:s,index:o};else a==="	"&&(a=" ");s+=a}}n(qz,"tagExpWithClosingIndex");function Kn(t,e,r,i){let s=t.indexOf(e,r);if(s===-1)throw new Error(i);return s+e.length-1}n(Kn,"findClosingIndex");function Eg(t,e,r,i=">"){let s=qz(t,e+1,i);if(!s)return;let o=s.data,a=s.index,c=o.search(/\s/),l=o,p=!0;if(c!==-1&&(l=o.substr(0,c).replace(/\s\s*$/,""),o=o.substr(c+1)),r){let f=l.indexOf(":");f!==-1&&(l=l.substr(f+1),p=l!==s.data.substr(f+1))}return{tagName:l,tagExp:o,closeIndex:a,attrExpPresent:p}}n(Eg,"readTagExp");function Cz(t,e,r){let i=r,s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let o=Kn(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(s--,s===0))return{tagContent:t.substring(i,r),i:o};r=o}else if(t[r+1]==="?")r=Kn(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=Kn(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=Kn(t,"]]>",r,"StopNode is not closed.")-2;else{let o=Eg(t,r,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,r=o.closeIndex)}}n(Cz,"readStopNodeData");function Sg(t,e,r){if(e&&typeof t=="string"){let i=t.trim();return i==="true"?!0:i==="false"?!1:Sz(t,r)}else return Ng.isExist(t)?t:""}n(Sg,"parseValue");Wb.exports=hp});var Hb=u($b=>{"use strict";function kz(t,e){return Vb(t,e)}n(kz,"prettify");function Vb(t,e,r){let i,s={};for(let o=0;o<t.length;o++){let a=t[o],c=Mz(a),l="";if(r===void 0?l=c:l=r+"."+c,c===e.textNodeName)i===void 0?i=a[c]:i+=""+a[c];else{if(c===void 0)continue;if(a[c]){let p=Vb(a[c],e,l),f=Fz(p,e);a[":@"]?Dz(p,a[":@"],l,e):Object.keys(p).length===1&&p[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?p=p[e.textNodeName]:Object.keys(p).length===0&&(e.alwaysCreateTextNode?p[e.textNodeName]="":p=""),s[c]!==void 0&&s.hasOwnProperty(c)?(Array.isArray(s[c])||(s[c]=[s[c]]),s[c].push(p)):e.isArray(c,l,f)?s[c]=[p]:s[c]=p}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}n(Vb,"compress");function Mz(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(i!==":@")return i}}n(Mz,"propName");function Dz(t,e,r,i){if(e){let s=Object.keys(e),o=s.length;for(let a=0;a<o;a++){let c=s[a];i.isArray(c,r+"."+c,!0,!0)?t[c]=[e[c]]:t[c]=e[c]}}}n(Dz,"assignAttributes");function Fz(t,e){let r=Object.keys(t).length;return!!(r===0||r===1&&t[e.textNodeName])}n(Fz,"isLeafTag");$b.prettify=kz});var Bb=u((nfe,Gb)=>{var{buildOptions:Lz}=kb(),zz=jb(),{prettify:Uz}=Hb(),Wz=wg(),_p=class{constructor(e){this.externalEntities={},this.options=Lz(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=Wz.validate(e,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let i=new zz(this.options);i.addExternalEntities(this.externalEntities);let s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:Uz(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};n(_p,"XMLParser");Gb.exports=_p});var Xb=u((ofe,Qb)=>{var jz=`
`;function Vz(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=jz),Kb(t,e,"",r)}n(Vz,"toXml");function Kb(t,e,r,i){let s="",o=!1;for(let a=0;a<t.length;a++){let c=t[a],l=$z(c),p="";if(r.length===0?p=l:p=`${r}.${l}`,l===e.textNodeName){let w=c[l];Hz(p,e)||(w=e.tagValueProcessor(l,w),w=Yb(w,e)),o&&(s+=i),s+=w,o=!1;continue}else if(l===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${c[l][0][e.textNodeName]}]]>`,o=!1;continue}else if(l===e.commentPropName){s+=i+`<!--${c[l][0][e.textNodeName]}-->`,o=!0;continue}else if(l[0]==="?"){let w=Jb(c[":@"],e),g=l==="?xml"?"":i,S=c[l][0][e.textNodeName];S=S.length!==0?" "+S:"",s+=g+`<${l}${S}${w}?>`,o=!0;continue}let f=i;f!==""&&(f+=e.indentBy);let m=Jb(c[":@"],e),h=i+`<${l}${m}`,_=Kb(c[l],e,p,f);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=h+">":s+=h+"/>":(!_||_.length===0)&&e.suppressEmptyNode?s+=h+"/>":_&&_.endsWith(">")?s+=h+`>${_}${i}</${l}>`:(s+=h+">",_&&i!==""&&(_.includes("/>")||_.includes("</"))?s+=i+e.indentBy+_+i:s+=_,s+=`</${l}>`),o=!0}return s}n(Kb,"arrToStr");function $z(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(i!==":@")return i}}n($z,"propName");function Jb(t,e){let r="";if(t&&!e.ignoreAttributes)for(let i in t){let s=e.attributeValueProcessor(i,t[i]);s=Yb(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${i.substr(e.attributeNamePrefix.length)}`:r+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return r}n(Jb,"attr_to_str");function Hz(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+r)return!0;return!1}n(Hz,"isStopNode");function Yb(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let i=e.entities[r];t=t.replace(i.regex,i.val)}return t}n(Yb,"replaceEntitiesValue");Qb.exports=Vz});var e0=u((cfe,Zb)=>{"use strict";var Gz=Xb(),Bz={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Ji(t){this.options=Object.assign({},Bz,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Yz),this.processTextOrObjNode=Jz,this.options.format?(this.indentate=Kz,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}n(Ji,"Builder");Ji.prototype.build=function(t){return this.options.preserveOrder?Gz(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Ji.prototype.j2x=function(t,e){let r="",i="";for(let s in t)if(!(typeof t[s]>"u"))if(t[s]===null)s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)i+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){let o=this.isAttribute(s);if(o)r+=this.buildAttrPairStr(o,""+t[s]);else if(s===this.options.textNodeName){let a=this.options.tagValueProcessor(s,""+t[s]);i+=this.replaceEntitiesValue(a)}else i+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){let o=t[s].length;for(let a=0;a<o;a++){let c=t[s][a];typeof c>"u"||(c===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof c=="object"?i+=this.processTextOrObjNode(c,s,e):i+=this.buildTextValNode(c,s,"",e))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){let o=Object.keys(t[s]),a=o.length;for(let c=0;c<a;c++)r+=this.buildAttrPairStr(o[c],""+t[s][o[c]])}else i+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:i}};Ji.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Jz(t,e,r){let i=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,i.attrStr,r):this.buildObjectNode(i.val,e,i.attrStr,r)}n(Jz,"processTextOrObjNode");Ji.prototype.buildObjectNode=function(t,e,r,i){if(t==="")return e[0]==="?"?this.indentate(i)+"<"+e+r+"?"+this.tagEndChar:this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),r&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+r+o+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+r+o+this.tagEndChar+t+this.indentate(i)+s}};Ji.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Ji.prototype.buildTextValNode=function(t,e,r,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}};Ji.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function Kz(t){return this.options.indentBy.repeat(t)}n(Kz,"indentate");function Yz(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}n(Yz,"isAttribute");Zb.exports=Ji});var r0=u((ufe,t0)=>{"use strict";var Qz=wg(),Xz=Bb(),Zz=e0();t0.exports={XMLParser:Xz,XMLValidator:Qz,XMLBuilder:Zz}});var fi=u(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.deserializeAws_queryGetSessionTokenCommand=V.deserializeAws_queryGetFederationTokenCommand=V.deserializeAws_queryGetCallerIdentityCommand=V.deserializeAws_queryGetAccessKeyInfoCommand=V.deserializeAws_queryDecodeAuthorizationMessageCommand=V.deserializeAws_queryAssumeRoleWithWebIdentityCommand=V.deserializeAws_queryAssumeRoleWithSAMLCommand=V.deserializeAws_queryAssumeRoleCommand=V.serializeAws_queryGetSessionTokenCommand=V.serializeAws_queryGetFederationTokenCommand=V.serializeAws_queryGetCallerIdentityCommand=V.serializeAws_queryGetAccessKeyInfoCommand=V.serializeAws_queryDecodeAuthorizationMessageCommand=V.serializeAws_queryAssumeRoleWithWebIdentityCommand=V.serializeAws_queryAssumeRoleWithSAMLCommand=V.serializeAws_queryAssumeRoleCommand=void 0;var eU=tt(),I=C(),tU=r0(),Ki=Zt(),Yi=fp(),rU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...OU(t,e),Action:"AssumeRole",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleCommand");V.serializeAws_queryAssumeRoleCommand=rU;var iU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...PU(t,e),Action:"AssumeRoleWithSAML",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleWithSAMLCommand");V.serializeAws_queryAssumeRoleWithSAMLCommand=iU;var nU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...RU(t,e),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleWithWebIdentityCommand");V.serializeAws_queryAssumeRoleWithWebIdentityCommand=nU;var sU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...IU(t,e),Action:"DecodeAuthorizationMessage",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryDecodeAuthorizationMessageCommand");V.serializeAws_queryDecodeAuthorizationMessageCommand=sU;var oU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...qU(t,e),Action:"GetAccessKeyInfo",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetAccessKeyInfoCommand");V.serializeAws_queryGetAccessKeyInfoCommand=oU;var aU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...CU(t,e),Action:"GetCallerIdentity",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetCallerIdentityCommand");V.serializeAws_queryGetCallerIdentityCommand=aU;var cU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...kU(t,e),Action:"GetFederationToken",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetFederationTokenCommand");V.serializeAws_queryGetFederationTokenCommand=cU;var dU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...MU(t,e),Action:"GetSessionToken",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetSessionTokenCommand");V.serializeAws_queryGetSessionTokenCommand=dU;var uU=n(async(t,e)=>{if(t.statusCode>=300)return lU(t,e);let r=await pi(t.body,e),i={};i=zU(r.AssumeRoleResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleCommand");V.deserializeAws_queryAssumeRoleCommand=uU;var lU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await bg(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleCommandError"),pU=n(async(t,e)=>{if(t.statusCode>=300)return fU(t,e);let r=await pi(t.body,e),i={};i=UU(r.AssumeRoleWithSAMLResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleWithSAMLCommand");V.deserializeAws_queryAssumeRoleWithSAMLCommand=pU;var fU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await bg(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await i0(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await n0(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleWithSAMLCommandError"),mU=n(async(t,e)=>{if(t.statusCode>=300)return hU(t,e);let r=await pi(t.body,e),i={};i=WU(r.AssumeRoleWithWebIdentityResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleWithWebIdentityCommand");V.deserializeAws_queryAssumeRoleWithWebIdentityCommand=mU;var hU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await bg(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await AU(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await i0(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await n0(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleWithWebIdentityCommandError"),_U=n(async(t,e)=>{if(t.statusCode>=300)return yU(t,e);let r=await pi(t.body,e),i={};i=jU(r.DecodeAuthorizationMessageResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryDecodeAuthorizationMessageCommand");V.deserializeAws_queryDecodeAuthorizationMessageCommand=_U;var yU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await TU(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryDecodeAuthorizationMessageCommandError"),gU=n(async(t,e)=>{if(t.statusCode>=300)return wU(t,e);let r=await pi(t.body,e),i={};i=HU(r.GetAccessKeyInfoResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetAccessKeyInfoCommand");V.deserializeAws_queryGetAccessKeyInfoCommand=gU;var wU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body),s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})},"deserializeAws_queryGetAccessKeyInfoCommandError"),vU=n(async(t,e)=>{if(t.statusCode>=300)return EU(t,e);let r=await pi(t.body,e),i={};i=GU(r.GetCallerIdentityResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetCallerIdentityCommand");V.deserializeAws_queryGetCallerIdentityCommand=vU;var EU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body),s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})},"deserializeAws_queryGetCallerIdentityCommandError"),SU=n(async(t,e)=>{if(t.statusCode>=300)return NU(t,e);let r=await pi(t.body,e),i={};i=BU(r.GetFederationTokenResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetFederationTokenCommand");V.deserializeAws_queryGetFederationTokenCommand=SU;var NU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryGetFederationTokenCommandError"),bU=n(async(t,e)=>{if(t.statusCode>=300)return xU(t,e);let r=await pi(t.body,e),i={};i=JU(r.GetSessionTokenResult,e);let s={$metadata:Be(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetSessionTokenCommand");V.deserializeAws_queryGetSessionTokenCommand=bU;var xU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryGetSessionTokenCommandError"),bg=n(async(t,e)=>{let r=t.body,i=VU(r.Error,e),s=new Ki.ExpiredTokenException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryExpiredTokenExceptionResponse"),AU=n(async(t,e)=>{let r=t.body,i=KU(r.Error,e),s=new Ki.IDPCommunicationErrorException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryIDPCommunicationErrorExceptionResponse"),i0=n(async(t,e)=>{let r=t.body,i=YU(r.Error,e),s=new Ki.IDPRejectedClaimException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryIDPRejectedClaimExceptionResponse"),TU=n(async(t,e)=>{let r=t.body,i=QU(r.Error,e),s=new Ki.InvalidAuthorizationMessageException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryInvalidAuthorizationMessageExceptionResponse"),n0=n(async(t,e)=>{let r=t.body,i=XU(r.Error,e),s=new Ki.InvalidIdentityTokenException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryInvalidIdentityTokenExceptionResponse"),yp=n(async(t,e)=>{let r=t.body,i=ZU(r.Error,e),s=new Ki.MalformedPolicyDocumentException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryMalformedPolicyDocumentExceptionResponse"),gp=n(async(t,e)=>{let r=t.body,i=eW(r.Error,e),s=new Ki.PackedPolicyTooLargeException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryPackedPolicyTooLargeExceptionResponse"),jc=n(async(t,e)=>{let r=t.body,i=tW(r.Error,e),s=new Ki.RegionDisabledException({$metadata:Be(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryRegionDisabledExceptionResponse"),OU=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}if(t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=s0(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(i).forEach(([s,o])=>{let a=`Tags.${s}`;r[a]=o})}if(t.TransitiveTagKeys!=null){let i=LU(t.TransitiveTagKeys,e);t.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([s,o])=>{let a=`TransitiveTagKeys.${s}`;r[a]=o})}return t.ExternalId!=null&&(r.ExternalId=t.ExternalId),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),t.SourceIdentity!=null&&(r.SourceIdentity=t.SourceIdentity),r},"serializeAws_queryAssumeRoleRequest"),PU=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.PrincipalArn!=null&&(r.PrincipalArn=t.PrincipalArn),t.SAMLAssertion!=null&&(r.SAMLAssertion=t.SAMLAssertion),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},"serializeAws_queryAssumeRoleWithSAMLRequest"),RU=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.WebIdentityToken!=null&&(r.WebIdentityToken=t.WebIdentityToken),t.ProviderId!=null&&(r.ProviderId=t.ProviderId),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},"serializeAws_queryAssumeRoleWithWebIdentityRequest"),IU=n((t,e)=>{let r={};return t.EncodedMessage!=null&&(r.EncodedMessage=t.EncodedMessage),r},"serializeAws_queryDecodeAuthorizationMessageRequest"),qU=n((t,e)=>{let r={};return t.AccessKeyId!=null&&(r.AccessKeyId=t.AccessKeyId),r},"serializeAws_queryGetAccessKeyInfoRequest"),CU=n((t,e)=>({}),"serializeAws_queryGetCallerIdentityRequest"),kU=n((t,e)=>{let r={};if(t.Name!=null&&(r.Name=t.Name),t.Policy!=null&&(r.Policy=t.Policy),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}if(t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=s0(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(i).forEach(([s,o])=>{let a=`Tags.${s}`;r[a]=o})}return r},"serializeAws_queryGetFederationTokenRequest"),MU=n((t,e)=>{let r={};return t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),r},"serializeAws_queryGetSessionTokenRequest"),wp=n((t,e)=>{let r={},i=1;for(let s of t){if(s===null)continue;let o=DU(s,e);Object.entries(o).forEach(([a,c])=>{r[`member.${i}.${a}`]=c}),i++}return r},"serializeAws_querypolicyDescriptorListType"),DU=n((t,e)=>{let r={};return t.arn!=null&&(r.arn=t.arn),r},"serializeAws_queryPolicyDescriptorType"),FU=n((t,e)=>{let r={};return t.Key!=null&&(r.Key=t.Key),t.Value!=null&&(r.Value=t.Value),r},"serializeAws_queryTag"),LU=n((t,e)=>{let r={},i=1;for(let s of t)s!==null&&(r[`member.${i}`]=s,i++);return r},"serializeAws_querytagKeyListType"),s0=n((t,e)=>{let r={},i=1;for(let s of t){if(s===null)continue;let o=FU(s,e);Object.entries(o).forEach(([a,c])=>{r[`member.${i}.${a}`]=c}),i++}return r},"serializeAws_querytagListType"),xg=n((t,e)=>{let r={AssumedRoleId:void 0,Arn:void 0};return t.AssumedRoleId!==void 0&&(r.AssumedRoleId=(0,I.expectString)(t.AssumedRoleId)),t.Arn!==void 0&&(r.Arn=(0,I.expectString)(t.Arn)),r},"deserializeAws_queryAssumedRoleUser"),zU=n((t,e)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=xg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,I.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleResponse"),UU=n((t,e)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Subject:void 0,SubjectType:void 0,Issuer:void 0,Audience:void 0,NameQualifier:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=xg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),t.Subject!==void 0&&(r.Subject=(0,I.expectString)(t.Subject)),t.SubjectType!==void 0&&(r.SubjectType=(0,I.expectString)(t.SubjectType)),t.Issuer!==void 0&&(r.Issuer=(0,I.expectString)(t.Issuer)),t.Audience!==void 0&&(r.Audience=(0,I.expectString)(t.Audience)),t.NameQualifier!==void 0&&(r.NameQualifier=(0,I.expectString)(t.NameQualifier)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,I.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleWithSAMLResponse"),WU=n((t,e)=>{let r={Credentials:void 0,SubjectFromWebIdentityToken:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Provider:void 0,Audience:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=(0,I.expectString)(t.SubjectFromWebIdentityToken)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=xg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),t.Provider!==void 0&&(r.Provider=(0,I.expectString)(t.Provider)),t.Audience!==void 0&&(r.Audience=(0,I.expectString)(t.Audience)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,I.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleWithWebIdentityResponse"),Vc=n((t,e)=>{let r={AccessKeyId:void 0,SecretAccessKey:void 0,SessionToken:void 0,Expiration:void 0};return t.AccessKeyId!==void 0&&(r.AccessKeyId=(0,I.expectString)(t.AccessKeyId)),t.SecretAccessKey!==void 0&&(r.SecretAccessKey=(0,I.expectString)(t.SecretAccessKey)),t.SessionToken!==void 0&&(r.SessionToken=(0,I.expectString)(t.SessionToken)),t.Expiration!==void 0&&(r.Expiration=(0,I.expectNonNull)((0,I.parseRfc3339DateTimeWithOffset)(t.Expiration))),r},"deserializeAws_queryCredentials"),jU=n((t,e)=>{let r={DecodedMessage:void 0};return t.DecodedMessage!==void 0&&(r.DecodedMessage=(0,I.expectString)(t.DecodedMessage)),r},"deserializeAws_queryDecodeAuthorizationMessageResponse"),VU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryExpiredTokenException"),$U=n((t,e)=>{let r={FederatedUserId:void 0,Arn:void 0};return t.FederatedUserId!==void 0&&(r.FederatedUserId=(0,I.expectString)(t.FederatedUserId)),t.Arn!==void 0&&(r.Arn=(0,I.expectString)(t.Arn)),r},"deserializeAws_queryFederatedUser"),HU=n((t,e)=>{let r={Account:void 0};return t.Account!==void 0&&(r.Account=(0,I.expectString)(t.Account)),r},"deserializeAws_queryGetAccessKeyInfoResponse"),GU=n((t,e)=>{let r={UserId:void 0,Account:void 0,Arn:void 0};return t.UserId!==void 0&&(r.UserId=(0,I.expectString)(t.UserId)),t.Account!==void 0&&(r.Account=(0,I.expectString)(t.Account)),t.Arn!==void 0&&(r.Arn=(0,I.expectString)(t.Arn)),r},"deserializeAws_queryGetCallerIdentityResponse"),BU=n((t,e)=>{let r={Credentials:void 0,FederatedUser:void 0,PackedPolicySize:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.FederatedUser!==void 0&&(r.FederatedUser=$U(t.FederatedUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),r},"deserializeAws_queryGetFederationTokenResponse"),JU=n((t,e)=>{let r={Credentials:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),r},"deserializeAws_queryGetSessionTokenResponse"),KU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryIDPCommunicationErrorException"),YU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryIDPRejectedClaimException"),QU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryInvalidAuthorizationMessageException"),XU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryInvalidIdentityTokenException"),ZU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryMalformedPolicyDocumentException"),eW=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryPackedPolicyTooLargeException"),tW=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryRegionDisabledException"),Be=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),rW=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),iW=n((t,e)=>rW(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Qi=n(async(t,e,r,i,s)=>{let{hostname:o,protocol:a="https",port:c,path:l}=await t.endpoint(),p={protocol:a,hostname:o,port:c,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:e};return i!==void 0&&(p.hostname=i),s!==void 0&&(p.body=s),new eU.HttpRequest(p)},"buildHttpRpcRequest"),pi=n((t,e)=>iW(t,e).then(r=>{if(r.length){let i=new tU.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,p)=>p.trim()===""&&p.includes(`
`)?"":void 0});i.addEntity("#xD","\r"),i.addEntity("#10",`
`);let s=i.parse(r),o="#text",a=Object.keys(s)[0],c=s[a];return c[o]&&(c[a]=c[o],delete c[o]),(0,I.getValueFromTextNode)(c)}return{}}),"parseBody"),Xi=n(async(t,e)=>{let r=await pi(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},"parseErrorBody"),Zi=n(t=>Object.entries(t).map(([e,r])=>(0,I.extendedEncodeURIComponent)(e)+"="+(0,I.extendedEncodeURIComponent)(r)).join("&"),"buildFormUrlencodedString"),en=n((t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"},"loadQueryErrorCode")});var Ep=u(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.AssumeRoleCommand=void 0;var nW=ne(),sW=me(),oW=ui(),aW=C(),o0=Zt(),a0=fi(),Po=class extends aW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,sW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,nW.getEndpointPlugin)(r,Po.getEndpointParameterInstructions())),this.middlewareStack.use((0,oW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:o0.AssumeRoleRequestFilterSensitiveLog,outputFilterSensitiveLog:o0.AssumeRoleResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,a0.serializeAws_queryAssumeRoleCommand)(e,r)}deserialize(e,r){return(0,a0.deserializeAws_queryAssumeRoleCommand)(e,r)}};n(Po,"AssumeRoleCommand");vp.AssumeRoleCommand=Po});var Ag=u(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.AssumeRoleWithSAMLCommand=void 0;var cW=ne(),dW=me(),uW=C(),c0=Zt(),d0=fi(),Ro=class extends uW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,dW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,cW.getEndpointPlugin)(r,Ro.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithSAMLCommand",inputFilterSensitiveLog:c0.AssumeRoleWithSAMLRequestFilterSensitiveLog,outputFilterSensitiveLog:c0.AssumeRoleWithSAMLResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,d0.serializeAws_queryAssumeRoleWithSAMLCommand)(e,r)}deserialize(e,r){return(0,d0.deserializeAws_queryAssumeRoleWithSAMLCommand)(e,r)}};n(Ro,"AssumeRoleWithSAMLCommand");Sp.AssumeRoleWithSAMLCommand=Ro});var bp=u(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.AssumeRoleWithWebIdentityCommand=void 0;var lW=ne(),pW=me(),fW=C(),u0=Zt(),l0=fi(),Io=class extends fW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,pW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,lW.getEndpointPlugin)(r,Io.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:u0.AssumeRoleWithWebIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:u0.AssumeRoleWithWebIdentityResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,l0.serializeAws_queryAssumeRoleWithWebIdentityCommand)(e,r)}deserialize(e,r){return(0,l0.deserializeAws_queryAssumeRoleWithWebIdentityCommand)(e,r)}};n(Io,"AssumeRoleWithWebIdentityCommand");Np.AssumeRoleWithWebIdentityCommand=Io});var Tg=u(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.DecodeAuthorizationMessageCommand=void 0;var mW=ne(),hW=me(),_W=ui(),yW=C(),p0=Zt(),f0=fi(),qo=class extends yW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,hW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,mW.getEndpointPlugin)(r,qo.getEndpointParameterInstructions())),this.middlewareStack.use((0,_W.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"DecodeAuthorizationMessageCommand",inputFilterSensitiveLog:p0.DecodeAuthorizationMessageRequestFilterSensitiveLog,outputFilterSensitiveLog:p0.DecodeAuthorizationMessageResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,f0.serializeAws_queryDecodeAuthorizationMessageCommand)(e,r)}deserialize(e,r){return(0,f0.deserializeAws_queryDecodeAuthorizationMessageCommand)(e,r)}};n(qo,"DecodeAuthorizationMessageCommand");xp.DecodeAuthorizationMessageCommand=qo});var Og=u(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.GetAccessKeyInfoCommand=void 0;var gW=ne(),wW=me(),vW=ui(),EW=C(),m0=Zt(),h0=fi(),Co=class extends EW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,wW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,gW.getEndpointPlugin)(r,Co.getEndpointParameterInstructions())),this.middlewareStack.use((0,vW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetAccessKeyInfoCommand",inputFilterSensitiveLog:m0.GetAccessKeyInfoRequestFilterSensitiveLog,outputFilterSensitiveLog:m0.GetAccessKeyInfoResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,h0.serializeAws_queryGetAccessKeyInfoCommand)(e,r)}deserialize(e,r){return(0,h0.deserializeAws_queryGetAccessKeyInfoCommand)(e,r)}};n(Co,"GetAccessKeyInfoCommand");Ap.GetAccessKeyInfoCommand=Co});var Pg=u(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.GetCallerIdentityCommand=void 0;var SW=ne(),NW=me(),bW=ui(),xW=C(),_0=Zt(),y0=fi(),ko=class extends xW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,NW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,SW.getEndpointPlugin)(r,ko.getEndpointParameterInstructions())),this.middlewareStack.use((0,bW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetCallerIdentityCommand",inputFilterSensitiveLog:_0.GetCallerIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:_0.GetCallerIdentityResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,y0.serializeAws_queryGetCallerIdentityCommand)(e,r)}deserialize(e,r){return(0,y0.deserializeAws_queryGetCallerIdentityCommand)(e,r)}};n(ko,"GetCallerIdentityCommand");Tp.GetCallerIdentityCommand=ko});var Rg=u(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.GetFederationTokenCommand=void 0;var AW=ne(),TW=me(),OW=ui(),PW=C(),g0=Zt(),w0=fi(),Mo=class extends PW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,TW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,AW.getEndpointPlugin)(r,Mo.getEndpointParameterInstructions())),this.middlewareStack.use((0,OW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetFederationTokenCommand",inputFilterSensitiveLog:g0.GetFederationTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:g0.GetFederationTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,w0.serializeAws_queryGetFederationTokenCommand)(e,r)}deserialize(e,r){return(0,w0.deserializeAws_queryGetFederationTokenCommand)(e,r)}};n(Mo,"GetFederationTokenCommand");Op.GetFederationTokenCommand=Mo});var Ig=u(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.GetSessionTokenCommand=void 0;var RW=ne(),IW=me(),qW=ui(),CW=C(),v0=Zt(),E0=fi(),Do=class extends CW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,IW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,RW.getEndpointPlugin)(r,Do.getEndpointParameterInstructions())),this.middlewareStack.use((0,qW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetSessionTokenCommand",inputFilterSensitiveLog:v0.GetSessionTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:v0.GetSessionTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,E0.serializeAws_queryGetSessionTokenCommand)(e,r)}deserialize(e,r){return(0,E0.deserializeAws_queryGetSessionTokenCommand)(e,r)}};n(Do,"GetSessionTokenCommand");Pp.GetSessionTokenCommand=Do});var S0=u(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.resolveStsAuthConfig=void 0;var kW=ui(),MW=n((t,{stsClientCtor:e})=>(0,kW.resolveAwsAuthConfig)({...t,stsClientCtor:e}),"resolveStsAuthConfig");Rp.resolveStsAuthConfig=MW});var N0=u(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.resolveClientEndpointParameters=void 0;var DW=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),"resolveClientEndpointParameters");Ip.resolveClientEndpointParameters=DW});var b0=u((Cfe,FW)=>{FW.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-sdk-sts":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0","fast-xml-parser":"4.1.2",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var qg=u(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.decorateDefaultCredentialProvider=Er.getDefaultRoleAssumerWithWebIdentity=Er.getDefaultRoleAssumer=void 0;var LW=Ep(),zW=bp(),x0="us-east-1",A0=n(t=>typeof t!="function"?t===void 0?x0:t:async()=>{try{return await t()}catch{return x0}},"decorateDefaultRegion"),UW=n((t,e)=>{let r,i;return async(s,o)=>{if(i=s,!r){let{logger:c,region:l,requestHandler:p}=t;r=new e({logger:c,credentialDefaultProvider:()=>async()=>i,region:A0(l||t.region),...p?{requestHandler:p}:{}})}let{Credentials:a}=await r.send(new LW.AssumeRoleCommand(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},"getDefaultRoleAssumer");Er.getDefaultRoleAssumer=UW;var WW=n((t,e)=>{let r;return async i=>{if(!r){let{logger:o,region:a,requestHandler:c}=t;r=new e({logger:o,region:A0(a||t.region),...c?{requestHandler:c}:{}})}let{Credentials:s}=await r.send(new zW.AssumeRoleWithWebIdentityCommand(i));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${i.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration}}},"getDefaultRoleAssumerWithWebIdentity");Er.getDefaultRoleAssumerWithWebIdentity=WW;var jW=n(t=>e=>t({roleAssumer:(0,Er.getDefaultRoleAssumer)(e,e.stsClientCtor),roleAssumerWithWebIdentity:(0,Er.getDefaultRoleAssumerWithWebIdentity)(e,e.stsClientCtor),...e}),"decorateDefaultCredentialProvider");Er.decorateDefaultCredentialProvider=jW});var T0=u(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.fromEnv=Je.ENV_EXPIRATION=Je.ENV_SESSION=Je.ENV_SECRET=Je.ENV_KEY=void 0;var VW=ee();Je.ENV_KEY="AWS_ACCESS_KEY_ID";Je.ENV_SECRET="AWS_SECRET_ACCESS_KEY";Je.ENV_SESSION="AWS_SESSION_TOKEN";Je.ENV_EXPIRATION="AWS_CREDENTIAL_EXPIRATION";var $W=n(()=>async()=>{let t=process.env[Je.ENV_KEY],e=process.env[Je.ENV_SECRET],r=process.env[Je.ENV_SESSION],i=process.env[Je.ENV_EXPIRATION];if(t&&e)return{accessKeyId:t,secretAccessKey:e,...r&&{sessionToken:r},...i&&{expiration:new Date(i)}};throw new VW.CredentialsProviderError("Unable to find environment variable credentials.")},"fromEnv");Je.fromEnv=$W});var kg=u(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});var HW=(A(),b(x));HW.__exportStar(T0(),Cg)});var $c=u(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.getHomeDir=void 0;var GW=U("os"),BW=U("path"),JW=n(()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:i=`C:${BW.sep}`}=process.env;return t||e||(r?`${i}${r}`:(0,GW.homedir)())},"getHomeDir");qp.getHomeDir=JW});var O0=u(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getProfileName=Sr.DEFAULT_PROFILE=Sr.ENV_PROFILE=void 0;Sr.ENV_PROFILE="AWS_PROFILE";Sr.DEFAULT_PROFILE="default";var KW=n(t=>t.profile||process.env[Sr.ENV_PROFILE]||Sr.DEFAULT_PROFILE,"getProfileName");Sr.getProfileName=KW});var Mg=u(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.getSSOTokenFilepath=void 0;var YW=U("crypto"),QW=U("path"),XW=$c(),ZW=n(t=>{let r=(0,YW.createHash)("sha1").update(t).digest("hex");return(0,QW.join)((0,XW.getHomeDir)(),".aws","sso","cache",`${r}.json`)},"getSSOTokenFilepath");Cp.getSSOTokenFilepath=ZW});var P0=u(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.getSSOTokenFromFile=void 0;var ej=U("fs"),tj=Mg(),{readFile:rj}=ej.promises,ij=n(async t=>{let e=(0,tj.getSSOTokenFilepath)(t),r=await rj(e,"utf8");return JSON.parse(r)},"getSSOTokenFromFile");kp.getSSOTokenFromFile=ij});var Dg=u(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.getConfigFilepath=Yn.ENV_CONFIG_PATH=void 0;var nj=U("path"),sj=$c();Yn.ENV_CONFIG_PATH="AWS_CONFIG_FILE";var oj=n(()=>process.env[Yn.ENV_CONFIG_PATH]||(0,nj.join)((0,sj.getHomeDir)(),".aws","config"),"getConfigFilepath");Yn.getConfigFilepath=oj});var R0=u(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.getCredentialsFilepath=Qn.ENV_CREDENTIALS_PATH=void 0;var aj=U("path"),cj=$c();Qn.ENV_CREDENTIALS_PATH="AWS_SHARED_CREDENTIALS_FILE";var dj=n(()=>process.env[Qn.ENV_CREDENTIALS_PATH]||(0,aj.join)((0,cj.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath");Qn.getCredentialsFilepath=dj});var q0=u(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.getProfileData=void 0;var I0=/^profile\s(["'])?([^\1]+)\1$/,uj=n(t=>Object.entries(t).filter(([e])=>I0.test(e)).reduce((e,[r,i])=>({...e,[I0.exec(r)[2]]:i}),{...t.default&&{default:t.default}}),"getProfileData");Mp.getProfileData=uj});var Fg=u(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.parseIni=void 0;var lj=["__proto__","profile __proto__"],pj=n(t=>{let e={},r;for(let i of t.split(/\r?\n/))if(i=i.split(/(^|\s)[;#]/)[0].trim(),i[0]==="["&&i[i.length-1]==="]"){if(r=i.substring(1,i.length-1),lj.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let o=i.indexOf("="),a=0,c=i.length-1;if(o!==-1&&o!==a&&o!==c){let[p,f]=[i.substring(0,o).trim(),i.substring(o+1).trim()];e[r]=e[r]||{},e[r][p]=f}}return e},"parseIni");Dp.parseIni=pj});var zg=u(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.slurpFile=void 0;var fj=U("fs"),{readFile:mj}=fj.promises,Lg={},hj=n(t=>(Lg[t]||(Lg[t]=mj(t,"utf8")),Lg[t]),"slurpFile");Fp.slurpFile=hj});var Ug=u(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.loadSharedConfigFiles=void 0;var _j=Dg(),yj=R0(),gj=q0(),C0=Fg(),k0=zg(),M0=n(()=>({}),"swallowError"),wj=n(async(t={})=>{let{filepath:e=(0,yj.getCredentialsFilepath)(),configFilepath:r=(0,_j.getConfigFilepath)()}=t,i=await Promise.all([(0,k0.slurpFile)(r).then(C0.parseIni).then(gj.getProfileData).catch(M0),(0,k0.slurpFile)(e).then(C0.parseIni).catch(M0)]);return{configFile:i[0],credentialsFile:i[1]}},"loadSharedConfigFiles");Lp.loadSharedConfigFiles=wj});var F0=u(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.getSsoSessionData=void 0;var D0=/^sso-session\s(["'])?([^\1]+)\1$/,vj=n(t=>Object.entries(t).filter(([e])=>D0.test(e)).reduce((e,[r,i])=>({...e,[D0.exec(r)[2]]:i}),{}),"getSsoSessionData");zp.getSsoSessionData=vj});var L0=u(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.loadSsoSessionData=void 0;var Ej=Dg(),Sj=F0(),Nj=Fg(),bj=zg(),xj=n(()=>({}),"swallowError"),Aj=n(async(t={})=>{var e;return(0,bj.slurpFile)((e=t.configFilepath)!==null&&e!==void 0?e:(0,Ej.getConfigFilepath)()).then(Nj.parseIni).then(Sj.getSsoSessionData).catch(xj)},"loadSsoSessionData");Up.loadSsoSessionData=Aj});var z0=u(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.parseKnownFiles=void 0;var Tj=Ug(),Oj=n(async t=>{let e=await(0,Tj.loadSharedConfigFiles)(t);return{...e.configFile,...e.credentialsFile}},"parseKnownFiles");Wp.parseKnownFiles=Oj});var W0=u(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0})});var br=u(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var tn=(A(),b(x));tn.__exportStar($c(),Nr);tn.__exportStar(O0(),Nr);tn.__exportStar(Mg(),Nr);tn.__exportStar(P0(),Nr);tn.__exportStar(Ug(),Nr);tn.__exportStar(L0(),Nr);tn.__exportStar(z0(),Nr);tn.__exportStar(W0(),Nr)});var Vp=u(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.httpRequest=void 0;var Wg=ee(),Pj=U("buffer"),Rj=U("http");function Ij(t){return new Promise((e,r)=>{var i;let s=(0,Rj.request)({method:"GET",...t,hostname:(i=t.hostname)===null||i===void 0?void 0:i.replace(/^\[(.+)\]$/,"$1")});s.on("error",o=>{r(Object.assign(new Wg.ProviderError("Unable to connect to instance metadata service"),o)),s.destroy()}),s.on("timeout",()=>{r(new Wg.ProviderError("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",o=>{let{statusCode:a=400}=o;(a<200||300<=a)&&(r(Object.assign(new Wg.ProviderError("Error response received from instance metadata service"),{statusCode:a})),s.destroy());let c=[];o.on("data",l=>{c.push(l)}),o.on("end",()=>{e(Pj.Buffer.concat(c)),s.destroy()})}),s.end()})}n(Ij,"httpRequest");jp.httpRequest=Ij});var jg=u(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.fromImdsCredentials=Fo.isImdsCredentials=void 0;var qj=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string","isImdsCredentials");Fo.isImdsCredentials=qj;var Cj=n(t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration)}),"fromImdsCredentials");Fo.fromImdsCredentials=Cj});var $p=u(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.providerConfigFromInit=xr.DEFAULT_MAX_RETRIES=xr.DEFAULT_TIMEOUT=void 0;xr.DEFAULT_TIMEOUT=1e3;xr.DEFAULT_MAX_RETRIES=0;var kj=n(({maxRetries:t=xr.DEFAULT_MAX_RETRIES,timeout:e=xr.DEFAULT_TIMEOUT})=>({maxRetries:t,timeout:e}),"providerConfigFromInit");xr.providerConfigFromInit=kj});var Vg=u(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.retry=void 0;var Mj=n((t,e)=>{let r=t();for(let i=0;i<e;i++)r=r.catch(t);return r},"retry");Hp.retry=Mj});var V0=u(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.fromContainerMetadata=Ce.ENV_CMDS_AUTH_TOKEN=Ce.ENV_CMDS_RELATIVE_URI=Ce.ENV_CMDS_FULL_URI=void 0;var Gp=ee(),Dj=U("url"),Fj=Vp(),j0=jg(),Lj=$p(),zj=Vg();Ce.ENV_CMDS_FULL_URI="AWS_CONTAINER_CREDENTIALS_FULL_URI";Ce.ENV_CMDS_RELATIVE_URI="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";Ce.ENV_CMDS_AUTH_TOKEN="AWS_CONTAINER_AUTHORIZATION_TOKEN";var Uj=n((t={})=>{let{timeout:e,maxRetries:r}=(0,Lj.providerConfigFromInit)(t);return()=>(0,zj.retry)(async()=>{let i=await Hj(),s=JSON.parse(await Wj(e,i));if(!(0,j0.isImdsCredentials)(s))throw new Gp.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,j0.fromImdsCredentials)(s)},r)},"fromContainerMetadata");Ce.fromContainerMetadata=Uj;var Wj=n(async(t,e)=>(process.env[Ce.ENV_CMDS_AUTH_TOKEN]&&(e.headers={...e.headers,Authorization:process.env[Ce.ENV_CMDS_AUTH_TOKEN]}),(await(0,Fj.httpRequest)({...e,timeout:t})).toString()),"requestFromEcsImds"),jj="169.254.170.2",Vj={localhost:!0,"127.0.0.1":!0},$j={"http:":!0,"https:":!0},Hj=n(async()=>{if(process.env[Ce.ENV_CMDS_RELATIVE_URI])return{hostname:jj,path:process.env[Ce.ENV_CMDS_RELATIVE_URI]};if(process.env[Ce.ENV_CMDS_FULL_URI]){let t=(0,Dj.parse)(process.env[Ce.ENV_CMDS_FULL_URI]);if(!t.hostname||!(t.hostname in Vj))throw new Gp.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,!1);if(!t.protocol||!(t.protocol in $j))throw new Gp.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,!1);return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Gp.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Ce.ENV_CMDS_RELATIVE_URI} or ${Ce.ENV_CMDS_FULL_URI} environment variable is set`,!1)},"getCmdsUri")});var $0=u(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.fromEnv=void 0;var Gj=ee(),Bj=n(t=>async()=>{try{let e=t(process.env);if(e===void 0)throw new Error;return e}catch(e){throw new Gj.CredentialsProviderError(e.message||`Cannot load config from environment variables with getter: ${t}`)}},"fromEnv");Bp.fromEnv=Bj});var G0=u(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.fromSharedConfigFiles=void 0;var Jj=ee(),H0=br(),Kj=n((t,{preferredFile:e="config",...r}={})=>async()=>{let i=(0,H0.getProfileName)(r),{configFile:s,credentialsFile:o}=await(0,H0.loadSharedConfigFiles)(r),a=o[i]||{},c=s[i]||{},l=e==="config"?{...a,...c}:{...c,...a};try{let p=t(l);if(p===void 0)throw new Error;return p}catch(p){throw new Jj.CredentialsProviderError(p.message||`Cannot load config for profile ${i} in SDK configuration files with getter: ${t}`)}},"fromSharedConfigFiles");Jp.fromSharedConfigFiles=Kj});var B0=u(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.fromStatic=void 0;var Yj=ee(),Qj=n(t=>typeof t=="function","isFunction"),Xj=n(t=>Qj(t)?async()=>await t():(0,Yj.fromStatic)(t),"fromStatic");Kp.fromStatic=Xj});var K0=u(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.loadConfig=void 0;var J0=ee(),Zj=$0(),eV=G0(),tV=B0(),rV=n(({environmentVariableSelector:t,configFileSelector:e,default:r},i={})=>(0,J0.memoize)((0,J0.chain)((0,Zj.fromEnv)(t),(0,eV.fromSharedConfigFiles)(e,i),(0,tV.fromStatic)(r))),"loadConfig");Yp.loadConfig=rV});var rn=u($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});var iV=(A(),b(x));iV.__exportStar(K0(),$g)});var Y0=u(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.Endpoint=void 0;var nV;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(nV=Hc.Endpoint||(Hc.Endpoint={}))});var Q0=u(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.ENDPOINT_CONFIG_OPTIONS=Ar.CONFIG_ENDPOINT_NAME=Ar.ENV_ENDPOINT_NAME=void 0;Ar.ENV_ENDPOINT_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT";Ar.CONFIG_ENDPOINT_NAME="ec2_metadata_service_endpoint";Ar.ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>t[Ar.ENV_ENDPOINT_NAME],configFileSelector:t=>t[Ar.CONFIG_ENDPOINT_NAME],default:void 0}});var Hg=u(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.EndpointMode=void 0;var sV;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(sV=Gc.EndpointMode||(Gc.EndpointMode={}))});var X0=u(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ENDPOINT_MODE_CONFIG_OPTIONS=Tr.CONFIG_ENDPOINT_MODE_NAME=Tr.ENV_ENDPOINT_MODE_NAME=void 0;var oV=Hg();Tr.ENV_ENDPOINT_MODE_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE";Tr.CONFIG_ENDPOINT_MODE_NAME="ec2_metadata_service_endpoint_mode";Tr.ENDPOINT_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[Tr.ENV_ENDPOINT_MODE_NAME],configFileSelector:t=>t[Tr.CONFIG_ENDPOINT_MODE_NAME],default:oV.EndpointMode.IPv4}});var Bg=u(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.getInstanceMetadataEndpoint=void 0;var ex=rn(),aV=Mn(),Z0=Y0(),cV=Q0(),Gg=Hg(),dV=X0(),uV=n(async()=>(0,aV.parseUrl)(await lV()||await pV()),"getInstanceMetadataEndpoint");Qp.getInstanceMetadataEndpoint=uV;var lV=n(async()=>(0,ex.loadConfig)(cV.ENDPOINT_CONFIG_OPTIONS)(),"getFromEndpointConfig"),pV=n(async()=>{let t=await(0,ex.loadConfig)(dV.ENDPOINT_MODE_CONFIG_OPTIONS)();switch(t){case Gg.EndpointMode.IPv4:return Z0.Endpoint.IPv4;case Gg.EndpointMode.IPv6:return Z0.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(Gg.EndpointMode)}`)}},"getFromEndpointModeConfig")});var tx=u(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.getExtendedInstanceMetadataCredentials=void 0;var fV=5*60,mV=5*60,hV="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",_V=n((t,e)=>{var r;let i=fV+Math.floor(Math.random()*mV),s=new Date(Date.now()+i*1e3);e.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+hV);let o=(r=t.originalExpiration)!==null&&r!==void 0?r:t.expiration;return{...t,...o?{originalExpiration:o}:{},expiration:s}},"getExtendedInstanceMetadataCredentials");Xp.getExtendedInstanceMetadataCredentials=_V});var ix=u(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.staticStabilityProvider=void 0;var rx=tx(),yV=n((t,e={})=>{let r=e?.logger||console,i;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=(0,rx.getExtendedInstanceMetadataCredentials)(s,r))}catch(o){if(i)r.warn("Credential renew failed: ",o),s=(0,rx.getExtendedInstanceMetadataCredentials)(i,r);else throw o}return i=s,s}},"staticStabilityProvider");Zp.staticStabilityProvider=yV});var ax=u(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.fromInstanceMetadata=void 0;var gV=ee(),Jg=Vp(),nx=jg(),wV=$p(),sx=Vg(),vV=Bg(),EV=ix(),ox="/latest/meta-data/iam/security-credentials/",SV="/latest/api/token",NV=n((t={})=>(0,EV.staticStabilityProvider)(bV(t),{logger:t.logger}),"fromInstanceMetadata");ef.fromInstanceMetadata=NV;var bV=n(t=>{let e=!1,{timeout:r,maxRetries:i}=(0,wV.providerConfigFromInit)(t),s=n(async(o,a)=>{let c=(await(0,sx.retry)(async()=>{let l;try{l=await AV(a)}catch(p){throw p.statusCode===401&&(e=!1),p}return l},o)).trim();return(0,sx.retry)(async()=>{let l;try{l=await TV(c,a)}catch(p){throw p.statusCode===401&&(e=!1),p}return l},o)},"getCredentials");return async()=>{let o=await(0,vV.getInstanceMetadataEndpoint)();if(e)return s(i,{...o,timeout:r});{let a;try{a=(await xV({...o,timeout:r})).toString()}catch(c){if(c?.statusCode===400)throw Object.assign(c,{message:"EC2 Metadata token request returned error"});return(c.message==="TimeoutError"||[403,404,405].includes(c.statusCode))&&(e=!0),s(i,{...o,timeout:r})}return s(i,{...o,headers:{"x-aws-ec2-metadata-token":a},timeout:r})}}},"getInstanceImdsProvider"),xV=n(async t=>(0,Jg.httpRequest)({...t,path:SV,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),AV=n(async t=>(await(0,Jg.httpRequest)({...t,path:ox})).toString(),"getProfile"),TV=n(async(t,e)=>{let r=JSON.parse((await(0,Jg.httpRequest)({...e,path:ox+t})).toString());if(!(0,nx.isImdsCredentials)(r))throw new gV.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,nx.fromImdsCredentials)(r)},"getCredentialsFromProfile")});var dx=u(cx=>{"use strict";Object.defineProperty(cx,"__esModule",{value:!0})});var rf=u(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.getInstanceMetadataEndpoint=Or.httpRequest=void 0;var tf=(A(),b(x));tf.__exportStar(V0(),Or);tf.__exportStar(ax(),Or);tf.__exportStar($p(),Or);tf.__exportStar(dx(),Or);var OV=Vp();Object.defineProperty(Or,"httpRequest",{enumerable:!0,get:function(){return OV.httpRequest}});var PV=Bg();Object.defineProperty(Or,"getInstanceMetadataEndpoint",{enumerable:!0,get:function(){return PV.getInstanceMetadataEndpoint}})});var lx=u(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.resolveCredentialSource=void 0;var RV=kg(),ux=rf(),IV=ee(),qV=n((t,e)=>{let r={EcsContainer:ux.fromContainerMetadata,Ec2InstanceMetadata:ux.fromInstanceMetadata,Environment:RV.fromEnv};if(t in r)return r[t]();throw new IV.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)},"resolveCredentialSource");nf.resolveCredentialSource=qV});var px=u(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.resolveAssumeRoleCredentials=Lo.isAssumeRoleProfile=void 0;var Kg=ee(),CV=br(),kV=lx(),MV=Yg(),DV=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(FV(t)||LV(t)),"isAssumeRoleProfile");Lo.isAssumeRoleProfile=DV;var FV=n(t=>typeof t.source_profile=="string"&&typeof t.credential_source>"u","isAssumeRoleWithSourceProfile"),LV=n(t=>typeof t.credential_source=="string"&&typeof t.source_profile>"u","isAssumeRoleWithProviderProfile"),zV=n(async(t,e,r,i={})=>{let s=e[t];if(!r.roleAssumer)throw new Kg.CredentialsProviderError(`Profile ${t} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=s;if(o&&o in i)throw new Kg.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,CV.getProfileName)(r)}. Profiles visited: `+Object.keys(i).join(", "),!1);let a=o?(0,MV.resolveProfileData)(o,e,r,{...i,[o]:!0}):(0,kV.resolveCredentialSource)(s.credential_source,t)(),c={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id},{mfa_serial:l}=s;if(l){if(!r.mfaCodeProvider)throw new Kg.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,!1);c.SerialNumber=l,c.TokenCode=await r.mfaCodeProvider(l)}let p=await a;return r.roleAssumer(p,c)},"resolveAssumeRoleCredentials");Lo.resolveAssumeRoleCredentials=zV});var fx=u(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.getValidatedProcessCredentials=void 0;var UV=n((t,e)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let r=new Date;if(new Date(e.Expiration)<r)throw Error(`Profile ${t} credential_process returned expired credentials.`)}return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)}}},"getValidatedProcessCredentials");sf.getValidatedProcessCredentials=UV});var mx=u(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.resolveProcessCredentials=void 0;var Qg=ee(),WV=U("child_process"),jV=U("util"),VV=fx(),$V=n(async(t,e)=>{let r=e[t];if(e[t]){let i=r.credential_process;if(i!==void 0){let s=(0,jV.promisify)(WV.exec);try{let{stdout:o}=await s(i),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return(0,VV.getValidatedProcessCredentials)(t,a)}catch(o){throw new Qg.CredentialsProviderError(o.message)}}else throw new Qg.CredentialsProviderError(`Profile ${t} did not contain credential_process.`)}else throw new Qg.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`)},"resolveProcessCredentials");of.resolveProcessCredentials=$V});var _x=u(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.fromProcess=void 0;var hx=br(),HV=mx(),GV=n((t={})=>async()=>{let e=await(0,hx.parseKnownFiles)(t);return(0,HV.resolveProcessCredentials)((0,hx.getProfileName)(t),e)},"fromProcess");af.fromProcess=GV});var Zg=u(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});var BV=(A(),b(x));BV.__exportStar(_x(),Xg)});var yx=u(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.resolveProcessCredentials=zo.isProcessProfile=void 0;var JV=Zg(),KV=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.credential_process=="string","isProcessProfile");zo.isProcessProfile=KV;var YV=n(async(t,e)=>(0,JV.fromProcess)({...t,profile:e})(),"resolveProcessCredentials");zo.resolveProcessCredentials=YV});var ew=u(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.isSsoProfile=void 0;var QV=n(t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),"isSsoProfile");cf.isSsoProfile=QV});var uf=u(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});df.SSOServiceException=void 0;var XV=C(),Uo=class extends XV.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Uo.prototype)}};n(Uo,"SSOServiceException");df.SSOServiceException=Uo});var Xn=u(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.LogoutRequestFilterSensitiveLog=B.ListAccountsResponseFilterSensitiveLog=B.ListAccountsRequestFilterSensitiveLog=B.ListAccountRolesResponseFilterSensitiveLog=B.RoleInfoFilterSensitiveLog=B.ListAccountRolesRequestFilterSensitiveLog=B.GetRoleCredentialsResponseFilterSensitiveLog=B.RoleCredentialsFilterSensitiveLog=B.GetRoleCredentialsRequestFilterSensitiveLog=B.AccountInfoFilterSensitiveLog=B.UnauthorizedException=B.TooManyRequestsException=B.ResourceNotFoundException=B.InvalidRequestException=void 0;var Ho=C(),lf=uf(),Wo=class extends lf.SSOServiceException{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Wo.prototype)}};n(Wo,"InvalidRequestException");B.InvalidRequestException=Wo;var jo=class extends lf.SSOServiceException{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,jo.prototype)}};n(jo,"ResourceNotFoundException");B.ResourceNotFoundException=jo;var Vo=class extends lf.SSOServiceException{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Vo.prototype)}};n(Vo,"TooManyRequestsException");B.TooManyRequestsException=Vo;var $o=class extends lf.SSOServiceException{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,$o.prototype)}};n($o,"UnauthorizedException");B.UnauthorizedException=$o;var ZV=n(t=>({...t}),"AccountInfoFilterSensitiveLog");B.AccountInfoFilterSensitiveLog=ZV;var e2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog");B.GetRoleCredentialsRequestFilterSensitiveLog=e2;var t2=n(t=>({...t,...t.secretAccessKey&&{secretAccessKey:Ho.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:Ho.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog");B.RoleCredentialsFilterSensitiveLog=t2;var r2=n(t=>({...t,...t.roleCredentials&&{roleCredentials:(0,B.RoleCredentialsFilterSensitiveLog)(t.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog");B.GetRoleCredentialsResponseFilterSensitiveLog=r2;var i2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog");B.ListAccountRolesRequestFilterSensitiveLog=i2;var n2=n(t=>({...t}),"RoleInfoFilterSensitiveLog");B.RoleInfoFilterSensitiveLog=n2;var s2=n(t=>({...t}),"ListAccountRolesResponseFilterSensitiveLog");B.ListAccountRolesResponseFilterSensitiveLog=s2;var o2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog");B.ListAccountsRequestFilterSensitiveLog=o2;var a2=n(t=>({...t}),"ListAccountsResponseFilterSensitiveLog");B.ListAccountsResponseFilterSensitiveLog=a2;var c2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog");B.LogoutRequestFilterSensitiveLog=c2});var Bc=u(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.deserializeAws_restJson1LogoutCommand=ke.deserializeAws_restJson1ListAccountsCommand=ke.deserializeAws_restJson1ListAccountRolesCommand=ke.deserializeAws_restJson1GetRoleCredentialsCommand=ke.serializeAws_restJson1LogoutCommand=ke.serializeAws_restJson1ListAccountsCommand=ke.serializeAws_restJson1ListAccountRolesCommand=ke.serializeAws_restJson1GetRoleCredentialsCommand=void 0;var pf=tt(),$=C(),ff=Xn(),mf=uf(),d2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,l=rt({role_name:[,(0,$.expectNonNull)(t.roleName,"roleName")],account_id:[,(0,$.expectNonNull)(t.accountId,"accountId")]}),p;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1GetRoleCredentialsCommand");ke.serializeAws_restJson1GetRoleCredentialsCommand=d2;var u2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/roles`,l=rt({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()],account_id:[,(0,$.expectNonNull)(t.accountId,"accountId")]}),p;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1ListAccountRolesCommand");ke.serializeAws_restJson1ListAccountRolesCommand=u2;var l2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/accounts`,l=rt({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()]}),p;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1ListAccountsCommand");ke.serializeAws_restJson1ListAccountsCommand=l2;var p2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/logout`,l;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1LogoutCommand");ke.serializeAws_restJson1LogoutCommand=p2;var f2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return m2(t,e);let r=rt({$metadata:nn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await wf(t.body,e)),"body");return i.roleCredentials!=null&&(r.roleCredentials=N2(i.roleCredentials,e)),r},"deserializeAws_restJson1GetRoleCredentialsCommand");ke.deserializeAws_restJson1GetRoleCredentialsCommand=f2;var m2=n(async(t,e)=>{let r={...t,body:await vf(t.body,e)},i=Ef(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await tw(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1GetRoleCredentialsCommandError"),h2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return _2(t,e);let r=rt({$metadata:nn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await wf(t.body,e)),"body");return i.nextToken!=null&&(r.nextToken=(0,$.expectString)(i.nextToken)),i.roleList!=null&&(r.roleList=x2(i.roleList,e)),r},"deserializeAws_restJson1ListAccountRolesCommand");ke.deserializeAws_restJson1ListAccountRolesCommand=h2;var _2=n(async(t,e)=>{let r={...t,body:await vf(t.body,e)},i=Ef(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await tw(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1ListAccountRolesCommandError"),y2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return g2(t,e);let r=rt({$metadata:nn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await wf(t.body,e)),"body");return i.accountList!=null&&(r.accountList=S2(i.accountList,e)),i.nextToken!=null&&(r.nextToken=(0,$.expectString)(i.nextToken)),r},"deserializeAws_restJson1ListAccountsCommand");ke.deserializeAws_restJson1ListAccountsCommand=y2;var g2=n(async(t,e)=>{let r={...t,body:await vf(t.body,e)},i=Ef(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await tw(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1ListAccountsCommandError"),w2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return v2(t,e);let r=rt({$metadata:nn(t)});return await gx(t.body,e),r},"deserializeAws_restJson1LogoutCommand");ke.deserializeAws_restJson1LogoutCommand=w2;var v2=n(async(t,e)=>{let r={...t,body:await vf(t.body,e)},i=Ef(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1LogoutCommandError"),rt=$.map,hf=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.InvalidRequestException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidRequestExceptionResponse"),tw=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.ResourceNotFoundException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ResourceNotFoundExceptionResponse"),_f=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.TooManyRequestsException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1TooManyRequestsExceptionResponse"),yf=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.UnauthorizedException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnauthorizedExceptionResponse"),E2=n((t,e)=>({accountId:(0,$.expectString)(t.accountId),accountName:(0,$.expectString)(t.accountName),emailAddress:(0,$.expectString)(t.emailAddress)}),"deserializeAws_restJson1AccountInfo"),S2=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:E2(i,e)),"deserializeAws_restJson1AccountListType"),N2=n((t,e)=>({accessKeyId:(0,$.expectString)(t.accessKeyId),expiration:(0,$.expectLong)(t.expiration),secretAccessKey:(0,$.expectString)(t.secretAccessKey),sessionToken:(0,$.expectString)(t.sessionToken)}),"deserializeAws_restJson1RoleCredentials"),b2=n((t,e)=>({accountId:(0,$.expectString)(t.accountId),roleName:(0,$.expectString)(t.roleName)}),"deserializeAws_restJson1RoleInfo"),x2=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:b2(i,e)),"deserializeAws_restJson1RoleListType"),nn=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),gx=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),A2=n((t,e)=>gx(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),gf=n(t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),"isSerializableHeaderValue"),wf=n((t,e)=>A2(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),vf=n(async(t,e)=>{let r=await wf(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),Ef=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var rw=u(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.GetRoleCredentialsCommand=void 0;var T2=ne(),O2=me(),P2=C(),wx=Xn(),vx=Bc(),Go=class extends P2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,O2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,T2.getEndpointPlugin)(r,Go.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:wx.GetRoleCredentialsRequestFilterSensitiveLog,outputFilterSensitiveLog:wx.GetRoleCredentialsResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,vx.serializeAws_restJson1GetRoleCredentialsCommand)(e,r)}deserialize(e,r){return(0,vx.deserializeAws_restJson1GetRoleCredentialsCommand)(e,r)}};n(Go,"GetRoleCredentialsCommand");Sf.GetRoleCredentialsCommand=Go});var bf=u(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.ListAccountRolesCommand=void 0;var R2=ne(),I2=me(),q2=C(),Ex=Xn(),Sx=Bc(),Bo=class extends q2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,I2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,R2.getEndpointPlugin)(r,Bo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"ListAccountRolesCommand",inputFilterSensitiveLog:Ex.ListAccountRolesRequestFilterSensitiveLog,outputFilterSensitiveLog:Ex.ListAccountRolesResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,Sx.serializeAws_restJson1ListAccountRolesCommand)(e,r)}deserialize(e,r){return(0,Sx.deserializeAws_restJson1ListAccountRolesCommand)(e,r)}};n(Bo,"ListAccountRolesCommand");Nf.ListAccountRolesCommand=Bo});var Af=u(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.ListAccountsCommand=void 0;var C2=ne(),k2=me(),M2=C(),Nx=Xn(),bx=Bc(),Jo=class extends M2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,k2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,C2.getEndpointPlugin)(r,Jo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"ListAccountsCommand",inputFilterSensitiveLog:Nx.ListAccountsRequestFilterSensitiveLog,outputFilterSensitiveLog:Nx.ListAccountsResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,bx.serializeAws_restJson1ListAccountsCommand)(e,r)}deserialize(e,r){return(0,bx.deserializeAws_restJson1ListAccountsCommand)(e,r)}};n(Jo,"ListAccountsCommand");xf.ListAccountsCommand=Jo});var iw=u(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.LogoutCommand=void 0;var D2=ne(),F2=me(),L2=C(),z2=Xn(),xx=Bc(),Ko=class extends L2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,F2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,D2.getEndpointPlugin)(r,Ko.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"LogoutCommand",inputFilterSensitiveLog:z2.LogoutRequestFilterSensitiveLog,outputFilterSensitiveLog:f=>f},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,xx.serializeAws_restJson1LogoutCommand)(e,r)}deserialize(e,r){return(0,xx.deserializeAws_restJson1LogoutCommand)(e,r)}};n(Ko,"LogoutCommand");Tf.LogoutCommand=Ko});var Ax=u(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.resolveClientEndpointParameters=void 0;var U2=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters");Of.resolveClientEndpointParameters=U2});var Tx=u((Nhe,W2)=>{W2.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Jc=u(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.Hash=void 0;var nw=_o(),j2=di(),V2=U("buffer"),Ox=U("crypto"),Pf=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update((0,j2.toUint8Array)(Px(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Ox.createHmac)(this.algorithmIdentifier,Px(this.secret)):(0,Ox.createHash)(this.algorithmIdentifier)}};n(Pf,"Hash");Rf.Hash=Pf;function Px(t,e){return V2.Buffer.isBuffer(t)?t:typeof t=="string"?(0,nw.fromString)(t,e):ArrayBuffer.isView(t)?(0,nw.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength):(0,nw.fromArrayBuffer)(t)}n(Px,"castSourceData")});var ow=u(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.buildQueryString=void 0;var sw=og();function $2(t){let e=[];for(let r of Object.keys(t).sort()){let i=t[r];if(r=(0,sw.escapeUri)(r),Array.isArray(i))for(let s=0,o=i.length;s<o;s++)e.push(`${r}=${(0,sw.escapeUri)(i[s])}`);else{let s=r;(i||typeof i=="string")&&(s+=`=${(0,sw.escapeUri)(i)}`),e.push(s)}}return e.join("&")}n($2,"buildQueryString");If.buildQueryString=$2});var Rx=u(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.NODEJS_TIMEOUT_ERROR_CODES=void 0;qf.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var aw=u(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.getTransformedHeaders=void 0;var H2=n(t=>{let e={};for(let r of Object.keys(t)){let i=t[r];e[r]=Array.isArray(i)?i.join(","):i}return e},"getTransformedHeaders");Cf.getTransformedHeaders=H2});var Ix=u(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.setConnectionTimeout=void 0;var G2=n((t,e,r=0)=>{r&&t.on("socket",i=>{if(i.connecting){let s=setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);i.on("connect",()=>{clearTimeout(s)})}})},"setConnectionTimeout");kf.setConnectionTimeout=G2});var qx=u(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.setSocketTimeout=void 0;var B2=n((t,e,r=0)=>{t.setTimeout(r,()=>{t.destroy(),e(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})},"setSocketTimeout");Mf.setSocketTimeout=B2});var cw=u(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.writeRequestBody=void 0;var J2=U("stream");function K2(t,e){(e.headers.Expect||e.headers.expect)==="100-continue"?t.on("continue",()=>{Cx(t,e.body)}):Cx(t,e.body)}n(K2,"writeRequestBody");Df.writeRequestBody=K2;function Cx(t,e){e instanceof J2.Readable?e.pipe(t):e?t.end(Buffer.from(e)):t.end()}n(Cx,"writeBody")});var Dx=u(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.NodeHttpHandler=void 0;var Y2=tt(),Q2=ow(),kx=U("http"),Mx=U("https"),X2=Rx(),Z2=aw(),e$=Ix(),t$=qx(),r$=cw(),Ff=class{constructor(e){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,i)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(i):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{connectionTimeout:r,socketTimeout:i,httpAgent:s,httpsAgent:o}=e||{},a=!0,c=50;return{connectionTimeout:r,socketTimeout:i,httpAgent:s||new kx.Agent({keepAlive:a,maxSockets:c}),httpsAgent:o||new Mx.Agent({keepAlive:a,maxSockets:c})}}destroy(){var e,r,i,s;(r=(e=this.config)===null||e===void 0?void 0:e.httpAgent)===null||r===void 0||r.destroy(),(s=(i=this.config)===null||i===void 0?void 0:i.httpsAgent)===null||s===void 0||s.destroy()}async handle(e,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((i,s)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let f=new Error("Request aborted");f.name="AbortError",s(f);return}let o=e.protocol==="https:",a=(0,Q2.buildQueryString)(e.query||{}),c={headers:e.headers,host:e.hostname,method:e.method,path:a?`${e.path}?${a}`:e.path,port:e.port,agent:o?this.config.httpsAgent:this.config.httpAgent},p=(o?Mx.request:kx.request)(c,f=>{let m=new Y2.HttpResponse({statusCode:f.statusCode||-1,headers:(0,Z2.getTransformedHeaders)(f.headers),body:f});i({response:m})});p.on("error",f=>{X2.NODEJS_TIMEOUT_ERROR_CODES.includes(f.code)?s(Object.assign(f,{name:"TimeoutError"})):s(f)}),(0,e$.setConnectionTimeout)(p,s,this.config.connectionTimeout),(0,t$.setSocketTimeout)(p,s,this.config.socketTimeout),r&&(r.onabort=()=>{p.abort();let f=new Error("Request aborted");f.name="AbortError",s(f)}),(0,r$.writeRequestBody)(p,e)})}};n(Ff,"NodeHttpHandler");Lf.NodeHttpHandler=Ff});var Fx=u(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.NodeHttp2Handler=void 0;var i$=tt(),n$=ow(),dw=U("http2"),s$=aw(),o$=cw(),zf=class{constructor(e){this.metadata={handlerProtocol:"h2"},this.configProvider=new Promise((r,i)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(i):r(e||{})}),this.sessionCache=new Map}destroy(){for(let e of this.sessionCache.values())e.forEach(r=>this.destroySession(r));this.sessionCache.clear()}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let{requestTimeout:i,disableConcurrentStreams:s}=this.config;return new Promise((o,a)=>{let c=!1;if(r?.aborted){c=!0;let Ne=new Error("Request aborted");Ne.name="AbortError",a(Ne);return}let{hostname:l,method:p,port:f,protocol:m,path:h,query:_}=e,w=`${m}//${l}${f?`:${f}`:""}`,g=this.getSession(w,s||!1),S=n(Ne=>{s&&this.destroySession(g),c=!0,a(Ne)},"reject"),ie=(0,n$.buildQueryString)(_||{}),Ie=g.request({...e.headers,[dw.constants.HTTP2_HEADER_PATH]:ie?`${h}?${ie}`:h,[dw.constants.HTTP2_HEADER_METHOD]:p});g.ref(),Ie.on("response",Ne=>{let Wd=new i$.HttpResponse({statusCode:Ne[":status"]||-1,headers:(0,s$.getTransformedHeaders)(Ne),body:Ie});c=!0,o({response:Wd}),s&&(g.close(),this.deleteSessionFromCache(w,g))}),i&&Ie.setTimeout(i,()=>{Ie.close();let Ne=new Error(`Stream timed out because of no activity for ${i} ms`);Ne.name="TimeoutError",S(Ne)}),r&&(r.onabort=()=>{Ie.close();let Ne=new Error("Request aborted");Ne.name="AbortError",S(Ne)}),Ie.on("frameError",(Ne,Wd,Pv)=>{S(new Error(`Frame type id ${Ne} in stream id ${Pv} has failed with code ${Wd}.`))}),Ie.on("error",S),Ie.on("aborted",()=>{S(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${Ie.rstCode}.`))}),Ie.on("close",()=>{g.unref(),s&&g.destroy(),c||S(new Error("Unexpected error: http2 request did not get a response"))}),(0,o$.writeRequestBody)(Ie,e)})}getSession(e,r){var i;let s=this.sessionCache,o=s.get(e)||[];if(o.length>0&&!r)return o[0];let a=(0,dw.connect)(e);a.unref();let c=n(()=>{this.destroySession(a),this.deleteSessionFromCache(e,a)},"destroySessionCb");return a.on("goaway",c),a.on("error",c),a.on("frameError",c),a.on("close",()=>this.deleteSessionFromCache(e,a)),!((i=this.config)===null||i===void 0)&&i.sessionTimeout&&a.setTimeout(this.config.sessionTimeout,c),o.push(a),s.set(e,o),a}destroySession(e){e.destroyed||e.destroy()}deleteSessionFromCache(e,r){let i=this.sessionCache.get(e)||[];i.includes(r)&&this.sessionCache.set(e,i.filter(s=>s!==r))}};n(zf,"NodeHttp2Handler");Uf.NodeHttp2Handler=zf});var Lx=u(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.Collector=void 0;var a$=U("stream"),Wf=class extends a$.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,i){this.bufferedBytes.push(e),i()}};n(Wf,"Collector");jf.Collector=Wf});var zx=u(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.streamCollector=void 0;var c$=Lx(),d$=n(t=>new Promise((e,r)=>{let i=new c$.Collector;t.pipe(i),t.on("error",s=>{i.end(),r(s)}),i.on("error",r),i.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),"streamCollector");Vf.streamCollector=d$});var Yc=u(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var uw=(A(),b(x));uw.__exportStar(Dx(),Kc);uw.__exportStar(Fx(),Kc);uw.__exportStar(zx(),Kc)});var Wx=u($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.calculateBodyLength=void 0;var Ux=U("fs"),u$=n(t=>{if(!t)return 0;if(typeof t=="string")return Buffer.from(t).length;if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return(0,Ux.lstatSync)(t.path).size;if(typeof t.fd=="number")return(0,Ux.fstatSync)(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)},"calculateBodyLength");$f.calculateBodyLength=u$});var Qc=u(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});var l$=(A(),b(x));l$.__exportStar(Wx(),lw)});var jx=u((Khe,p$)=>{p$.exports={name:"aws-crt",version:"1.15.9",description:"NodeJS/browser bindings to the aws-c-* libraries",homepage:"https://github.com/awslabs/aws-crt-nodejs",repository:{type:"git",url:"git+https://github.com/awslabs/aws-crt-nodejs.git"},contributors:["AWS Common Runtime Team <aws-sdk-common-runtime@amazon.com>"],license:"Apache-2.0",main:"./dist/index.js",browser:"./dist.browser/browser.js",types:"./dist/index.d.ts",scripts:{tsc:"node ./scripts/tsc.js",test:"npm run test:native","test:node":"npm run test:native","test:native":"npx jest --runInBand --verbose --config test/native/jest.config.js --forceExit","test:browser":"npx jest --runInBand --verbose --config test/browser/jest.config.js --forceExit","test:browser:ci":"npm run install:puppeteer && npm run test:browser","install:puppeteer":"npm install --save-dev jest-puppeteer puppeteer @types/puppeteer",prepare:"node ./scripts/tsc.js && node ./scripts/install.js",install:"node ./scripts/install.js"},devDependencies:{"@types/crypto-js":"^3.1.43","@types/jest":"^27.0.1","@types/node":"^10.17.54","@types/prettier":"2.6.0","@types/puppeteer":"^5.4.4","@types/uuid":"^3.4.8","@types/ws":"^7.4.7","aws-sdk":"^2.848.0","https-proxy-agent":"^5.0.1",jest:"^27.2.1","jest-puppeteer":"^5.0.4","jest-runtime":"^27.2.1",puppeteer:"^3.3.0","ts-jest":"^27.0.5",typedoc:"^0.22.18","typedoc-plugin-merge-modules":"^3.1.0",typescript:"^4.7.4",uuid:"^8.3.2",yargs:"^17.2.1","cmake-js":"^6.3.2",tar:"^6.1.11"},dependencies:{"@aws-sdk/util-utf8-browser":"^3.109.0","@httptoolkit/websocket-stream":"^6.0.0",axios:"^0.24.0","crypto-js":"^4.0.0",mqtt:"^4.3.7","cmake-js":"^6.3.2",tar:"^6.1.11"}}});var Hf=u(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.crt_version=Pr.package_info=Pr.is_browser=Pr.is_nodejs=void 0;function Vx(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"}n(Vx,"is_nodejs");Pr.is_nodejs=Vx;function f$(){return!Vx()}n(f$,"is_browser");Pr.is_browser=f$;function $x(){try{return jx()}catch{return{name:"aws-crt-nodejs",version:"UNKNOWN"}}}n($x,"package_info");Pr.package_info=$x;function m$(){return $x().version}n(m$,"crt_version");Pr.crt_version=m$});var Hx=u(Yo=>{"use strict";var h$=Yo&&Yo.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.using=void 0;function _$(t,e){return h$(this,void 0,void 0,function*(){try{yield e(t)}finally{t.close()}})}n(_$,"using");Yo.using=_$});var Rr=u(mi=>{"use strict";var y$=mi&&mi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),g$=mi&&mi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),w$=mi&&mi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&y$(e,t,r);return g$(e,t),e};Object.defineProperty(mi,"__esModule",{value:!0});var Gf=w$(U("path")),Gx=U("os"),Yx=U("fs"),Bx=U("process"),Jx="Please upgrade to node >=10.16.0, or use the provided browser implementation.";if("napi"in Bx.versions){if(parseInt(Bx.versions.napi)<4)throw new Error("The AWS CRT native implementation requires that NAPI version 4 be present. "+Jx)}else throw new Error("The current runtime is not reporting an NAPI version. "+Jx);var v$="aws-crt-nodejs",E$=`${Gx.platform}-${Gx.arch}`,pw=Gf.resolve(__dirname,"..",".."),Kx=Gf.join(pw,"dist");(0,Yx.existsSync)(Kx)&&(pw=Kx);var S$=Gf.resolve(pw,"bin"),Qx=[Gf.join(S$,E$,v$)],fw;for(let t of Qx)if((0,Yx.existsSync)(t+".node")){fw=U(t);break}if(fw==null)throw new Error(`AWS CRT binary not present in any of the following locations:
	`+Qx.join(`
	`));mi.default=fw});var sn=u(Qo=>{"use strict";var N$=Qo&&Qo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.CrtError=void 0;var Xx=N$(Rr()),Zn=class extends Error{constructor(e){super(b$(e)),this.error=e,this.error_code=x$(e),this.error_name=A$(e)}};n(Zn,"CrtError");Qo.CrtError=Zn;function b$(t){return typeof t=="number"?Xx.default.error_code_to_string(t):t instanceof Zn?t.message:t.toString()}n(b$,"extract_message");function x$(t){if(typeof t=="number")return t;if(t instanceof Zn)return t.error_code}n(x$,"extract_code");function A$(t){if(typeof t=="number")return Xx.default.error_code_to_name(t);if(t instanceof Zn)return t.error_name}n(A$,"extract_name")});var Zo=u(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.NativeResourceMixin=Xo.NativeResource=void 0;var Bf=class{constructor(e){this.handle=e}native_handle(){return this.handle}};n(Bf,"NativeResource");Xo.NativeResource=Bf;function T$(t){return class extends t{constructor(...e){let r=e.shift();super(...e),this._handle=r}_super(e){this._handle=e}native_handle(){return this._handle}}}n(T$,"NativeResourceMixin");Xo.NativeResourceMixin=T$});var mw=u(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.SocketDomain=er.SocketType=er.TlsVersion=void 0;var O$;(function(t){t[t.SSLv3=0]="SSLv3",t[t.TLSv1=1]="TLSv1",t[t.TLSv1_1=2]="TLSv1_1",t[t.TLSv1_2=3]="TLSv1_2",t[t.TLSv1_3=4]="TLSv1_3",t[t.Default=128]="Default"})(O$=er.TlsVersion||(er.TlsVersion={}));var P$;(function(t){t[t.STREAM=0]="STREAM",t[t.DGRAM=1]="DGRAM"})(P$=er.SocketType||(er.SocketType={}));var R$;(function(t){t[t.IPV4=0]="IPV4",t[t.IPV6=1]="IPV6",t[t.LOCAL=2]="LOCAL"})(R$=er.SocketDomain||(er.SocketDomain={}))});var on=u(D=>{"use strict";var I$=D&&D.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(D,"__esModule",{value:!0});D.Pkcs11Lib=D.TlsConnectionOptions=D.ServerTlsContext=D.ClientTlsContext=D.TlsContext=D.TlsContextOptions=D.SocketOptions=D.ClientBootstrap=D.InputStream=D.is_alpn_available=D.enable_logging=D.LogLevel=D.error_code_to_name=D.error_code_to_string=D.SocketDomain=D.SocketType=D.TlsVersion=void 0;var At=I$(Rr()),ta=Zo(),hw=mw(),_w=mw();Object.defineProperty(D,"TlsVersion",{enumerable:!0,get:function(){return _w.TlsVersion}});Object.defineProperty(D,"SocketType",{enumerable:!0,get:function(){return _w.SocketType}});Object.defineProperty(D,"SocketDomain",{enumerable:!0,get:function(){return _w.SocketDomain}});function q$(t){return At.default.error_code_to_string(t)}n(q$,"error_code_to_string");D.error_code_to_string=q$;function C$(t){return At.default.error_code_to_name(t)}n(C$,"error_code_to_name");D.error_code_to_name=C$;var k$;(function(t){t[t.NONE=0]="NONE",t[t.FATAL=1]="FATAL",t[t.ERROR=2]="ERROR",t[t.WARN=3]="WARN",t[t.INFO=4]="INFO",t[t.DEBUG=5]="DEBUG",t[t.TRACE=6]="TRACE"})(k$=D.LogLevel||(D.LogLevel={}));function M$(t){At.default.io_logging_enable(t)}n(M$,"enable_logging");D.enable_logging=M$;function D$(){return At.default.is_alpn_available()}n(D$,"is_alpn_available");D.is_alpn_available=D$;var Jf=class extends ta.NativeResource{constructor(e){super(At.default.io_input_stream_new(16*1024)),this.source=e,this.source.on("data",r=>{r=Buffer.isBuffer(r)?r:new Buffer(r.toString(),"utf8"),At.default.io_input_stream_append(this.native_handle(),r)}),this.source.on("end",()=>{At.default.io_input_stream_append(this.native_handle(),void 0)})}};n(Jf,"InputStream");D.InputStream=Jf;var Kf=class extends ta.NativeResource{constructor(){super(At.default.io_client_bootstrap_new())}};n(Kf,"ClientBootstrap");D.ClientBootstrap=Kf;var Yf=class extends ta.NativeResource{constructor(e=hw.SocketType.STREAM,r=hw.SocketDomain.IPV6,i=5e3,s=!1,o=0,a=0,c=0){super(At.default.io_socket_options_new(e,r,i,o,a,c,s))}};n(Yf,"SocketOptions");D.SocketOptions=Yf;var ft=class{constructor(){this.min_tls_version=hw.TlsVersion.Default,this.alpn_list=[],this.verify_peer=!0}override_default_trust_store_from_path(e,r){this.ca_dirpath=e,this.ca_filepath=r}override_default_trust_store(e){this.certificate_authority=e}static create_client_with_mtls(e,r){let i=new ft;return i.certificate=e,i.private_key=r,i.verify_peer=!0,i}static create_client_with_mtls_from_path(e,r){let i=new ft;return i.certificate_filepath=e,i.private_key_filepath=r,i.verify_peer=!0,i}static create_client_with_mtls_pkcs12_from_path(e,r){let i=new ft;return i.pkcs12_filepath=e,i.pkcs12_password=r,i.verify_peer=!0,i}static create_client_with_mtls_pkcs_from_path(e,r){return this.create_client_with_mtls_pkcs12_from_path(e,r)}static create_client_with_mtls_pkcs11(e){let r=new ft;return r.pkcs11_options=e,r.verify_peer=!0,r}static create_client_with_mtls_windows_cert_store_path(e){let r=new ft;return r.windows_cert_store_path=e,r.verify_peer=!0,r}static create_server_with_mtls_from_path(e,r){let i=new ft;return i.certificate_filepath=e,i.private_key_filepath=r,i.verify_peer=!1,i}static create_server_with_mtls_pkcs_from_path(e,r){let i=new ft;return i.pkcs12_filepath=e,i.pkcs12_password=r,i.verify_peer=!1,i}};n(ft,"TlsContextOptions");D.TlsContextOptions=ft;var ea=class extends ta.NativeResource{constructor(e){super(At.default.io_tls_ctx_new(e.min_tls_version,e.ca_filepath,e.ca_dirpath,e.certificate_authority,e.alpn_list&&e.alpn_list.length>0?e.alpn_list.join(";"):void 0,e.certificate_filepath,e.certificate,e.private_key_filepath,e.private_key,e.pkcs12_filepath,e.pkcs12_password,e.pkcs11_options,e.windows_cert_store_path,e.verify_peer))}};n(ea,"TlsContext");D.TlsContext=ea;var Qf=class extends ea{constructor(e){e||(e=new ft,e.verify_peer=!0),super(e)}};n(Qf,"ClientTlsContext");D.ClientTlsContext=Qf;var Xf=class extends ea{constructor(e){e||(e=new ft,e.verify_peer=!1),super(e)}};n(Xf,"ServerTlsContext");D.ServerTlsContext=Xf;var Zf=class extends ta.NativeResource{constructor(e,r,i=[]){super(At.default.io_tls_connection_options_new(e.native_handle(),r,i&&i.length>0?i.join(";"):void 0)),this.tls_ctx=e,this.server_name=r,this.alpn_list=i}};n(Zf,"TlsConnectionOptions");D.TlsConnectionOptions=Zf;var es=class extends ta.NativeResource{constructor(e,r=es.InitializeFinalizeBehavior.DEFAULT){super(At.default.io_pkcs11_lib_new(e,r))}close(){At.default.io_pkcs11_lib_close(this.native_handle())}};n(es,"Pkcs11Lib");D.Pkcs11Lib=es;(function(t){let e;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.OMIT=1]="OMIT",r[r.STRICT=2]="STRICT"})(e=t.InitializeFinalizeBehavior||(t.InitializeFinalizeBehavior={}))})(es=D.Pkcs11Lib||(D.Pkcs11Lib={}))});var tm=u(pe=>{"use strict";var F$=pe&&pe.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},L$=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pe,"__esModule",{value:!0});pe.aws_verify_sigv4a_signing=pe.aws_sign_request=pe.AwsSignedBodyHeaderType=pe.AwsSignedBodyValue=pe.AwsSignatureType=pe.AwsSigningAlgorithm=pe.AwsCredentialsProvider=void 0;var yw=L$(Rr()),z$=sn(),U$=on(),em=class extends yw.default.AwsCredentialsProvider{static newDefault(e=void 0){return super.newDefault(e!=null?e.native_handle():null)}static newStatic(e,r,i){return super.newStatic(e,r,i)}static newCognito(e){return super.newCognito(e,e.tlsContext!=null?e.tlsContext.native_handle():new U$.ClientTlsContext().native_handle(),e.bootstrap!=null?e.bootstrap.native_handle():null,e.httpProxyOptions?e.httpProxyOptions.create_native_handle():null)}};n(em,"AwsCredentialsProvider");pe.AwsCredentialsProvider=em;var W$;(function(t){t[t.SigV4=0]="SigV4",t[t.SigV4Asymmetric=1]="SigV4Asymmetric"})(W$=pe.AwsSigningAlgorithm||(pe.AwsSigningAlgorithm={}));var j$;(function(t){t[t.HttpRequestViaHeaders=0]="HttpRequestViaHeaders",t[t.HttpRequestViaQueryParams=1]="HttpRequestViaQueryParams",t[t.HttpRequestChunk=2]="HttpRequestChunk",t[t.HttpRequestEvent=3]="HttpRequestEvent"})(j$=pe.AwsSignatureType||(pe.AwsSignatureType={}));var V$;(function(t){t.EmptySha256="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",t.UnsignedPayload="UNSIGNED-PAYLOAD",t.StreamingAws4HmacSha256Payload="STREAMING-AWS4-HMAC-SHA256-PAYLOAD",t.StreamingAws4HmacSha256Events="STREAMING-AWS4-HMAC-SHA256-EVENTS"})(V$=pe.AwsSignedBodyValue||(pe.AwsSignedBodyValue={}));var $$;(function(t){t[t.None=0]="None",t[t.XAmzContentSha256=1]="XAmzContentSha256"})($$=pe.AwsSignedBodyHeaderType||(pe.AwsSignedBodyHeaderType={}));function H$(t,e){return F$(this,void 0,void 0,function*(){return new Promise((r,i)=>{try{yw.default.aws_sign_request(t,e,s=>{s==0?r(t):i(new z$.CrtError(s))})}catch(s){i(s)}})})}n(H$,"aws_sign_request");pe.aws_sign_request=H$;function G$(t,e,r,i,s,o){return yw.default.aws_verify_sigv4a_signing(t,e,r,i,s,o)}n(G$,"aws_verify_sigv4a_signing");pe.aws_verify_sigv4a_signing=G$});var eA=u(an=>{"use strict";var B$=an&&an.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(an,"__esModule",{value:!0});an.crc32c=an.crc32=void 0;var Zx=B$(Rr());function J$(t,e){return Zx.default.checksums_crc32(t,e)}n(J$,"crc32");an.crc32=J$;function K$(t,e){return Zx.default.checksums_crc32c(t,e)}n(K$,"crc32c");an.crc32c=K$});var rA=u(cn=>{"use strict";var Y$=cn&&cn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cn,"__esModule",{value:!0});cn.native_memory_dump=cn.native_memory=void 0;var tA=Y$(Rr());function Q$(){return tA.default.native_memory()}n(Q$,"native_memory");cn.native_memory=Q$;function X$(){return tA.default.native_memory_dump()}n(X$,"native_memory_dump");cn.native_memory_dump=X$});var nA=u(Pe=>{"use strict";var Z$=Pe&&Pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.hmac_sha256=Pe.Sha256Hmac=Pe.hash_sha1=Pe.Sha1Hash=Pe.hash_sha256=Pe.Sha256Hash=Pe.hash_md5=Pe.Md5Hash=void 0;var Dt=Z$(Rr()),iA=Zo(),ra=class extends iA.NativeResource{update(e){Dt.default.hash_update(this.native_handle(),e)}finalize(e){return Dt.default.hash_digest(this.native_handle(),e)}constructor(e){super(e)}};n(ra,"Hash");var rm=class extends ra{constructor(){super(Dt.default.hash_md5_new())}};n(rm,"Md5Hash");Pe.Md5Hash=rm;function eH(t,e){return Dt.default.hash_md5_compute(t,e)}n(eH,"hash_md5");Pe.hash_md5=eH;var im=class extends ra{constructor(){super(Dt.default.hash_sha256_new())}};n(im,"Sha256Hash");Pe.Sha256Hash=im;function tH(t,e){return Dt.default.hash_sha256_compute(t,e)}n(tH,"hash_sha256");Pe.hash_sha256=tH;var nm=class extends ra{constructor(){super(Dt.default.hash_sha1_new())}};n(nm,"Sha1Hash");Pe.Sha1Hash=nm;function rH(t,e){return Dt.default.hash_sha1_compute(t,e)}n(rH,"hash_sha1");Pe.hash_sha1=rH;var sm=class extends iA.NativeResource{update(e){Dt.default.hmac_update(this.native_handle(),e)}finalize(e){return Dt.default.hmac_digest(this.native_handle(),e)}constructor(e){super(e)}};n(sm,"Hmac");var om=class extends sm{constructor(e){super(Dt.default.hmac_sha256_new(e))}};n(om,"Sha256Hmac");Pe.Sha256Hmac=om;function iH(t,e,r){return Dt.default.hmac_sha256_compute(t,e,r)}n(iH,"hmac_sha256");Pe.hmac_sha256=iH});var gw=u(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.CommonHttpProxyOptions=Ir.HttpProxyAuthenticationType=Ir.HttpVersion=void 0;var nH;(function(t){t[t.Unknown=0]="Unknown",t[t.Http1_0=1]="Http1_0",t[t.Http1_1=2]="Http1_1",t[t.Http2=3]="Http2"})(nH=Ir.HttpVersion||(Ir.HttpVersion={}));var sA;(function(t){t[t.None=0]="None",t[t.Basic=1]="Basic"})(sA=Ir.HttpProxyAuthenticationType||(Ir.HttpProxyAuthenticationType={}));var am=class{constructor(e,r,i=sA.None,s,o){this.host_name=e,this.port=r,this.auth_method=i,this.auth_username=s,this.auth_password=o}};n(am,"CommonHttpProxyOptions");Ir.CommonHttpProxyOptions=am});var lm=u(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.BufferedEventEmitter=void 0;var sH=U("events"),cm=class{constructor(e,r){this.event=e,this.args=r}};n(cm,"BufferedEvent");var dm=class extends sH.EventEmitter{constructor(){super(),this.corked=!1}cork(){this.corked=!0}uncork(){for(this.corked=!1;this.eventQueue;){let e=this.eventQueue;super.emit(e.event,...e.args),this.eventQueue=this.eventQueue.next}}emit(e,...r){if(this.corked){let i=this.lastQueuedEvent;return this.lastQueuedEvent=new cm(e,r),i?i.next=this.lastQueuedEvent:this.eventQueue=this.lastQueuedEvent,this.listeners(e).length>0}return super.emit(e,...r)}};n(dm,"BufferedEventEmitter");um.BufferedEventEmitter=dm});var _m=u(oe=>{"use strict";var oH=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oe,"__esModule",{value:!0});oe.HttpClientConnectionManager=oe.HttpClientStream=oe.HttpStream=oe.HttpClientConnection=oe.HttpProxyOptions=oe.HttpProxyConnectionType=oe.HttpConnection=oe.HttpRequest=oe.HttpHeaders=oe.HttpProxyAuthenticationType=void 0;var Ft=oH(Rr()),ww=Zo(),hm=sn(),oA=gw(),aH=gw();Object.defineProperty(oe,"HttpProxyAuthenticationType",{enumerable:!0,get:function(){return aH.HttpProxyAuthenticationType}});var aA=lm();oe.HttpHeaders=Ft.default.HttpHeaders;var cH=Ft.default.HttpRequest,pm=class extends cH{constructor(e,r,i,s){super(e,r,i,s?.native_handle())}};n(pm,"HttpRequest");oe.HttpRequest=pm;var dn=class extends(0,ww.NativeResourceMixin)(aA.BufferedEventEmitter){constructor(e){super(),this._super(e)}close(){Ft.default.http_connection_close(this.native_handle())}on(e,r){return super.on(e,r),e=="connect"&&process.nextTick(()=>{this.uncork()}),this}};n(dn,"HttpConnection");oe.HttpConnection=dn;dn.CONNECT="connect";dn.ERROR="error";dn.CLOSE="close";var cA;(function(t){t[t.Legacy=0]="Legacy",t[t.Forwarding=1]="Forwarding",t[t.Tunneling=2]="Tunneling"})(cA=oe.HttpProxyConnectionType||(oe.HttpProxyConnectionType={}));var fm=class extends oA.CommonHttpProxyOptions{constructor(e,r,i=oA.HttpProxyAuthenticationType.None,s,o,a,c){super(e,r,i,s,o),this.tls_opts=a,this.connection_type=c}create_native_handle(){return Ft.default.http_proxy_options_new(this.host_name,this.port,this.auth_method,this.auth_username,this.auth_password,this.tls_opts?this.tls_opts.native_handle():void 0,this.connection_type?this.connection_type:cA.Legacy)}};n(fm,"HttpProxyOptions");oe.HttpProxyOptions=fm;var Xc=class extends dn{constructor(e,r,i,s,o,a,c){super(c||Ft.default.http_connection_new(e!=null?e.native_handle():null,(l,p)=>{this._on_setup(l,p)},(l,p)=>{this._on_shutdown(l,p)},r,i,s.native_handle(),o?o.native_handle():void 0,a?a.create_native_handle():void 0)),this.bootstrap=e,this.socket_options=s,this.tls_opts=o}_on_setup(e,r){if(r){this.emit("error",new hm.CrtError(r));return}this.emit("connect")}_on_shutdown(e,r){if(r){this.emit("error",new hm.CrtError(r));return}this.emit("close")}request(e){let r,i=n((c,l)=>{r._on_response(c,l)},"on_response_impl"),s=n(c=>{r._on_body(c)},"on_body_impl"),o=n(c=>{r._on_complete(c)},"on_complete_impl"),a=Ft.default.http_stream_new(this.native_handle(),e,o,i,s);return r=new qr(a,this,e)}};n(Xc,"HttpClientConnection");oe.HttpClientConnection=Xc;var Zc=class extends(0,ww.NativeResourceMixin)(aA.BufferedEventEmitter){constructor(e,r){super(),this.connection=r,this._super(e),this.cork()}activate(){Ft.default.http_stream_activate(this.native_handle())}close(){Ft.default.http_stream_close(this.native_handle())}_on_body(e){this.emit("data",e)}_on_complete(e){if(e){this.emit("error",new hm.CrtError(e)),this.close();return}this.on("end",()=>{this.close()}),this.emit("end")}};n(Zc,"HttpStream");oe.HttpStream=Zc;var qr=class extends Zc{constructor(e,r,i){super(e,r),this.request=i}status_code(){return this.response_status_code}on(e,r){return super.on(e,r),e=="response"&&process.nextTick(()=>{this.uncork()}),this}_on_response(e,r){this.response_status_code=e;let i=new oe.HttpHeaders(r);this.emit("response",e,i)}};n(qr,"HttpClientStream");oe.HttpClientStream=qr;qr.RESPONSE="response";qr.DATA="data";qr.ERROR="error";qr.END="end";qr.HEADERS="headers";var mm=class extends ww.NativeResource{constructor(e,r,i,s,o,a,c,l){super(Ft.default.http_connection_manager_new(e!=null?e.native_handle():null,r,i,s,o,a.native_handle(),c?c.native_handle():void 0,l?l.create_native_handle():void 0,void 0)),this.bootstrap=e,this.host=r,this.port=i,this.max_connections=s,this.initial_window_size=o,this.socket_options=a,this.tls_opts=c,this.proxy_options=l,this.connections=new Map}acquire(){return new Promise((e,r)=>{let i=n((s,o)=>{if(o){r(new hm.CrtError(o));return}let a=this.connections.get(s);a||(a=new Xc(this.bootstrap,this.host,this.port,this.socket_options,this.tls_opts,this.proxy_options,s),this.connections.set(s,a),a.on("close",()=>{this.connections.delete(s)})),e(a)},"on_acquired");Ft.default.http_connection_manager_acquire(this.native_handle(),i)})}release(e){Ft.default.http_connection_manager_release(this.native_handle(),e.native_handle())}close(){Ft.default.http_connection_manager_close(this.native_handle())}};n(mm,"HttpClientConnectionManager");oe.HttpClientConnectionManager=mm});var gm=u(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.DEFAULT_RECONNECT_MIN_SEC=tr.DEFAULT_RECONNECT_MAX_SEC=tr.MqttWill=tr.QoS=void 0;var dH;(function(t){t[t.AtMostOnce=0]="AtMostOnce",t[t.AtLeastOnce=1]="AtLeastOnce",t[t.ExactlyOnce=2]="ExactlyOnce"})(dH=tr.QoS||(tr.QoS={}));var ym=class{constructor(e,r,i,s=!1){this.topic=e,this.qos=r,this.payload=i,this.retain=s}};n(ym,"MqttWill");tr.MqttWill=ym;tr.DEFAULT_RECONNECT_MAX_SEC=128;tr.DEFAULT_RECONNECT_MIN_SEC=1});var Sw=u(Me=>{"use strict";var uH=Me&&Me.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),lH=Me&&Me.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pH=Me&&Me.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uH(e,t,r);return lH(e,t),e};Object.defineProperty(Me,"__esModule",{value:!0});Me.extractRegionFromEndpoint=Me.buildMqtt5FinalUsername=Me.populate_username_string_with_custom_authorizer=Me.is_string_and_not_empty=Me.add_to_username_parameter=void 0;var fH=pH(Hf());function Ew(t,e,r){let i=t;return i.indexOf("?")!=-1?i+="&":i+="?",e.indexOf(r)!=-1?i+e:i+r+e}n(Ew,"add_to_username_parameter");Me.add_to_username_parameter=Ew;function ed(t){return t!=null&&typeof t=="string"&&t!=""}n(ed,"is_string_and_not_empty");Me.is_string_and_not_empty=ed;function mH(t,e,r,i,s){let o="";return t&&(o+=t),ed(e)==!1?ed(s)&&s&&(o+=s):o+=e,ed(r)&&r&&(o=Ew(o,r,"x-amz-customauthorizer-name=")),ed(i)&&i&&(o=Ew(o,i,"x-amz-customauthorizer-signature=")),o}n(mH,"populate_username_string_with_custom_authorizer");Me.populate_username_string_with_custom_authorizer=mH;function vw(t,e,r){e&&r.push([t,e])}n(vw,"addParam");function hH(t){let e="",r=[];if(t){let i=!1;if((t.tokenValue||t.tokenKeyName||t.tokenSignature)&&(i=!0,!t.tokenValue||!t.tokenKeyName||!t.tokenSignature))throw new Error("Token-based custom authentication requires all token-related properties to be set");let s=t.username,o=(s??"").split("?"),a=o.slice(1);if(e=o[0],a.length>1)throw new Error("Custom auth username property value is invalid");a.length==1&&a[0].split("&").forEach((c,l,p)=>{var f;let m=c.split("=");r.push([m[0],(f=m[1])!==null&&f!==void 0?f:""])}),vw("x-amz-customauthorizer-name",t.authorizerName,r),i&&(vw(t.tokenKeyName,t.tokenValue,r),vw("x-amz-customauthorizer-signature",t.tokenSignature,r))}return r.push(["SDK","NodeJSv2"]),r.push(["Version",fH.crt_version()]),(e??"")+"?"+r.map(i=>`${i[0]}=${i[1]}`).join("&")}n(hH,"buildMqtt5FinalUsername");Me.buildMqtt5FinalUsername=hH;function _H(t){let e=/^[\w\-]+\.[\w\-]+\.([\w+\-]+)\./,r=t.match(e);if(r)return r[1];throw new Error("AWS region could not be extracted from endpoint.  Use 'region' property on WebsocketConfig to set manually.")}n(_H,"extractRegionFromEndpoint");Me.extractRegionFromEndpoint=_H});var uA=u(zt=>{"use strict";var yH=zt&&zt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),gH=zt&&zt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bw=zt&&zt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yH(e,t,r);return gH(e,t),e},wH=zt&&zt.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(zt,"__esModule",{value:!0});zt.AwsIotMqttConnectionConfigBuilder=void 0;var dA=gm(),ts=bw(on()),td=on(),vH=bw(Hf()),EH=sn(),rd=tm(),Nw=bw(Sw()),Lt=class{constructor(e){this.tls_ctx_options=e,this.params={client_id:"",host_name:"",socket_options:new ts.SocketOptions,port:8883,use_websocket:!1,clean_session:!1,keep_alive:void 0,will:void 0,username:"",password:void 0,tls_ctx:void 0,reconnect_min_sec:dA.DEFAULT_RECONNECT_MIN_SEC,reconnect_max_sec:dA.DEFAULT_RECONNECT_MAX_SEC},this.is_using_custom_authorizer=!1}static new_mtls_builder_from_path(e,r){let i=new Lt(td.TlsContextOptions.create_client_with_mtls_from_path(e,r));return i.params.port=8883,ts.is_alpn_available()&&i.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),i}static new_mtls_builder(e,r){let i=new Lt(td.TlsContextOptions.create_client_with_mtls(e,r));return i.params.port=8883,ts.is_alpn_available()&&i.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),i}static new_mtls_pkcs11_builder(e){let r=new Lt(td.TlsContextOptions.create_client_with_mtls_pkcs11(e));return r.params.port=8883,ts.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_mtls_windows_cert_store_path_builder(e){let r=new Lt(td.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(e));return r.params.port=8883,ts.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_default_builder(){let e=new ts.TlsContextOptions;return new Lt(e)}static new_websocket_builder(...e){return this.new_with_websockets(...e)}static configure_websocket_handshake(e,r){return r&&(e.params.websocket_handshake_transform=(i,s)=>wH(this,void 0,void 0,function*(){var o,a,c;let l=(a=(o=r.create_signing_config)===null||o===void 0?void 0:o.call(r))!==null&&a!==void 0?a:{algorithm:rd.AwsSigningAlgorithm.SigV4,signature_type:rd.AwsSignatureType.HttpRequestViaQueryParams,provider:r.credentials_provider,region:r.region,service:(c=r.service)!==null&&c!==void 0?c:"iotdevicegateway",signed_body_value:rd.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};try{yield(0,rd.aws_sign_request)(i,l),s()}catch(p){p instanceof EH.CrtError?s(p.error_code):s(3)}})),e}static new_with_websockets(e){let r=e?.tls_ctx_options;r||(r=new td.TlsContextOptions,r.alpn_list=[]);let i=new Lt(r);return i.params.use_websocket=!0,i.params.proxy_options=e?.proxy_options,i.tls_ctx_options&&(i.params.port=443),this.configure_websocket_handshake(i,e),i}with_certificate_authority_from_path(e,r){return this.tls_ctx_options.override_default_trust_store_from_path(e,r),this}with_certificate_authority(e){return this.tls_ctx_options.override_default_trust_store(e),this}with_endpoint(e){return this.params.host_name=e,this}with_port(e){return this.params.port=e,this}with_client_id(e){return this.params.client_id=e,this}with_clean_session(e){return this.params.clean_session=e,this}with_keep_alive_seconds(e){return this.params.keep_alive=e,this}with_timeout_ms(e){return this.with_ping_timeout_ms(e),this}with_ping_timeout_ms(e){return this.params.ping_timeout=e,this}with_protocol_operation_timeout_ms(e){return this.params.protocol_operation_timeout=e,this}with_will(e){return this.params.will=e,this}with_socket_options(e){return this.params.socket_options=e,this}with_credentials(e,r,i,s){return Lt.configure_websocket_handshake(this,{credentials_provider:rd.AwsCredentialsProvider.newStatic(r,i,s),region:e,service:"iotdevicegateway"})}with_http_proxy_options(e){return this.params.proxy_options=e,this}with_custom_authorizer(e,r,i,s){this.is_using_custom_authorizer=!0;let o=Nw.populate_username_string_with_custom_authorizer("",e,r,i,this.params.username);return this.params.username=o,this.params.password=s,this.params.use_websocket||(this.tls_ctx_options.alpn_list=["mqtt"]),this.params.port=443,this}with_username(e){return this.params.username=e,this}with_password(e){return this.params.password=e,this}with_reconnect_max_sec(e){return this.params.reconnect_max_sec=e,this}with_reconnect_min_sec(e){return this.params.reconnect_min_sec=e,this}build(){var e,r,i;if(this.params.client_id===void 0||this.params.host_name===void 0)throw"client_id and endpoint are required";return this.is_using_custom_authorizer==!1&&Nw.is_string_and_not_empty(this.params.username)&&(((e=this.params.username)===null||e===void 0?void 0:e.indexOf("x-amz-customauthorizer-name="))!=-1||((r=this.params.username)===null||r===void 0?void 0:r.indexOf("x-amz-customauthorizer-signature="))!=-1)&&(this.is_using_custom_authorizer=!0),this.is_using_custom_authorizer==!0&&this.params.port!=443&&console.log("Warning: Attempting to connect to authorizer with unsupported port. Port is not 443..."),this.params.tls_ctx===void 0&&(this.params.tls_ctx=new ts.ClientTlsContext(this.tls_ctx_options)),Nw.is_string_and_not_empty(this.params.username)==!1?this.params.username="?SDK=NodeJSv2&Version=":((i=this.params.username)===null||i===void 0?void 0:i.indexOf("?"))!=-1?this.params.username+="&SDK=NodeJSv2&Version=":this.params.username+="?SDK=NodeJSv2&Version=",this.params.username+=vH.crt_version(),this.params}};n(Lt,"AwsIotMqttConnectionConfigBuilder");zt.AwsIotMqttConnectionConfigBuilder=Lt});var wm=u(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.DEFAULT_KEEP_ALIVE=ia.normalize_payload=void 0;function SH(t){if(t instanceof Buffer||typeof t=="string")return t;if(ArrayBuffer.isView(t)){let e=t;return Buffer.from(e.buffer,e.byteOffset,e.byteLength)}if(t instanceof ArrayBuffer)return Buffer.from(t);if(typeof t=="object")return JSON.stringify(t);if(!t)return"";throw new TypeError("payload parameter must be a string, object, or DataView.")}n(SH,"normalize_payload");ia.normalize_payload=SH;ia.DEFAULT_KEEP_ALIVE=1200});var lA=u(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.RetryJitterType=un.ClientSessionBehavior=void 0;var NH;(function(t){t[t.Default=0]="Default",t[t.Clean=1]="Clean",t[t.RejoinPostSuccess=2]="RejoinPostSuccess",t[t.RejoinAlways=3]="RejoinAlways"})(NH=un.ClientSessionBehavior||(un.ClientSessionBehavior={}));var bH;(function(t){t[t.Default=0]="Default",t[t.None=1]="None",t[t.Full=2]="Full",t[t.Decorrelated=3]="Decorrelated"})(bH=un.RetryJitterType||(un.RetryJitterType={}))});var pA=u(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.PacketType=L.RetainHandlingType=L.QoS=L.PayloadFormatIndicator=L.isSuccessfulPubackReasonCode=L.PubackReasonCode=L.isSuccessfulUnsubackReasonCode=L.UnsubackReasonCode=L.isSuccessfulSubackReasonCode=L.SubackReasonCode=L.isSuccessfulDisconnectReasonCode=L.DisconnectReasonCode=L.isSuccessfulConnectReasonCode=L.ConnectReasonCode=void 0;var xH;(function(t){t[t.Success=0]="Success",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.MalformedPacket=129]="MalformedPacket",t[t.ProtocolError=130]="ProtocolError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.UnsupportedProtocolVersion=132]="UnsupportedProtocolVersion",t[t.ClientIdentifierNotValid=133]="ClientIdentifierNotValid",t[t.BadUsernameOrPassword=134]="BadUsernameOrPassword",t[t.NotAuthorized=135]="NotAuthorized",t[t.ServerUnavailable=136]="ServerUnavailable",t[t.ServerBusy=137]="ServerBusy",t[t.Banned=138]="Banned",t[t.BadAuthenticationMethod=140]="BadAuthenticationMethod",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.PacketTooLarge=149]="PacketTooLarge",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid",t[t.RetainNotSupported=154]="RetainNotSupported",t[t.QosNotSupported=155]="QosNotSupported",t[t.UseAnotherServer=156]="UseAnotherServer",t[t.ServerMoved=157]="ServerMoved",t[t.ConnectionRateExceeded=159]="ConnectionRateExceeded"})(xH=L.ConnectReasonCode||(L.ConnectReasonCode={}));function AH(t){return t<128}n(AH,"isSuccessfulConnectReasonCode");L.isSuccessfulConnectReasonCode=AH;var TH;(function(t){t[t.NormalDisconnection=0]="NormalDisconnection",t[t.DisconnectWithWillMessage=4]="DisconnectWithWillMessage",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.MalformedPacket=129]="MalformedPacket",t[t.ProtocolError=130]="ProtocolError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.ServerBusy=137]="ServerBusy",t[t.ServerShuttingDown=139]="ServerShuttingDown",t[t.KeepAliveTimeout=141]="KeepAliveTimeout",t[t.SessionTakenOver=142]="SessionTakenOver",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.ReceiveMaximumExceeded=147]="ReceiveMaximumExceeded",t[t.TopicAliasInvalid=148]="TopicAliasInvalid",t[t.PacketTooLarge=149]="PacketTooLarge",t[t.MessageRateTooHigh=150]="MessageRateTooHigh",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.AdministrativeAction=152]="AdministrativeAction",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid",t[t.RetainNotSupported=154]="RetainNotSupported",t[t.QosNotSupported=155]="QosNotSupported",t[t.UseAnotherServer=156]="UseAnotherServer",t[t.ServerMoved=157]="ServerMoved",t[t.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",t[t.ConnectionRateExceeded=159]="ConnectionRateExceeded",t[t.MaximumConnectTime=160]="MaximumConnectTime",t[t.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",t[t.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(TH=L.DisconnectReasonCode||(L.DisconnectReasonCode={}));function OH(t){return t<128}n(OH,"isSuccessfulDisconnectReasonCode");L.isSuccessfulDisconnectReasonCode=OH;var PH;(function(t){t[t.GrantedQoS0=0]="GrantedQoS0",t[t.GrantedQoS1=1]="GrantedQoS1",t[t.GrantedQoS2=2]="GrantedQoS2",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",t[t.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",t[t.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(PH=L.SubackReasonCode||(L.SubackReasonCode={}));function RH(t){return t<128}n(RH,"isSuccessfulSubackReasonCode");L.isSuccessfulSubackReasonCode=RH;var IH;(function(t){t[t.Success=0]="Success",t[t.NoSubscriptionExisted=17]="NoSubscriptionExisted",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse"})(IH=L.UnsubackReasonCode||(L.UnsubackReasonCode={}));function qH(t){return t<128}n(qH,"isSuccessfulUnsubackReasonCode");L.isSuccessfulUnsubackReasonCode=qH;var CH;(function(t){t[t.Success=0]="Success",t[t.NoMatchingSubscribers=16]="NoMatchingSubscribers",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid"})(CH=L.PubackReasonCode||(L.PubackReasonCode={}));function kH(t){return t<128}n(kH,"isSuccessfulPubackReasonCode");L.isSuccessfulPubackReasonCode=kH;var MH;(function(t){t[t.Bytes=0]="Bytes",t[t.Utf8=1]="Utf8"})(MH=L.PayloadFormatIndicator||(L.PayloadFormatIndicator={}));var DH;(function(t){t[t.AtMostOnce=0]="AtMostOnce",t[t.AtLeastOnce=1]="AtLeastOnce",t[t.ExactlyOnce=2]="ExactlyOnce"})(DH=L.QoS||(L.QoS={}));var FH;(function(t){t[t.SendOnSubscribe=0]="SendOnSubscribe",t[t.SendOnSubscribeIfNew=1]="SendOnSubscribeIfNew",t[t.DontSend=2]="DontSend"})(FH=L.RetainHandlingType||(L.RetainHandlingType={}));var LH;(function(t){t[t.Connect=1]="Connect",t[t.Connack=2]="Connack",t[t.Publish=3]="Publish",t[t.Puback=4]="Puback",t[t.Pubrec=5]="Pubrec",t[t.Pubrel=6]="Pubrel",t[t.Pubcomp=7]="Pubcomp",t[t.Subscribe=8]="Subscribe",t[t.Suback=9]="Suback",t[t.Unsubscribe=10]="Unsubscribe",t[t.Unsuback=11]="Unsuback",t[t.Pingreq=12]="Pingreq",t[t.Pingresp=13]="Pingresp",t[t.Disconnect=14]="Disconnect",t[t.Auth=15]="Auth"})(LH=L.PacketType||(L.PacketType={}))});var Tw=u(ae=>{"use strict";var mA=ae&&ae.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),zH=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hA=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mA(e,t,r);return zH(e,t),e},_A=ae&&ae.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mA(e,t,r)},xw=ae&&ae.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},UH=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ae,"__esModule",{value:!0});ae.Mqtt5Client=ae.ClientExtendedValidationAndFlowControl=ae.ClientOperationQueueBehavior=ae.HttpProxyOptions=void 0;var ln=UH(Rr()),WH=Zo(),jH=lm(),Aw=hA(on()),VH=hA(wm()),fA=sn(),$H=_m();Object.defineProperty(ae,"HttpProxyOptions",{enumerable:!0,get:function(){return $H.HttpProxyOptions}});_A(lA(),ae);_A(pA(),ae);var HH;(function(t){t[t.Default=0]="Default",t[t.FailNonQos1PublishOnDisconnect=1]="FailNonQos1PublishOnDisconnect",t[t.FailQos0PublishOnDisconnect=2]="FailQos0PublishOnDisconnect",t[t.FailAllOnDisconnect=3]="FailAllOnDisconnect"})(HH=ae.ClientOperationQueueBehavior||(ae.ClientOperationQueueBehavior={}));var GH;(function(t){t[t.None=0]="None",t[t.AwsIotCoreDefaults=1]="AwsIotCoreDefaults"})(GH=ae.ClientExtendedValidationAndFlowControl||(ae.ClientExtendedValidationAndFlowControl={}));var te=class extends(0,WH.NativeResourceMixin)(jH.BufferedEventEmitter){constructor(e){super(),this._super(ln.default.mqtt5_client_new(this,e,r=>{te._s_on_stopped(r)},r=>{te._s_on_attempting_connect(r)},(r,i,s)=>{te._s_on_connection_success(r,i,s)},(r,i,s)=>{te._s_on_connection_failure(r,new fA.CrtError(i),s)},(r,i,s)=>{te._s_on_disconnection(r,new fA.CrtError(i),s)},(r,i)=>{te._s_on_message_received(r,i)},e.clientBootstrap?e.clientBootstrap.native_handle():null,e.socketOptions?e.socketOptions.native_handle():null,e.tlsCtx?e.tlsCtx.native_handle():null,e.httpProxyOptions?e.httpProxyOptions.create_native_handle():null))}close(){ln.default.mqtt5_client_close(this.native_handle())}start(){ln.default.mqtt5_client_start(this.native_handle())}stop(e){ln.default.mqtt5_client_stop(this.native_handle(),e)}subscribe(e){return xw(this,void 0,void 0,function*(){return new Promise((r,i)=>{function s(o,a,c){return te._s_on_suback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{ln.default.mqtt5_client_subscribe(this.native_handle(),e,s)}catch(o){i(o)}})})}unsubscribe(e){return xw(this,void 0,void 0,function*(){return new Promise((r,i)=>{function s(o,a,c){return te._s_on_unsuback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{ln.default.mqtt5_client_unsubscribe(this.native_handle(),e,s)}catch(o){i(o)}})})}publish(e){return xw(this,void 0,void 0,function*(){return new Promise((r,i)=>{e&&e.payload&&(e.payload=VH.normalize_payload(e.payload));function s(o,a,c){return te._s_on_puback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{ln.default.mqtt5_client_publish(this.native_handle(),e,s)}catch(o){i(o)}})})}getQueueStatistics(){return ln.default.mqtt5_client_get_queue_statistics(this.native_handle())}on(e,r){return super.on(e,r),this}static _s_on_stopped(e){process.nextTick(()=>{let r={};e.emit(te.STOPPED,r)})}static _s_on_attempting_connect(e){process.nextTick(()=>{let r={};e.emit(te.ATTEMPTING_CONNECT,r)})}static _s_on_connection_success(e,r,i){let s={connack:r,settings:i};process.nextTick(()=>{e.emit(te.CONNECTION_SUCCESS,s)})}static _s_on_connection_failure(e,r,i){let s={error:r};i!=null&&(s.connack=i),process.nextTick(()=>{e.emit(te.CONNECTION_FAILURE,s)})}static _s_on_disconnection(e,r,i){let s={error:r};i!=null&&(s.disconnect=i),process.nextTick(()=>{e.emit(te.DISCONNECTION,s)})}static _s_on_suback_callback(e,r,i,s,o){s==0&&o!==void 0?e(o):r(Aw.error_code_to_string(s))}static _s_on_unsuback_callback(e,r,i,s,o){s==0&&o!==void 0?e(o):r(Aw.error_code_to_string(s))}static _s_on_puback_callback(e,r,i,s,o){s==0?e(o):r(Aw.error_code_to_string(s))}static _s_on_message_received(e,r){let i={message:r};process.nextTick(()=>{e.emit(te.MESSAGE_RECEIVED,i)})}};n(te,"Mqtt5Client");ae.Mqtt5Client=te;te.ERROR="error";te.MESSAGE_RECEIVED="messageReceived";te.ATTEMPTING_CONNECT="attemptingConnect";te.CONNECTION_SUCCESS="connectionSuccess";te.CONNECTION_FAILURE="connectionFailure";te.DISCONNECTION="disconnection";te.STOPPED="stopped"});var wA=u(Wt=>{"use strict";var BH=Wt&&Wt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),JH=Wt&&Wt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nd=Wt&&Wt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BH(e,t,r);return JH(e,t),e},yA=Wt&&Wt.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.AwsIotMqtt5ClientConfigBuilder=void 0;var KH=nd(Tw()),Ut=nd(on()),id=nd(tm()),YH=sn(),gA=nd(Sw()),QH=nd(wm()),Se=class{constructor(e,r,i){this.tlsContextOptions=i,this.config={hostName:e,port:r,connectProperties:{keepAliveIntervalSeconds:QH.DEFAULT_KEEP_ALIVE},extendedValidationAndFlowControlOptions:KH.ClientExtendedValidationAndFlowControl.AwsIotCoreDefaults}}static newDirectMqttBuilderWithMtlsFromPath(e,r,i){let s=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls_from_path(r,i));return Ut.is_alpn_available()&&s.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),s}static newDirectMqttBuilderWithMtlsFromMemory(e,r,i){let s=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls(r,i));return Ut.is_alpn_available()&&s.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),s}static newDirectMqttBuilderWithMtlsFromPkcs11(e,r){let i=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls_pkcs11(r));return Ut.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithMtlsFromWindowsCertStorePath(e,r){let i=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(r));return Ut.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithCustomAuth(e,r){let i=new Se(e,Se.DEFAULT_WEBSOCKET_MQTT_PORT,new Ut.TlsContextOptions);return i.customAuthConfig=r,i.tlsContextOptions.alpn_list=["mqtt"],i}static newWebsocketMqttBuilderWithSigv4Auth(e,r){let i=new Ut.TlsContextOptions;i.alpn_list=[];let s=new Se(e,Se.DEFAULT_WEBSOCKET_MQTT_PORT,i),o=r?.credentialsProvider;return o||(o=id.AwsCredentialsProvider.newDefault()),s.config.websocketHandshakeTransform=(a,c)=>yA(this,void 0,void 0,function*(){var l;try{let p={algorithm:id.AwsSigningAlgorithm.SigV4,signature_type:id.AwsSignatureType.HttpRequestViaQueryParams,provider:o,region:(l=r?.region)!==null&&l!==void 0?l:gA.extractRegionFromEndpoint(e),service:"iotdevicegateway",signed_body_value:id.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};yield id.aws_sign_request(a,p),c()}catch(p){p instanceof YH.CrtError?c(p.error_code):c(3)}}),s}static newWebsocketMqttBuilderWithCustomAuth(e,r){let i=new Se(e,Se.DEFAULT_WEBSOCKET_MQTT_PORT,new Ut.TlsContextOptions);return i.customAuthConfig=r,i.config.websocketHandshakeTransform=(s,o)=>yA(this,void 0,void 0,function*(){o(0)}),i}withCertificateAuthorityFromPath(e,r){return this.tlsContextOptions.override_default_trust_store_from_path(e,r),this}withCertificateAuthority(e){return this.tlsContextOptions.override_default_trust_store(e),this}withPort(e){return this.config.port=e,this}withConnectProperties(e){return this.config.connectProperties=e,this}withSessionBehavior(e){return this.config.sessionBehavior=e,this}withRetryJitterMode(e){return this.config.retryJitterMode=e,this}withMinReconnectDelayMs(e){return this.config.minReconnectDelayMs=e,this}withMaxReconnectDelayMs(e){return this.config.maxReconnectDelayMs=e,this}withMinConnectedTimeToResetReconnectDelayMs(e){return this.config.minConnectedTimeToResetReconnectDelayMs=e,this}withConnackTimeoutMs(e){return this.config.connackTimeoutMs=e,this}withOfflineQueueBehavior(e){return this.config.offlineQueueBehavior=e,this}withPingTimeoutMs(e){return this.config.pingTimeoutMs=e,this}withAckTimeoutSeconds(e){return this.config.ackTimeoutSeconds=e,this}withSocketOptions(e){return this.config.socketOptions=e,this}withHttpProxyOptions(e){return this.config.httpProxyOptions=e,this}withExtendedValidationAndFlowControlOptions(e){return this.config.extendedValidationAndFlowControlOptions=e,this}build(){var e,r;return this.config.tlsCtx===void 0&&(this.config.tlsCtx=new Ut.ClientTlsContext(this.tlsContextOptions)),this.config.connectProperties&&(this.config.connectProperties.username=gA.buildMqtt5FinalUsername(this.customAuthConfig),!((e=this.customAuthConfig)===null||e===void 0)&&e.password&&(this.config.connectProperties.password=(r=this.customAuthConfig)===null||r===void 0?void 0:r.password)),this.config}};n(Se,"AwsIotMqtt5ClientConfigBuilder");Wt.AwsIotMqtt5ClientConfigBuilder=Se;Se.DEFAULT_WEBSOCKET_MQTT_PORT=443;Se.DEFAULT_DIRECT_MQTT_PORT=8883});var EA=u(pn=>{"use strict";var XH=pn&&pn.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),vA=pn&&pn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&XH(e,t,r)};Object.defineProperty(pn,"__esModule",{value:!0});vA(uA(),pn);vA(wA(),pn)});var OA=u(we=>{"use strict";var ZH=we&&we.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),e3=we&&we.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xA=we&&we.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZH(e,t,r);return e3(e,t),e},na=we&&we.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},t3=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(we,"__esModule",{value:!0});we.MqttClientConnection=we.MqttClient=we.MqttWill=we.QoS=we.HttpProxyOptions=void 0;var rr=t3(Rr()),AA=Zo(),r3=lm(),SA=xA(wm()),NA=sn(),vm=xA(on()),i3=_m();Object.defineProperty(we,"HttpProxyOptions",{enumerable:!0,get:function(){return i3.HttpProxyOptions}});var bA=gm(),TA=gm();Object.defineProperty(we,"QoS",{enumerable:!0,get:function(){return TA.QoS}});Object.defineProperty(we,"MqttWill",{enumerable:!0,get:function(){return TA.MqttWill}});var Em=class extends AA.NativeResource{constructor(e=void 0){super(rr.default.mqtt_client_new(e!=null?e.native_handle():null)),this.bootstrap=e}new_connection(e){return new ir(this,e)}};n(Em,"MqttClient");we.MqttClient=Em;var ir=class extends(0,AA.NativeResourceMixin)(r3.BufferedEventEmitter){constructor(e,r){super(),this.client=e,this.config=r;let i=r.will?{topic:r.will.topic,qos:r.will.qos,payload:SA.normalize_payload(r.will.payload),retain:r.will.retain}:void 0;var s=bA.DEFAULT_RECONNECT_MIN_SEC,o=bA.DEFAULT_RECONNECT_MAX_SEC;r.reconnect_min_sec&&(s=r.reconnect_min_sec,o=Math.max(s,o)),r.reconnect_max_sec&&(o=r.reconnect_max_sec,s=Math.min(s,o)),this._super(rr.default.mqtt_client_connection_new(e.native_handle(),a=>{this._on_connection_interrupted(a)},(a,c)=>{this._on_connection_resumed(a,c)},r.tls_ctx?r.tls_ctx.native_handle():null,i,r.username,r.password,r.use_websocket,r.proxy_options?r.proxy_options.create_native_handle():void 0,r.websocket_handshake_transform,s,o)),this.tls_ctx=r.tls_ctx,rr.default.mqtt_client_connection_on_message(this.native_handle(),this._on_any_publish.bind(this)),this.on("error",a=>{})}close(){rr.default.mqtt_client_connection_close(this.native_handle())}on(e,r){return super.on(e,r),e=="connect"&&process.nextTick(()=>{this.uncork()}),this}connect(){return na(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{rr.default.mqtt_client_connection_connect(this.native_handle(),this.config.client_id,this.config.host_name,this.config.port,this.config.socket_options.native_handle(),this.config.keep_alive,this.config.ping_timeout,this.config.protocol_operation_timeout,this.config.clean_session,this._on_connect_callback.bind(this,e,r))}catch(i){r(i)}})})}reconnect(){return na(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{rr.default.mqtt_client_connection_reconnect(this.native_handle(),this._on_connect_callback.bind(this,e,r))}catch(i){r(i)}})})}publish(e,r,i,s=!1){return na(this,void 0,void 0,function*(){return new Promise((o,a)=>{a=this._reject(a);try{rr.default.mqtt_client_connection_publish(this.native_handle(),e,SA.normalize_payload(r),i,s,this._on_puback_callback.bind(this,o,a))}catch(c){a(c)}})})}subscribe(e,r,i){return na(this,void 0,void 0,function*(){return new Promise((s,o)=>{o=this._reject(o);try{rr.default.mqtt_client_connection_subscribe(this.native_handle(),e,r,i,this._on_suback_callback.bind(this,s,o))}catch(a){o(a)}})})}unsubscribe(e){return na(this,void 0,void 0,function*(){return new Promise((r,i)=>{i=this._reject(i);try{rr.default.mqtt_client_connection_unsubscribe(this.native_handle(),e,this._on_unsuback_callback.bind(this,r,i))}catch(s){i(s)}})})}disconnect(){return na(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{rr.default.mqtt_client_connection_disconnect(this.native_handle(),this._on_disconnect_callback.bind(this,e))}catch(i){r(i)}})})}getQueueStatistics(){return rr.default.mqtt_client_connection_get_queue_statistics(this.native_handle())}_reject(e){return r=>{e(r),process.nextTick(()=>{this.emit("error",new NA.CrtError(r))})}}_on_connection_interrupted(e){this.emit("interrupt",new NA.CrtError(e))}_on_connection_resumed(e,r){this.emit("resume",e,r)}_on_any_publish(e,r,i,s,o){this.emit("message",e,r,i,s,o)}_on_connect_callback(e,r,i,s,o){i==0&&s==0?(e(o),this.emit("connect",o)):i!=0?r("Failed to connect: "+vm.error_code_to_string(i)):r("Server rejected connection.")}_on_puback_callback(e,r,i,s){s==0?e({packet_id:i}):r("Failed to publish: "+vm.error_code_to_string(s))}_on_suback_callback(e,r,i,s,o,a){a==0?e({packet_id:i,topic:s,qos:o,error_code:a}):r("Failed to subscribe: "+vm.error_code_to_string(a))}_on_unsuback_callback(e,r,i,s){s==0?e({packet_id:i}):r("Failed to unsubscribe: "+vm.error_code_to_string(s))}_on_disconnect_callback(e){e(),this.emit("disconnect"),this.close()}};n(ir,"MqttClientConnection");we.MqttClientConnection=ir;ir.CONNECT="connect";ir.DISCONNECT="disconnect";ir.ERROR="error";ir.INTERRUPT="interrupt";ir.RESUME="resume";ir.MESSAGE="message"});var PA=u(H=>{"use strict";var n3=H&&H.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),s3=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nr=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&n3(e,t,r);return s3(e,t),e};Object.defineProperty(H,"__esModule",{value:!0});H.CrtError=H.resource_safety=H.platform=H.mqtt5=H.mqtt=H.iot=H.io=H.http=H.crt=H.crypto=H.checksums=H.auth=void 0;var o3=nr(Hf());H.platform=o3;var a3=nr(Hx());H.resource_safety=a3;var c3=nr(tm());H.auth=c3;var d3=nr(eA());H.checksums=d3;var u3=nr(rA());H.crt=u3;var l3=nr(nA());H.crypto=l3;var p3=nr(_m());H.http=p3;var f3=nr(on());H.io=f3;var m3=nr(EA());H.iot=m3;var h3=nr(OA());H.mqtt=h3;var _3=nr(Tw());H.mqtt5=_3;var y3=sn();Object.defineProperty(H,"CrtError",{enumerable:!0,get:function(){return y3.CrtError}})});var RA=u((Sm,Ow)=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.isCrtAvailable=void 0;var g3=n(()=>{try{return typeof U=="function"&&typeof Ow<"u"&&Ow.require&&PA()?["md/crt-avail"]:null}catch{return null}},"isCrtAvailable");Sm.isCrtAvailable=g3});var sd=u(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.defaultUserAgent=Cr.UA_APP_ID_INI_NAME=Cr.UA_APP_ID_ENV_NAME=void 0;var w3=rn(),IA=U("os"),Pw=U("process"),v3=RA();Cr.UA_APP_ID_ENV_NAME="AWS_SDK_UA_APP_ID";Cr.UA_APP_ID_INI_NAME="sdk-ua-app-id";var E3=n(({serviceId:t,clientVersion:e})=>{let r=[["aws-sdk-js",e],[`os/${(0,IA.platform)()}`,(0,IA.release)()],["lang/js"],["md/nodejs",`${Pw.versions.node}`]],i=(0,v3.isCrtAvailable)();i&&r.push(i),t&&r.push([`api/${t}`,e]),Pw.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${Pw.env.AWS_EXECUTION_ENV}`]);let s=(0,w3.loadConfig)({environmentVariableSelector:a=>a[Cr.UA_APP_ID_ENV_NAME],configFileSelector:a=>a[Cr.UA_APP_ID_INI_NAME],default:void 0})(),o;return async()=>{if(!o){let a=await s;o=a?[...r,[`app/${a}`]]:[...r]}return o}},"defaultUserAgent");Cr.defaultUserAgent=E3});var qA=u(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.fromBase64=void 0;var S3=_o(),N3=/^[A-Za-z0-9+/]*={0,2}$/,b3=n(t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!N3.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,S3.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},"fromBase64");Nm.fromBase64=b3});var CA=u(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.toBase64=void 0;var x3=_o(),A3=n(t=>(0,x3.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64"),"toBase64");bm.toBase64=A3});var od=u(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});var kA=(A(),b(x));kA.__exportStar(qA(),xm);kA.__exportStar(CA(),xm)});var MA=u((Q_e,T3)=>{T3.exports={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"}});var Iw=u(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.partition=void 0;var O3=(A(),b(x)),P3=O3.__importDefault(MA()),{partitions:Rw}=P3.default,DA=Rw.find(t=>t.id==="aws"),R3=n(t=>{for(let e of Rw){let{regions:r,outputs:i}=e;for(let[s,o]of Object.entries(r))if(s===t)return{...i,...o}}for(let e of Rw){let{regionRegex:r,outputs:i}=e;if(new RegExp(r).test(t))return{...i}}if(!DA)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...DA.outputs}},"partition");Am.partition=R3});var FA=u(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.debugId=void 0;Tm.debugId="endpoints"});var LA=u(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.toDebugString=void 0;function qw(t){return typeof t!="object"||t==null?t:"ref"in t?`$${qw(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(qw).join(", ")})`:JSON.stringify(t,null,2)}n(qw,"toDebugString");Om.toDebugString=qw});var ad=u(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});var zA=(A(),b(x));zA.__exportStar(FA(),Pm);zA.__exportStar(LA(),Pm)});var UA=u(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.EndpointError=void 0;var Rm=class extends Error{constructor(e){super(e),this.name="EndpointError"}};n(Rm,"EndpointError");Im.EndpointError=Rm});var jA=u(WA=>{"use strict";Object.defineProperty(WA,"__esModule",{value:!0})});var $A=u(VA=>{"use strict";Object.defineProperty(VA,"__esModule",{value:!0})});var GA=u(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0})});var JA=u(BA=>{"use strict";Object.defineProperty(BA,"__esModule",{value:!0})});var YA=u(KA=>{"use strict";Object.defineProperty(KA,"__esModule",{value:!0})});var jt=u(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var sa=(A(),b(x));sa.__exportStar(UA(),fn);sa.__exportStar(jA(),fn);sa.__exportStar($A(),fn);sa.__exportStar(GA(),fn);sa.__exportStar(JA(),fn);sa.__exportStar(YA(),fn)});var Cw=u(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.isIpAddress=void 0;var I3=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),q3=n(t=>I3.test(t)||t.startsWith("[")&&t.endsWith("]"),"isIpAddress");qm.isIpAddress=q3});var kw=u(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.isValidHostLabel=void 0;var C3=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),k3=n((t,e=!1)=>{if(!e)return C3.test(t);let r=t.split(".");for(let i of r)if(!(0,cd.isValidHostLabel)(i))return!1;return!0},"isValidHostLabel");cd.isValidHostLabel=k3});var QA=u(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.isVirtualHostableS3Bucket=void 0;var M3=Cw(),D3=kw(),F3=n((t,e=!1)=>{if(e){for(let r of t.split("."))if(!(0,dd.isVirtualHostableS3Bucket)(r))return!1;return!0}return!(!(0,D3.isValidHostLabel)(t)||t.length<3||t.length>63||t!==t.toLowerCase()||(0,M3.isIpAddress)(t))},"isVirtualHostableS3Bucket");dd.isVirtualHostableS3Bucket=F3});var XA=u(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.parseArn=void 0;var L3=n(t=>{let e=t.split(":");if(e.length<6)return null;let[r,i,s,o,a,...c]=e;return r!=="arn"||i===""||s===""||c[0]===""?null:{partition:i,service:s,region:o,accountId:a,resourceId:c[0].includes("/")?c[0].split("/"):c}},"parseArn");Cm.parseArn=L3});var ZA=u(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var Mw=(A(),b(x));Mw.__exportStar(QA(),ud);Mw.__exportStar(XA(),ud);Mw.__exportStar(Iw(),ud)});var eT=u(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.booleanEquals=void 0;var z3=n((t,e)=>t===e,"booleanEquals");km.booleanEquals=z3});var rT=u(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.getAttrPathList=void 0;var tT=jt(),U3=n(t=>{let e=t.split("."),r=[];for(let i of e){let s=i.indexOf("[");if(s!==-1){if(i.indexOf("]")!==i.length-1)throw new tT.EndpointError(`Path: '${t}' does not end with ']'`);let o=i.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new tT.EndpointError(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(i.slice(0,s)),r.push(o)}else r.push(i)}return r},"getAttrPathList");Mm.getAttrPathList=U3});var iT=u(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.getAttr=void 0;var W3=jt(),j3=rT(),V3=n((t,e)=>(0,j3.getAttrPathList)(e).reduce((r,i)=>{if(typeof r!="object")throw new W3.EndpointError(`Index '${i}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(i)]:r[i]},t),"getAttr");Dm.getAttr=V3});var nT=u(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.isSet=void 0;var $3=n(t=>t!=null,"isSet");Fm.isSet=$3});var sT=u(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.not=void 0;var H3=n(t=>!t,"not");Lm.not=H3});var aT=u(oT=>{"use strict";Object.defineProperty(oT,"__esModule",{value:!0})});var cT=u(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.HttpAuthLocation=void 0;var G3;(function(t){t.HEADER="header",t.QUERY="query"})(G3=ld.HttpAuthLocation||(ld.HttpAuthLocation={}))});var uT=u(dT=>{"use strict";Object.defineProperty(dT,"__esModule",{value:!0})});var pT=u(lT=>{"use strict";Object.defineProperty(lT,"__esModule",{value:!0})});var mT=u(fT=>{"use strict";Object.defineProperty(fT,"__esModule",{value:!0})});var _T=u(hT=>{"use strict";Object.defineProperty(hT,"__esModule",{value:!0})});var gT=u(yT=>{"use strict";Object.defineProperty(yT,"__esModule",{value:!0})});var wT=u(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.HostAddressType=void 0;var B3;(function(t){t.AAAA="AAAA",t.A="A"})(B3=pd.HostAddressType||(pd.HostAddressType={}))});var vT=u(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.EndpointURLScheme=void 0;var J3;(function(t){t.HTTP="http",t.HTTPS="https"})(J3=fd.EndpointURLScheme||(fd.EndpointURLScheme={}))});var ST=u(ET=>{"use strict";Object.defineProperty(ET,"__esModule",{value:!0})});var bT=u(NT=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0})});var AT=u(xT=>{"use strict";Object.defineProperty(xT,"__esModule",{value:!0})});var OT=u(TT=>{"use strict";Object.defineProperty(TT,"__esModule",{value:!0})});var RT=u(PT=>{"use strict";Object.defineProperty(PT,"__esModule",{value:!0})});var qT=u(IT=>{"use strict";Object.defineProperty(IT,"__esModule",{value:!0})});var kT=u(CT=>{"use strict";Object.defineProperty(CT,"__esModule",{value:!0})});var MT=u(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});var md=(A(),b(x));md.__exportStar(AT(),rs);md.__exportStar(OT(),rs);md.__exportStar(RT(),rs);md.__exportStar(qT(),rs);md.__exportStar(kT(),rs)});var FT=u(DT=>{"use strict";Object.defineProperty(DT,"__esModule",{value:!0})});var zT=u(LT=>{"use strict";Object.defineProperty(LT,"__esModule",{value:!0})});var WT=u(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0})});var VT=u(jT=>{"use strict";Object.defineProperty(jT,"__esModule",{value:!0})});var HT=u($T=>{"use strict";Object.defineProperty($T,"__esModule",{value:!0})});var BT=u(GT=>{"use strict";Object.defineProperty(GT,"__esModule",{value:!0})});var KT=u(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0})});var QT=u(YT=>{"use strict";Object.defineProperty(YT,"__esModule",{value:!0})});var ZT=u(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0})});var tO=u(eO=>{"use strict";Object.defineProperty(eO,"__esModule",{value:!0})});var iO=u(rO=>{"use strict";Object.defineProperty(rO,"__esModule",{value:!0})});var sO=u(nO=>{"use strict";Object.defineProperty(nO,"__esModule",{value:!0})});var aO=u(oO=>{"use strict";Object.defineProperty(oO,"__esModule",{value:!0})});var dO=u(cO=>{"use strict";Object.defineProperty(cO,"__esModule",{value:!0})});var lO=u(uO=>{"use strict";Object.defineProperty(uO,"__esModule",{value:!0})});var pO=u(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var re=(A(),b(x));re.__exportStar(aT(),Q);re.__exportStar(cT(),Q);re.__exportStar(uT(),Q);re.__exportStar(pT(),Q);re.__exportStar(mT(),Q);re.__exportStar(_T(),Q);re.__exportStar(gT(),Q);re.__exportStar(wT(),Q);re.__exportStar(vT(),Q);re.__exportStar(ST(),Q);re.__exportStar(bT(),Q);re.__exportStar(MT(),Q);re.__exportStar(FT(),Q);re.__exportStar(zT(),Q);re.__exportStar(WT(),Q);re.__exportStar(VT(),Q);re.__exportStar(HT(),Q);re.__exportStar(BT(),Q);re.__exportStar(KT(),Q);re.__exportStar(QT(),Q);re.__exportStar(ZT(),Q);re.__exportStar(tO(),Q);re.__exportStar(iO(),Q);re.__exportStar(sO(),Q);re.__exportStar(aO(),Q);re.__exportStar(dO(),Q);re.__exportStar(lO(),Q)});var fO=u(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});zm.parseURL=void 0;var Fw=pO(),K3=Cw(),Dw={[Fw.EndpointURLScheme.HTTP]:80,[Fw.EndpointURLScheme.HTTPS]:443},Y3=n(t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:_,protocol:w="",path:g="",query:S={}}=t,ie=new URL(`${w}//${h}${_?`:${_}`:""}${g}`);return ie.search=Object.entries(S).map(([Ie,Ne])=>`${Ie}=${Ne}`).join("&"),ie}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:i,hostname:s,pathname:o,protocol:a,search:c}=e;if(c)return null;let l=a.slice(0,-1);if(!Object.values(Fw.EndpointURLScheme).includes(l))return null;let p=(0,K3.isIpAddress)(s),f=r.includes(`${i}:${Dw[l]}`)||typeof t=="string"&&t.includes(`${i}:${Dw[l]}`),m=`${i}${f?`:${Dw[l]}`:""}`;return{scheme:l,authority:m,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:p}},"parseURL");zm.parseURL=Y3});var mO=u(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.stringEquals=void 0;var Q3=n((t,e)=>t===e,"stringEquals");Um.stringEquals=Q3});var hO=u(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.substring=void 0;var X3=n((t,e,r,i)=>e>=r||t.length<r?null:i?t.substring(t.length-r,t.length-e):t.substring(e,r),"substring");Wm.substring=X3});var _O=u(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.uriEncode=void 0;var Z3=n(t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode");jm.uriEncode=Z3});var Lw=u(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.aws=void 0;var kr=(A(),b(x));Tt.aws=kr.__importStar(ZA());kr.__exportStar(eT(),Tt);kr.__exportStar(iT(),Tt);kr.__exportStar(nT(),Tt);kr.__exportStar(kw(),Tt);kr.__exportStar(sT(),Tt);kr.__exportStar(fO(),Tt);kr.__exportStar(mO(),Tt);kr.__exportStar(hO(),Tt);kr.__exportStar(_O(),Tt)});var zw=u(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.evaluateTemplate=void 0;var eG=Lw(),tG=n((t,e)=>{let r=[],i={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let a=t.indexOf("}",o);if(a===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[a+1]==="}"&&(r.push(t.slice(o+1,a)),s=a+2);let c=t.substring(o+1,a);if(c.includes("#")){let[l,p]=c.split("#");r.push((0,eG.getAttr)(i[l],p))}else r.push(i[c]);s=a+1}return r.join("")},"evaluateTemplate");Vm.evaluateTemplate=tG});var yO=u($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.getReferenceValue=void 0;var rG=n(({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],"getReferenceValue");$m.getReferenceValue=rG});var hd=u(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.evaluateExpression=void 0;var iG=jt(),nG=Uw(),sG=zw(),oG=yO(),aG=n((t,e,r)=>{if(typeof t=="string")return(0,sG.evaluateTemplate)(t,r);if(t.fn)return(0,nG.callFunction)(t,r);if(t.ref)return(0,oG.getReferenceValue)(t,r);throw new iG.EndpointError(`'${e}': ${String(t)} is not a string, function or reference.`)},"evaluateExpression");Hm.evaluateExpression=aG});var Uw=u(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.callFunction=void 0;var cG=(A(),b(x)),dG=cG.__importStar(Lw()),uG=hd(),lG=n(({fn:t,argv:e},r)=>{let i=e.map(s=>["boolean","number"].includes(typeof s)?s:(0,uG.evaluateExpression)(s,"arg",r));return t.split(".").reduce((s,o)=>s[o],dG)(...i)},"callFunction");Gm.callFunction=lG});var gO=u(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.evaluateCondition=void 0;var Ww=ad(),pG=jt(),fG=Uw(),mG=n(({assign:t,...e},r)=>{var i,s;if(t&&t in r.referenceRecord)throw new pG.EndpointError(`'${t}' is already defined in Reference Record.`);let o=(0,fG.callFunction)(e,r);return(s=(i=r.logger)===null||i===void 0?void 0:i.debug)===null||s===void 0||s.call(i,Ww.debugId,`evaluateCondition: ${(0,Ww.toDebugString)(e)} = ${(0,Ww.toDebugString)(o)}`),{result:o===""?!0:!!o,...t!=null&&{toAssign:{name:t,value:o}}}},"evaluateCondition");Bm.evaluateCondition=mG});var Km=u(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.evaluateConditions=void 0;var wO=ad(),hG=gO(),_G=n((t=[],e)=>{var r,i;let s={};for(let o of t){let{result:a,toAssign:c}=(0,hG.evaluateCondition)(o,{...e,referenceRecord:{...e.referenceRecord,...s}});if(!a)return{result:a};c&&(s[c.name]=c.value,(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,wO.debugId,`assign: ${c.name} := ${(0,wO.toDebugString)(c.value)}`))}return{result:!0,referenceRecord:s}},"evaluateConditions");Jm.evaluateConditions=_G});var vO=u(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.getEndpointHeaders=void 0;var yG=jt(),gG=hd(),wG=n((t,e)=>Object.entries(t).reduce((r,[i,s])=>({...r,[i]:s.map(o=>{let a=(0,gG.evaluateExpression)(o,"Header value entry",e);if(typeof a!="string")throw new yG.EndpointError(`Header '${i}' value '${a}' is not a string`);return a})}),{}),"getEndpointHeaders");Ym.getEndpointHeaders=wG});var SO=u(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.getEndpointProperty=void 0;var EO=jt(),vG=zw(),EG=jw(),SG=n((t,e)=>{if(Array.isArray(t))return t.map(r=>(0,_d.getEndpointProperty)(r,e));switch(typeof t){case"string":return(0,vG.evaluateTemplate)(t,e);case"object":if(t===null)throw new EO.EndpointError(`Unexpected endpoint property: ${t}`);return(0,EG.getEndpointProperties)(t,e);case"boolean":return t;default:throw new EO.EndpointError(`Unexpected endpoint property type: ${typeof t}`)}},"getEndpointProperty");_d.getEndpointProperty=SG});var jw=u(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.getEndpointProperties=void 0;var NG=SO(),bG=n((t,e)=>Object.entries(t).reduce((r,[i,s])=>({...r,[i]:(0,NG.getEndpointProperty)(s,e)}),{}),"getEndpointProperties");Qm.getEndpointProperties=bG});var NO=u(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.getEndpointUrl=void 0;var xG=jt(),AG=hd(),TG=n((t,e)=>{let r=(0,AG.evaluateExpression)(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(i){throw console.error(`Failed to construct URL with ${r}`,i),i}throw new xG.EndpointError(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl");Xm.getEndpointUrl=TG});var xO=u(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.evaluateEndpointRule=void 0;var bO=ad(),OG=Km(),PG=vO(),RG=jw(),IG=NO(),qG=n((t,e)=>{var r,i;let{conditions:s,endpoint:o}=t,{result:a,referenceRecord:c}=(0,OG.evaluateConditions)(s,e);if(!a)return;let l={...e,referenceRecord:{...e.referenceRecord,...c}},{url:p,properties:f,headers:m}=o;return(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,bO.debugId,`Resolving endpoint from template: ${(0,bO.toDebugString)(o)}`),{...m!=null&&{headers:(0,PG.getEndpointHeaders)(m,l)},...f!=null&&{properties:(0,RG.getEndpointProperties)(f,l)},url:(0,IG.getEndpointUrl)(p,l)}},"evaluateEndpointRule");Zm.evaluateEndpointRule=qG});var AO=u(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.evaluateErrorRule=void 0;var CG=jt(),kG=Km(),MG=hd(),DG=n((t,e)=>{let{conditions:r,error:i}=t,{result:s,referenceRecord:o}=(0,kG.evaluateConditions)(r,e);if(s)throw new CG.EndpointError((0,MG.evaluateExpression)(i,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},"evaluateErrorRule");eh.evaluateErrorRule=DG});var TO=u(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.evaluateTreeRule=void 0;var FG=Km(),LG=Vw(),zG=n((t,e)=>{let{conditions:r,rules:i}=t,{result:s,referenceRecord:o}=(0,FG.evaluateConditions)(r,e);if(s)return(0,LG.evaluateRules)(i,{...e,referenceRecord:{...e.referenceRecord,...o}})},"evaluateTreeRule");th.evaluateTreeRule=zG});var Vw=u(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.evaluateRules=void 0;var OO=jt(),UG=xO(),WG=AO(),jG=TO(),VG=n((t,e)=>{for(let r of t)if(r.type==="endpoint"){let i=(0,UG.evaluateEndpointRule)(r,e);if(i)return i}else if(r.type==="error")(0,WG.evaluateErrorRule)(r,e);else if(r.type==="tree"){let i=(0,jG.evaluateTreeRule)(r,e);if(i)return i}else throw new OO.EndpointError(`Unknown endpoint rule: ${r}`);throw new OO.EndpointError("Rules evaluation failed")},"evaluateRules");rh.evaluateRules=VG});var PO=u($w=>{"use strict";Object.defineProperty($w,"__esModule",{value:!0});var $G=(A(),b(x));$G.__exportStar(Vw(),$w)});var RO=u(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.resolveEndpoint=void 0;var ih=ad(),HG=jt(),GG=PO(),BG=n((t,e)=>{var r,i,s,o,a,c;let{endpointParams:l,logger:p}=e,{parameters:f,rules:m}=t;(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,ih.debugId,`Initial EndpointParams: ${(0,ih.toDebugString)(l)}`);let h=Object.entries(f).filter(([,g])=>g.default!=null).map(([g,S])=>[g,S.default]);if(h.length>0)for(let[g,S]of h)l[g]=(s=l[g])!==null&&s!==void 0?s:S;let _=Object.entries(f).filter(([,g])=>g.required).map(([g])=>g);for(let g of _)if(l[g]==null)throw new HG.EndpointError(`Missing required parameter: '${g}'`);let w=(0,GG.evaluateRules)(m,{endpointParams:l,logger:p,referenceRecord:{}});if(!((o=e.endpointParams)===null||o===void 0)&&o.Endpoint)try{let g=new URL(e.endpointParams.Endpoint),{protocol:S,port:ie}=g;w.url.protocol=S,w.url.port=ie}catch{}return(c=(a=e.logger)===null||a===void 0?void 0:a.debug)===null||c===void 0||c.call(a,ih.debugId,`Resolved endpoint: ${(0,ih.toDebugString)(w)}`),w},"resolveEndpoint");nh.resolveEndpoint=BG});var gd=u(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var Hw=(A(),b(x));Hw.__exportStar(Iw(),yd);Hw.__exportStar(RO(),yd);Hw.__exportStar(jt(),yd)});var jO=u(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.ruleSet=void 0;var LO="required",hi="fn",_i="argv",oa="ref",Gw="PartitionResult",Mr="tree",wd="error",vd="endpoint",IO={[LO]:!1,type:"String"},qO={[LO]:!0,default:!1,type:"Boolean"},zO={[oa]:"Endpoint"},UO={[hi]:"booleanEquals",[_i]:[{[oa]:"UseFIPS"},!0]},WO={[hi]:"booleanEquals",[_i]:[{[oa]:"UseDualStack"},!0]},Dr={},CO={[hi]:"booleanEquals",[_i]:[!0,{[hi]:"getAttr",[_i]:[{[oa]:Gw},"supportsFIPS"]}]},kO={[hi]:"booleanEquals",[_i]:[!0,{[hi]:"getAttr",[_i]:[{[oa]:Gw},"supportsDualStack"]}]},MO=[zO],DO=[UO],FO=[WO],JG={version:"1.0",parameters:{Region:IO,UseDualStack:qO,UseFIPS:qO,Endpoint:IO},rules:[{conditions:[{[hi]:"aws.partition",[_i]:[{[oa]:"Region"}],assign:Gw}],type:Mr,rules:[{conditions:[{[hi]:"isSet",[_i]:MO},{[hi]:"parseURL",[_i]:MO,assign:"url"}],type:Mr,rules:[{conditions:DO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:wd},{type:Mr,rules:[{conditions:FO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:wd},{endpoint:{url:zO,properties:Dr,headers:Dr},type:vd}]}]},{conditions:[UO,WO],type:Mr,rules:[{conditions:[CO,kO],type:Mr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dr,headers:Dr},type:vd}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:wd}]},{conditions:DO,type:Mr,rules:[{conditions:[CO],type:Mr,rules:[{type:Mr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Dr,headers:Dr},type:vd}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:wd}]},{conditions:FO,type:Mr,rules:[{conditions:[kO],type:Mr,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dr,headers:Dr},type:vd}]},{error:"DualStack is enabled but this partition does not support DualStack",type:wd}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Dr,headers:Dr},type:vd}]}]};sh.ruleSet=JG});var VO=u(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.defaultEndpointResolver=void 0;var KG=gd(),YG=jO(),QG=n((t,e={})=>(0,KG.resolveEndpoint)(YG.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");oh.defaultEndpointResolver=QG});var GO=u(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.getRuntimeConfig=void 0;var XG=C(),ZG=Mn(),$O=od(),HO=di(),eB=VO(),tB=n(t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??$O.fromBase64,base64Encoder:t?.base64Encoder??$O.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??eB.defaultEndpointResolver,logger:t?.logger??new XG.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??ZG.parseUrl,utf8Decoder:t?.utf8Decoder??HO.fromUtf8,utf8Encoder:t?.utf8Encoder??HO.toUtf8}),"getRuntimeConfig");ah.getRuntimeConfig=tB});var BO=u(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.IMDS_REGION_PATH=mt.DEFAULTS_MODE_OPTIONS=mt.ENV_IMDS_DISABLED=mt.AWS_DEFAULT_REGION_ENV=mt.AWS_REGION_ENV=mt.AWS_EXECUTION_ENV=void 0;mt.AWS_EXECUTION_ENV="AWS_EXECUTION_ENV";mt.AWS_REGION_ENV="AWS_REGION";mt.AWS_DEFAULT_REGION_ENV="AWS_DEFAULT_REGION";mt.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";mt.DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"];mt.IMDS_REGION_PATH="/latest/meta-data/placement/region"});var JO=u(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.NODE_DEFAULTS_MODE_CONFIG_OPTIONS=void 0;var rB="AWS_DEFAULTS_MODE",iB="defaults_mode";ch.NODE_DEFAULTS_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[rB],configFileSelector:t=>t[iB],default:"legacy"}});var QO=u(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.resolveDefaultsModeConfig=void 0;var nB=hr(),KO=rf(),YO=rn(),sB=ee(),mn=BO(),oB=JO(),aB=n(({region:t=(0,YO.loadConfig)(nB.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=(0,YO.loadConfig)(oB.NODE_DEFAULTS_MODE_CONFIG_OPTIONS)}={})=>(0,sB.memoize)(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return cB(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${mn.DEFAULTS_MODE_OPTIONS.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig");dh.resolveDefaultsModeConfig=aB;var cB=n(async t=>{if(t){let e=typeof t=="function"?await t():t,r=await dB();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),dB=n(async()=>{var t;if(process.env[mn.AWS_EXECUTION_ENV]&&(process.env[mn.AWS_REGION_ENV]||process.env[mn.AWS_DEFAULT_REGION_ENV]))return(t=process.env[mn.AWS_REGION_ENV])!==null&&t!==void 0?t:process.env[mn.AWS_DEFAULT_REGION_ENV];if(!process.env[mn.ENV_IMDS_DISABLED])try{let e=await(0,KO.getInstanceMetadataEndpoint)();return(await(0,KO.httpRequest)({...e,path:mn.IMDS_REGION_PATH})).toString()}catch{}},"inferPhysicalRegion")});var Ed=u(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});var uB=(A(),b(x));uB.__exportStar(QO(),Bw)});var eP=u(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.getRuntimeConfig=void 0;var lB=(A(),b(x)),pB=lB.__importDefault(Tx()),uh=hr(),fB=Jc(),XO=ci(),Sd=rn(),ZO=Yc(),mB=Qc(),hB=Mt(),_B=sd(),yB=GO(),gB=C(),wB=Ed(),vB=C(),EB=n(t=>{(0,vB.emitWarningIfUnsupportedVersion)(process.version);let e=(0,wB.resolveDefaultsModeConfig)(t),r=n(()=>e().then(gB.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,yB.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??mB.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,_B.defaultUserAgent)({serviceId:i.serviceId,clientVersion:pB.default.version}),maxAttempts:t?.maxAttempts??(0,Sd.loadConfig)(XO.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Sd.loadConfig)(uh.NODE_REGION_CONFIG_OPTIONS,uh.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new ZO.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Sd.loadConfig)({...XO.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||hB.DEFAULT_RETRY_MODE}),sha256:t?.sha256??fB.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??ZO.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Sd.loadConfig)(uh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Sd.loadConfig)(uh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");lh.getRuntimeConfig=EB});var Nd=u(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.SSOClient=void 0;var SB=hr(),NB=Ac(),bB=ne(),tP=Tc(),xB=Oc(),AB=Pc(),rP=ci(),iP=zc(),TB=C(),OB=Ax(),PB=eP(),ph=class extends TB.Client{constructor(e){let r=(0,PB.getRuntimeConfig)(e),i=(0,OB.resolveClientEndpointParameters)(r),s=(0,SB.resolveRegionConfig)(i),o=(0,bB.resolveEndpointConfig)(s),a=(0,rP.resolveRetryConfig)(o),c=(0,tP.resolveHostHeaderConfig)(a),l=(0,iP.resolveUserAgentConfig)(c);super(l),this.config=l,this.middlewareStack.use((0,rP.getRetryPlugin)(this.config)),this.middlewareStack.use((0,NB.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,tP.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,xB.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,AB.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,iP.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(ph,"SSOClient");fh.SSOClient=ph});var _h=u(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.SSO=void 0;var RB=rw(),IB=bf(),qB=Af(),CB=iw(),kB=Nd(),mh=class extends kB.SSOClient{getRoleCredentials(e,r,i){let s=new RB.GetRoleCredentialsCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}listAccountRoles(e,r,i){let s=new IB.ListAccountRolesCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}listAccounts(e,r,i){let s=new qB.ListAccountsCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}logout(e,r,i){let s=new CB.LogoutCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(mh,"SSO");hh.SSO=mh});var nP=u(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var yh=(A(),b(x));yh.__exportStar(rw(),aa);yh.__exportStar(bf(),aa);yh.__exportStar(Af(),aa);yh.__exportStar(iw(),aa)});var sP=u(Jw=>{"use strict";Object.defineProperty(Jw,"__esModule",{value:!0});var MB=(A(),b(x));MB.__exportStar(Xn(),Jw)});var aP=u(oP=>{"use strict";Object.defineProperty(oP,"__esModule",{value:!0})});var cP=u(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.paginateListAccountRoles=void 0;var DB=bf(),FB=_h(),LB=Nd(),zB=n(async(t,e,...r)=>await t.send(new DB.ListAccountRolesCommand(e),...r),"makePagedClientRequest"),UB=n(async(t,e,...r)=>await t.listAccountRoles(e,...r),"makePagedRequest");async function*WB(t,e,...r){let i=t.startingToken||void 0,s=!0,o;for(;s;){if(e.nextToken=i,e.maxResults=t.pageSize,t.client instanceof FB.SSO)o=await UB(t.client,e,...r);else if(t.client instanceof LB.SSOClient)o=await zB(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let a=i;i=o.nextToken,s=!!(i&&(!t.stopOnSameToken||i!==a))}return void 0}n(WB,"paginateListAccountRoles");gh.paginateListAccountRoles=WB});var dP=u(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.paginateListAccounts=void 0;var jB=Af(),VB=_h(),$B=Nd(),HB=n(async(t,e,...r)=>await t.send(new jB.ListAccountsCommand(e),...r),"makePagedClientRequest"),GB=n(async(t,e,...r)=>await t.listAccounts(e,...r),"makePagedRequest");async function*BB(t,e,...r){let i=t.startingToken||void 0,s=!0,o;for(;s;){if(e.nextToken=i,e.maxResults=t.pageSize,t.client instanceof VB.SSO)o=await GB(t.client,e,...r);else if(t.client instanceof $B.SSOClient)o=await HB(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let a=i;i=o.nextToken,s=!!(i&&(!t.stopOnSameToken||i!==a))}return void 0}n(BB,"paginateListAccounts");wh.paginateListAccounts=BB});var uP=u(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var Kw=(A(),b(x));Kw.__exportStar(aP(),bd);Kw.__exportStar(cP(),bd);Kw.__exportStar(dP(),bd)});var lP=u(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.SSOServiceException=void 0;var xd=(A(),b(x));xd.__exportStar(_h(),yi);xd.__exportStar(Nd(),yi);xd.__exportStar(nP(),yi);xd.__exportStar(sP(),yi);xd.__exportStar(uP(),yi);var JB=uf();Object.defineProperty(yi,"SSOServiceException",{enumerable:!0,get:function(){return JB.SSOServiceException}})});var vh=u(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.REFRESH_MESSAGE=ca.EXPIRE_WINDOW_MS=void 0;ca.EXPIRE_WINDOW_MS=5*60*1e3;ca.REFRESH_MESSAGE="To refresh this SSO session run 'aws sso login' with the corresponding profile."});var Sh=u(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.SSOOIDCServiceException=void 0;var KB=C(),da=class extends KB.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,da.prototype)}};n(da,"SSOOIDCServiceException");Eh.SSOOIDCServiceException=da});var Sa=u(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.StartDeviceAuthorizationResponseFilterSensitiveLog=z.StartDeviceAuthorizationRequestFilterSensitiveLog=z.RegisterClientResponseFilterSensitiveLog=z.RegisterClientRequestFilterSensitiveLog=z.CreateTokenResponseFilterSensitiveLog=z.CreateTokenRequestFilterSensitiveLog=z.InvalidClientMetadataException=z.UnsupportedGrantTypeException=z.UnauthorizedClientException=z.SlowDownException=z.InvalidScopeException=z.InvalidRequestException=z.InvalidGrantException=z.InvalidClientException=z.InternalServerException=z.ExpiredTokenException=z.AuthorizationPendingException=z.AccessDeniedException=void 0;var Vt=Sh(),ua=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,ua.prototype),this.error=e.error,this.error_description=e.error_description}};n(ua,"AccessDeniedException");z.AccessDeniedException=ua;var la=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,la.prototype),this.error=e.error,this.error_description=e.error_description}};n(la,"AuthorizationPendingException");z.AuthorizationPendingException=la;var pa=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,pa.prototype),this.error=e.error,this.error_description=e.error_description}};n(pa,"ExpiredTokenException");z.ExpiredTokenException=pa;var fa=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,fa.prototype),this.error=e.error,this.error_description=e.error_description}};n(fa,"InternalServerException");z.InternalServerException=fa;var ma=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,ma.prototype),this.error=e.error,this.error_description=e.error_description}};n(ma,"InvalidClientException");z.InvalidClientException=ma;var ha=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,ha.prototype),this.error=e.error,this.error_description=e.error_description}};n(ha,"InvalidGrantException");z.InvalidGrantException=ha;var _a=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,_a.prototype),this.error=e.error,this.error_description=e.error_description}};n(_a,"InvalidRequestException");z.InvalidRequestException=_a;var ya=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,ya.prototype),this.error=e.error,this.error_description=e.error_description}};n(ya,"InvalidScopeException");z.InvalidScopeException=ya;var ga=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,ga.prototype),this.error=e.error,this.error_description=e.error_description}};n(ga,"SlowDownException");z.SlowDownException=ga;var wa=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,wa.prototype),this.error=e.error,this.error_description=e.error_description}};n(wa,"UnauthorizedClientException");z.UnauthorizedClientException=wa;var va=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,va.prototype),this.error=e.error,this.error_description=e.error_description}};n(va,"UnsupportedGrantTypeException");z.UnsupportedGrantTypeException=va;var Ea=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidClientMetadataException",$fault:"client",...e}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Ea.prototype),this.error=e.error,this.error_description=e.error_description}};n(Ea,"InvalidClientMetadataException");z.InvalidClientMetadataException=Ea;var YB=n(t=>({...t}),"CreateTokenRequestFilterSensitiveLog");z.CreateTokenRequestFilterSensitiveLog=YB;var QB=n(t=>({...t}),"CreateTokenResponseFilterSensitiveLog");z.CreateTokenResponseFilterSensitiveLog=QB;var XB=n(t=>({...t}),"RegisterClientRequestFilterSensitiveLog");z.RegisterClientRequestFilterSensitiveLog=XB;var ZB=n(t=>({...t}),"RegisterClientResponseFilterSensitiveLog");z.RegisterClientResponseFilterSensitiveLog=ZB;var eJ=n(t=>({...t}),"StartDeviceAuthorizationRequestFilterSensitiveLog");z.StartDeviceAuthorizationRequestFilterSensitiveLog=eJ;var tJ=n(t=>({...t}),"StartDeviceAuthorizationResponseFilterSensitiveLog");z.StartDeviceAuthorizationResponseFilterSensitiveLog=tJ});var bh=u(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.deserializeAws_restJson1StartDeviceAuthorizationCommand=ht.deserializeAws_restJson1RegisterClientCommand=ht.deserializeAws_restJson1CreateTokenCommand=ht.serializeAws_restJson1StartDeviceAuthorizationCommand=ht.serializeAws_restJson1RegisterClientCommand=ht.serializeAws_restJson1CreateTokenCommand=void 0;var Yw=tt(),T=C(),$t=Sa(),Qw=Sh(),rJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/token`,l;return l=JSON.stringify({...t.clientId!=null&&{clientId:t.clientId},...t.clientSecret!=null&&{clientSecret:t.clientSecret},...t.code!=null&&{code:t.code},...t.deviceCode!=null&&{deviceCode:t.deviceCode},...t.grantType!=null&&{grantType:t.grantType},...t.redirectUri!=null&&{redirectUri:t.redirectUri},...t.refreshToken!=null&&{refreshToken:t.refreshToken},...t.scope!=null&&{scope:_P(t.scope,e)}}),new Yw.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1CreateTokenCommand");ht.serializeAws_restJson1CreateTokenCommand=rJ;var iJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/client/register`,l;return l=JSON.stringify({...t.clientName!=null&&{clientName:t.clientName},...t.clientType!=null&&{clientType:t.clientType},...t.scopes!=null&&{scopes:_P(t.scopes,e)}}),new Yw.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1RegisterClientCommand");ht.serializeAws_restJson1RegisterClientCommand=iJ;var nJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/device_authorization`,l;return l=JSON.stringify({...t.clientId!=null&&{clientId:t.clientId},...t.clientSecret!=null&&{clientSecret:t.clientSecret},...t.startUrl!=null&&{startUrl:t.startUrl}}),new Yw.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1StartDeviceAuthorizationCommand");ht.serializeAws_restJson1StartDeviceAuthorizationCommand=nJ;var sJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return oJ(t,e);let r=it({$metadata:nt(t)}),i=(0,T.expectNonNull)((0,T.expectObject)(await Nh(t.body,e)),"body");return i.accessToken!=null&&(r.accessToken=(0,T.expectString)(i.accessToken)),i.expiresIn!=null&&(r.expiresIn=(0,T.expectInt32)(i.expiresIn)),i.idToken!=null&&(r.idToken=(0,T.expectString)(i.idToken)),i.refreshToken!=null&&(r.refreshToken=(0,T.expectString)(i.refreshToken)),i.tokenType!=null&&(r.tokenType=(0,T.expectString)(i.tokenType)),r},"deserializeAws_restJson1CreateTokenCommand");ht.deserializeAws_restJson1CreateTokenCommand=sJ;var oJ=n(async(t,e)=>{let r={...t,body:await ev(t.body,e)},i=tv(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await lJ(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await pJ(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await fJ(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Xw(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await pP(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await hJ(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Zw(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await fP(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await mP(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await hP(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await _J(r,e);default:let s=r.body;(0,T.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Qw.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1CreateTokenCommandError"),aJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return cJ(t,e);let r=it({$metadata:nt(t)}),i=(0,T.expectNonNull)((0,T.expectObject)(await Nh(t.body,e)),"body");return i.authorizationEndpoint!=null&&(r.authorizationEndpoint=(0,T.expectString)(i.authorizationEndpoint)),i.clientId!=null&&(r.clientId=(0,T.expectString)(i.clientId)),i.clientIdIssuedAt!=null&&(r.clientIdIssuedAt=(0,T.expectLong)(i.clientIdIssuedAt)),i.clientSecret!=null&&(r.clientSecret=(0,T.expectString)(i.clientSecret)),i.clientSecretExpiresAt!=null&&(r.clientSecretExpiresAt=(0,T.expectLong)(i.clientSecretExpiresAt)),i.tokenEndpoint!=null&&(r.tokenEndpoint=(0,T.expectString)(i.tokenEndpoint)),r},"deserializeAws_restJson1RegisterClientCommand");ht.deserializeAws_restJson1RegisterClientCommand=aJ;var cJ=n(async(t,e)=>{let r={...t,body:await ev(t.body,e)},i=tv(t,r.body);switch(i){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Xw(r,e);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await mJ(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Zw(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await fP(r,e);default:let s=r.body;(0,T.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Qw.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1RegisterClientCommandError"),dJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return uJ(t,e);let r=it({$metadata:nt(t)}),i=(0,T.expectNonNull)((0,T.expectObject)(await Nh(t.body,e)),"body");return i.deviceCode!=null&&(r.deviceCode=(0,T.expectString)(i.deviceCode)),i.expiresIn!=null&&(r.expiresIn=(0,T.expectInt32)(i.expiresIn)),i.interval!=null&&(r.interval=(0,T.expectInt32)(i.interval)),i.userCode!=null&&(r.userCode=(0,T.expectString)(i.userCode)),i.verificationUri!=null&&(r.verificationUri=(0,T.expectString)(i.verificationUri)),i.verificationUriComplete!=null&&(r.verificationUriComplete=(0,T.expectString)(i.verificationUriComplete)),r},"deserializeAws_restJson1StartDeviceAuthorizationCommand");ht.deserializeAws_restJson1StartDeviceAuthorizationCommand=dJ;var uJ=n(async(t,e)=>{let r={...t,body:await ev(t.body,e)},i=tv(t,r.body);switch(i){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Xw(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await pP(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Zw(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await mP(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await hP(r,e);default:let s=r.body;(0,T.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Qw.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1StartDeviceAuthorizationCommandError"),it=T.map,lJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.AccessDeniedException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AccessDeniedExceptionResponse"),pJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.AuthorizationPendingException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AuthorizationPendingExceptionResponse"),fJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.ExpiredTokenException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ExpiredTokenExceptionResponse"),Xw=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InternalServerException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InternalServerExceptionResponse"),pP=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidClientException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidClientExceptionResponse"),mJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidClientMetadataException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidClientMetadataExceptionResponse"),hJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidGrantException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidGrantExceptionResponse"),Zw=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidRequestException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidRequestExceptionResponse"),fP=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidScopeException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidScopeExceptionResponse"),mP=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.SlowDownException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1SlowDownExceptionResponse"),hP=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.UnauthorizedClientException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnauthorizedClientExceptionResponse"),_J=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.UnsupportedGrantTypeException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnsupportedGrantTypeExceptionResponse"),_P=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1Scopes"),nt=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),yJ=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),gJ=n((t,e)=>yJ(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Nh=n((t,e)=>gJ(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),ev=n(async(t,e)=>{let r=await Nh(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),tv=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var rv=u(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.CreateTokenCommand=void 0;var wJ=ne(),vJ=me(),EJ=C(),yP=Sa(),gP=bh(),Na=class extends EJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,vJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,wJ.getEndpointPlugin)(r,Na.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:yP.CreateTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:yP.CreateTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,gP.serializeAws_restJson1CreateTokenCommand)(e,r)}deserialize(e,r){return(0,gP.deserializeAws_restJson1CreateTokenCommand)(e,r)}};n(Na,"CreateTokenCommand");xh.CreateTokenCommand=Na});var iv=u(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.RegisterClientCommand=void 0;var SJ=ne(),NJ=me(),bJ=C(),wP=Sa(),vP=bh(),ba=class extends bJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,NJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,SJ.getEndpointPlugin)(r,ba.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:wP.RegisterClientRequestFilterSensitiveLog,outputFilterSensitiveLog:wP.RegisterClientResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,vP.serializeAws_restJson1RegisterClientCommand)(e,r)}deserialize(e,r){return(0,vP.deserializeAws_restJson1RegisterClientCommand)(e,r)}};n(ba,"RegisterClientCommand");Ah.RegisterClientCommand=ba});var nv=u(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.StartDeviceAuthorizationCommand=void 0;var xJ=ne(),AJ=me(),TJ=C(),EP=Sa(),SP=bh(),xa=class extends TJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,AJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,xJ.getEndpointPlugin)(r,xa.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:EP.StartDeviceAuthorizationRequestFilterSensitiveLog,outputFilterSensitiveLog:EP.StartDeviceAuthorizationResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,SP.serializeAws_restJson1StartDeviceAuthorizationCommand)(e,r)}deserialize(e,r){return(0,SP.deserializeAws_restJson1StartDeviceAuthorizationCommand)(e,r)}};n(xa,"StartDeviceAuthorizationCommand");Th.StartDeviceAuthorizationCommand=xa});var NP=u(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.resolveClientEndpointParameters=void 0;var OJ=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),"resolveClientEndpointParameters");Oh.resolveClientEndpointParameters=OJ});var bP=u((Fwe,PJ)=>{PJ.exports={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var DP=u(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.ruleSet=void 0;var qP="required",gi="fn",wi="argv",Aa="ref",sv="PartitionResult",Fr="tree",Ad="error",Td="endpoint",xP={[qP]:!1,type:"String"},AP={[qP]:!0,default:!1,type:"Boolean"},CP={[Aa]:"Endpoint"},kP={[gi]:"booleanEquals",[wi]:[{[Aa]:"UseFIPS"},!0]},MP={[gi]:"booleanEquals",[wi]:[{[Aa]:"UseDualStack"},!0]},Lr={},TP={[gi]:"booleanEquals",[wi]:[!0,{[gi]:"getAttr",[wi]:[{[Aa]:sv},"supportsFIPS"]}]},OP={[gi]:"booleanEquals",[wi]:[!0,{[gi]:"getAttr",[wi]:[{[Aa]:sv},"supportsDualStack"]}]},PP=[CP],RP=[kP],IP=[MP],RJ={version:"1.0",parameters:{Region:xP,UseDualStack:AP,UseFIPS:AP,Endpoint:xP},rules:[{conditions:[{[gi]:"aws.partition",[wi]:[{[Aa]:"Region"}],assign:sv}],type:Fr,rules:[{conditions:[{[gi]:"isSet",[wi]:PP},{[gi]:"parseURL",[wi]:PP,assign:"url"}],type:Fr,rules:[{conditions:RP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ad},{type:Fr,rules:[{conditions:IP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ad},{endpoint:{url:CP,properties:Lr,headers:Lr},type:Td}]}]},{conditions:[kP,MP],type:Fr,rules:[{conditions:[TP,OP],type:Fr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Lr,headers:Lr},type:Td}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ad}]},{conditions:RP,type:Fr,rules:[{conditions:[TP],type:Fr,rules:[{type:Fr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Lr,headers:Lr},type:Td}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ad}]},{conditions:IP,type:Fr,rules:[{conditions:[OP],type:Fr,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Lr,headers:Lr},type:Td}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ad}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Lr,headers:Lr},type:Td}]}]};Ph.ruleSet=RJ});var FP=u(Rh=>{"use strict";Object.defineProperty(Rh,"__esModule",{value:!0});Rh.defaultEndpointResolver=void 0;var IJ=gd(),qJ=DP(),CJ=n((t,e={})=>(0,IJ.resolveEndpoint)(qJ.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");Rh.defaultEndpointResolver=CJ});var UP=u(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.getRuntimeConfig=void 0;var kJ=C(),MJ=Mn(),LP=od(),zP=di(),DJ=FP(),FJ=n(t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??LP.fromBase64,base64Encoder:t?.base64Encoder??LP.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??DJ.defaultEndpointResolver,logger:t?.logger??new kJ.NoOpLogger,serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??MJ.parseUrl,utf8Decoder:t?.utf8Decoder??zP.fromUtf8,utf8Encoder:t?.utf8Encoder??zP.toUtf8}),"getRuntimeConfig");Ih.getRuntimeConfig=FJ});var VP=u(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.getRuntimeConfig=void 0;var LJ=(A(),b(x)),zJ=LJ.__importDefault(bP()),qh=hr(),UJ=Jc(),WP=ci(),Od=rn(),jP=Yc(),WJ=Qc(),jJ=Mt(),VJ=sd(),$J=UP(),HJ=C(),GJ=Ed(),BJ=C(),JJ=n(t=>{(0,BJ.emitWarningIfUnsupportedVersion)(process.version);let e=(0,GJ.resolveDefaultsModeConfig)(t),r=n(()=>e().then(HJ.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,$J.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??WJ.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,VJ.defaultUserAgent)({serviceId:i.serviceId,clientVersion:zJ.default.version}),maxAttempts:t?.maxAttempts??(0,Od.loadConfig)(WP.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Od.loadConfig)(qh.NODE_REGION_CONFIG_OPTIONS,qh.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new jP.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Od.loadConfig)({...WP.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||jJ.DEFAULT_RETRY_MODE}),sha256:t?.sha256??UJ.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??jP.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Od.loadConfig)(qh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Od.loadConfig)(qh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");Ch.getRuntimeConfig=JJ});var ov=u(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.SSOOIDCClient=void 0;var KJ=hr(),YJ=Ac(),QJ=ne(),$P=Tc(),XJ=Oc(),ZJ=Pc(),HP=ci(),GP=zc(),e4=C(),t4=NP(),r4=VP(),kh=class extends e4.Client{constructor(e){let r=(0,r4.getRuntimeConfig)(e),i=(0,t4.resolveClientEndpointParameters)(r),s=(0,KJ.resolveRegionConfig)(i),o=(0,QJ.resolveEndpointConfig)(s),a=(0,HP.resolveRetryConfig)(o),c=(0,$P.resolveHostHeaderConfig)(a),l=(0,GP.resolveUserAgentConfig)(c);super(l),this.config=l,this.middlewareStack.use((0,HP.getRetryPlugin)(this.config)),this.middlewareStack.use((0,YJ.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,$P.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,XJ.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,ZJ.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,GP.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(kh,"SSOOIDCClient");Mh.SSOOIDCClient=kh});var BP=u(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.SSOOIDC=void 0;var i4=rv(),n4=iv(),s4=nv(),o4=ov(),Dh=class extends o4.SSOOIDCClient{createToken(e,r,i){let s=new i4.CreateTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}registerClient(e,r,i){let s=new n4.RegisterClientCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}startDeviceAuthorization(e,r,i){let s=new s4.StartDeviceAuthorizationCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(Dh,"SSOOIDC");Fh.SSOOIDC=Dh});var JP=u(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});var av=(A(),b(x));av.__exportStar(rv(),Pd);av.__exportStar(iv(),Pd);av.__exportStar(nv(),Pd)});var KP=u(cv=>{"use strict";Object.defineProperty(cv,"__esModule",{value:!0});var a4=(A(),b(x));a4.__exportStar(Sa(),cv)});var dv=u(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.SSOOIDCServiceException=void 0;var Lh=(A(),b(x));Lh.__exportStar(BP(),hn);Lh.__exportStar(ov(),hn);Lh.__exportStar(JP(),hn);Lh.__exportStar(KP(),hn);var c4=Sh();Object.defineProperty(hn,"SSOOIDCServiceException",{enumerable:!0,get:function(){return c4.SSOOIDCServiceException}})});var YP=u(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.getSsoOidcClient=void 0;var d4=dv(),uv={},u4=n(t=>{if(uv[t])return uv[t];let e=new d4.SSOOIDCClient({region:t});return uv[t]=e,e},"getSsoOidcClient");zh.getSsoOidcClient=u4});var QP=u(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.getNewSsoOidcToken=void 0;var l4=dv(),p4=YP(),f4=n((t,e)=>(0,p4.getSsoOidcClient)(e).send(new l4.CreateTokenCommand({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"})),"getNewSsoOidcToken");Uh.getNewSsoOidcToken=f4});var XP=u(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.validateTokenExpiry=void 0;var m4=ee(),h4=vh(),_4=n(t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new m4.TokenProviderError(`Token is expired. ${h4.REFRESH_MESSAGE}`,!1)},"validateTokenExpiry");Wh.validateTokenExpiry=_4});var ZP=u(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.validateTokenKey=void 0;var y4=ee(),g4=vh(),w4=n((t,e,r=!1)=>{if(typeof e>"u")throw new y4.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${g4.REFRESH_MESSAGE}`,!1)},"validateTokenKey");jh.validateTokenKey=w4});var eR=u(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.writeSSOTokenToFile=void 0;var v4=br(),E4=U("fs"),{writeFile:S4}=E4.promises,N4=n((t,e)=>{let r=(0,v4.getSSOTokenFilepath)(t),i=JSON.stringify(e,null,2);return S4(r,i)},"writeSSOTokenToFile");Vh.writeSSOTokenToFile=N4});var lv=u(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.fromSso=void 0;var Rd=ee(),$h=br(),tR=vh(),b4=QP(),rR=XP(),is=ZP(),x4=eR(),iR=new Date(0),A4=n((t={})=>async()=>{let e=await(0,$h.parseKnownFiles)(t),r=(0,$h.getProfileName)(t),i=e[r];if(i){if(!i.sso_session)throw new Rd.TokenProviderError(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Rd.TokenProviderError(`Profile '${r}' could not be found in shared credentials file.`,!1);let s=i.sso_session,a=(await(0,$h.loadSsoSessionData)(t))[s];if(!a)throw new Rd.TokenProviderError(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let _ of["sso_start_url","sso_region"])if(!a[_])throw new Rd.TokenProviderError(`Sso session '${s}' is missing required property '${_}'.`,!1);let c=a.sso_start_url,l=a.sso_region,p;try{p=await(0,$h.getSSOTokenFromFile)(s)}catch{throw new Rd.TokenProviderError(`The SSO session token associated with profile=${r} was not found or is invalid. ${tR.REFRESH_MESSAGE}`,!1)}(0,is.validateTokenKey)("accessToken",p.accessToken),(0,is.validateTokenKey)("expiresAt",p.expiresAt);let{accessToken:f,expiresAt:m}=p,h={token:f,expiration:new Date(m)};if(h.expiration.getTime()-Date.now()>tR.EXPIRE_WINDOW_MS)return h;if(Date.now()-iR.getTime()<30*1e3)return(0,rR.validateTokenExpiry)(h),h;(0,is.validateTokenKey)("clientId",p.clientId,!0),(0,is.validateTokenKey)("clientSecret",p.clientSecret,!0),(0,is.validateTokenKey)("refreshToken",p.refreshToken,!0);try{iR.setTime(Date.now());let _=await(0,b4.getNewSsoOidcToken)(p,l);(0,is.validateTokenKey)("accessToken",_.accessToken),(0,is.validateTokenKey)("expiresIn",_.expiresIn);let w=new Date(Date.now()+_.expiresIn*1e3);try{await(0,x4.writeSSOTokenToFile)(s,{...p,accessToken:_.accessToken,expiresAt:w.toISOString(),refreshToken:_.refreshToken})}catch{}return{token:_.accessToken,expiration:w}}catch{return(0,rR.validateTokenExpiry)(h),h}},"fromSso");Hh.fromSso=A4});var nR=u(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.fromStatic=void 0;var T4=ee(),O4=n(({token:t})=>async()=>{if(!t||!t.token)throw new T4.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},"fromStatic");Gh.fromStatic=O4});var sR=u(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.nodeProvider=void 0;var pv=ee(),P4=lv(),R4=n((t={})=>(0,pv.memoize)((0,pv.chain)((0,P4.fromSso)(t),async()=>{throw new pv.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"nodeProvider");Bh.nodeProvider=R4});var oR=u(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var fv=(A(),b(x));fv.__exportStar(lv(),Id);fv.__exportStar(nR(),Id);fv.__exportStar(sR(),Id)});var cR=u(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.resolveSSOCredentials=void 0;var aR=lP(),qd=ee(),I4=br(),q4=oR(),C4=15*60*1e3,Cd=!1,k4=n(async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,profile:a})=>{let c,l="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let S=await(0,q4.fromSso)({profile:a})();c={accessToken:S.token,expiresAt:new Date(S.expiration).toISOString()}}catch(S){throw new qd.CredentialsProviderError(S.message,Cd)}else try{c=await(0,I4.getSSOTokenFromFile)(t)}catch{throw new qd.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${l}`,Cd)}if(new Date(c.expiresAt).getTime()-Date.now()<=C4)throw new qd.CredentialsProviderError(`The SSO session associated with this profile has expired. ${l}`,Cd);let{accessToken:p}=c,f=o||new aR.SSOClient({region:i}),m;try{m=await f.send(new aR.GetRoleCredentialsCommand({accountId:r,roleName:s,accessToken:p}))}catch(S){throw qd.CredentialsProviderError.from(S,Cd)}let{roleCredentials:{accessKeyId:h,secretAccessKey:_,sessionToken:w,expiration:g}={}}=m;if(!h||!_||!w||!g)throw new qd.CredentialsProviderError("SSO returns an invalid temporary credential.",Cd);return{accessKeyId:h,secretAccessKey:_,sessionToken:w,expiration:new Date(g)}},"resolveSSOCredentials");Jh.resolveSSOCredentials=k4});var mv=u(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.validateSsoProfile=void 0;var M4=ee(),D4=n(t=>{let{sso_start_url:e,sso_account_id:r,sso_region:i,sso_role_name:s}=t;if(!e||!r||!i||!s)throw new M4.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return t},"validateSsoProfile");Kh.validateSsoProfile=D4});var uR=u(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.fromSSO=void 0;var kd=ee(),hv=br(),F4=ew(),dR=cR(),L4=mv(),z4=n((t={})=>async()=>{let{ssoStartUrl:e,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,ssoSession:a}=t,c=(0,hv.getProfileName)(t);if(!e&&!r&&!i&&!s&&!a){let p=(await(0,hv.parseKnownFiles)(t))[c];if(!p)throw new kd.CredentialsProviderError(`Profile ${c} was not found.`);if(!(0,F4.isSsoProfile)(p))throw new kd.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`);if(p?.sso_session){let S=(await(0,hv.loadSsoSessionData)(t))[p.sso_session],ie=` configurations in profile ${c} and sso-session ${p.sso_session}`;if(i&&i!==S.sso_region)throw new kd.CredentialsProviderError("Conflicting SSO region"+ie,!1);if(e&&e!==S.sso_start_url)throw new kd.CredentialsProviderError("Conflicting SSO start_url"+ie,!1);p.sso_region=S.sso_region,p.sso_start_url=S.sso_start_url}let{sso_start_url:f,sso_account_id:m,sso_region:h,sso_role_name:_,sso_session:w}=(0,L4.validateSsoProfile)(p);return(0,dR.resolveSSOCredentials)({ssoStartUrl:f,ssoSession:w,ssoAccountId:m,ssoRegion:h,ssoRoleName:_,ssoClient:o,profile:c})}else{if(!e||!r||!i||!s)throw new kd.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return(0,dR.resolveSSOCredentials)({ssoStartUrl:e,ssoSession:a,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,profile:c})}},"fromSSO");Yh.fromSSO=z4});var pR=u(lR=>{"use strict";Object.defineProperty(lR,"__esModule",{value:!0})});var Xh=u(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var Qh=(A(),b(x));Qh.__exportStar(uR(),Ta);Qh.__exportStar(ew(),Ta);Qh.__exportStar(pR(),Ta);Qh.__exportStar(mv(),Ta)});var mR=u(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.resolveSsoCredentials=Oa.isSsoProfile=void 0;var fR=Xh(),U4=Xh();Object.defineProperty(Oa,"isSsoProfile",{enumerable:!0,get:function(){return U4.isSsoProfile}});var W4=n(t=>{let{sso_start_url:e,sso_account_id:r,sso_session:i,sso_region:s,sso_role_name:o}=(0,fR.validateSsoProfile)(t);return(0,fR.fromSSO)({ssoStartUrl:e,ssoAccountId:r,ssoSession:i,ssoRegion:s,ssoRoleName:o})()},"resolveSsoCredentials");Oa.resolveSsoCredentials=W4});var hR=u(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.resolveStaticCredentials=Pa.isStaticCredsProfile=void 0;var j4=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1,"isStaticCredsProfile");Pa.isStaticCredsProfile=j4;var V4=n(t=>Promise.resolve({accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token}),"resolveStaticCredentials");Pa.resolveStaticCredentials=V4});var _v=u(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.fromWebToken=void 0;var $4=ee(),H4=n(t=>()=>{let{roleArn:e,roleSessionName:r,webIdentityToken:i,providerId:s,policyArns:o,policy:a,durationSeconds:c,roleAssumerWithWebIdentity:l}=t;if(!l)throw new $4.CredentialsProviderError(`Role Arn '${e}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return l({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:i,ProviderId:s,PolicyArns:o,Policy:a,DurationSeconds:c})},"fromWebToken");Zh.fromWebToken=H4});var _R=u(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});e_.fromTokenFile=void 0;var G4=ee(),B4=U("fs"),J4=_v(),K4="AWS_WEB_IDENTITY_TOKEN_FILE",Y4="AWS_ROLE_ARN",Q4="AWS_ROLE_SESSION_NAME",X4=n((t={})=>async()=>Z4(t),"fromTokenFile");e_.fromTokenFile=X4;var Z4=n(t=>{var e,r,i;let s=(e=t?.webIdentityTokenFile)!==null&&e!==void 0?e:process.env[K4],o=(r=t?.roleArn)!==null&&r!==void 0?r:process.env[Y4],a=(i=t?.roleSessionName)!==null&&i!==void 0?i:process.env[Q4];if(!s||!o)throw new G4.CredentialsProviderError("Web identity configuration not specified");return(0,J4.fromWebToken)({...t,webIdentityToken:(0,B4.readFileSync)(s,{encoding:"ascii"}),roleArn:o,roleSessionName:a})()},"resolveTokenFile")});var yv=u(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});var yR=(A(),b(x));yR.__exportStar(_R(),t_);yR.__exportStar(_v(),t_)});var gR=u(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.resolveWebIdentityCredentials=Ra.isWebIdentityProfile=void 0;var eK=yv(),tK=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,"isWebIdentityProfile");Ra.isWebIdentityProfile=tK;var rK=n(async(t,e)=>(0,eK.fromTokenFile)({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity})(),"resolveWebIdentityCredentials");Ra.resolveWebIdentityCredentials=rK});var Yg=u(i_=>{"use strict";Object.defineProperty(i_,"__esModule",{value:!0});i_.resolveProfileData=void 0;var iK=ee(),wR=px(),vR=yx(),ER=mR(),r_=hR(),SR=gR(),nK=n(async(t,e,r,i={})=>{let s=e[t];if(Object.keys(i).length>0&&(0,r_.isStaticCredsProfile)(s))return(0,r_.resolveStaticCredentials)(s);if((0,wR.isAssumeRoleProfile)(s))return(0,wR.resolveAssumeRoleCredentials)(t,e,r,i);if((0,r_.isStaticCredsProfile)(s))return(0,r_.resolveStaticCredentials)(s);if((0,SR.isWebIdentityProfile)(s))return(0,SR.resolveWebIdentityCredentials)(s,r);if((0,vR.isProcessProfile)(s))return(0,vR.resolveProcessCredentials)(r,t);if((0,ER.isSsoProfile)(s))return(0,ER.resolveSsoCredentials)(s);throw new iK.CredentialsProviderError(`Profile ${t} could not be found or parsed in shared credentials file.`)},"resolveProfileData");i_.resolveProfileData=nK});var bR=u(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.fromIni=void 0;var NR=br(),sK=Yg(),oK=n((t={})=>async()=>{let e=await(0,NR.parseKnownFiles)(t);return(0,sK.resolveProfileData)((0,NR.getProfileName)(t),e,t)},"fromIni");n_.fromIni=oK});var xR=u(gv=>{"use strict";Object.defineProperty(gv,"__esModule",{value:!0});var aK=(A(),b(x));aK.__exportStar(bR(),gv)});var AR=u(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.remoteProvider=ns.ENV_IMDS_DISABLED=void 0;var s_=rf(),cK=ee();ns.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";var dK=n(t=>process.env[s_.ENV_CMDS_RELATIVE_URI]||process.env[s_.ENV_CMDS_FULL_URI]?(0,s_.fromContainerMetadata)(t):process.env[ns.ENV_IMDS_DISABLED]?async()=>{throw new cK.CredentialsProviderError("EC2 Instance Metadata Service access disabled")}:(0,s_.fromInstanceMetadata)(t),"remoteProvider");ns.remoteProvider=dK});var TR=u(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.defaultProvider=void 0;var uK=kg(),lK=xR(),pK=Zg(),fK=Xh(),mK=yv(),wv=ee(),hK=br(),_K=AR(),yK=n((t={})=>(0,wv.memoize)((0,wv.chain)(...t.profile||process.env[hK.ENV_PROFILE]?[]:[(0,uK.fromEnv)()],(0,fK.fromSSO)(t),(0,lK.fromIni)(t),(0,pK.fromProcess)(t),(0,mK.fromTokenFile)(t),(0,_K.remoteProvider)(t),async()=>{throw new wv.CredentialsProviderError("Could not load credentials from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"defaultProvider");o_.defaultProvider=yK});var Ev=u(vv=>{"use strict";Object.defineProperty(vv,"__esModule",{value:!0});var gK=(A(),b(x));gK.__exportStar(TR(),vv)});var JR=u(a_=>{"use strict";Object.defineProperty(a_,"__esModule",{value:!0});a_.ruleSet=void 0;var FR="required",M="type",J="fn",K="argv",_n="ref",ss="properties",os="headers",OR=!1,wK=!0,Nv="PartitionResult",Ht="tree",as="booleanEquals",je="stringEquals",LR="sigv4",zR="us-east-1",UR="sts",fe="endpoint",WR="https://sts.{Region}.{PartitionResult#dnsSuffix}",Md="error",bv="getAttr",PR={[FR]:!1,[M]:"String"},Sv={[FR]:!0,default:!1,[M]:"Boolean"},Ve={[_n]:"Region"},jR={[_n]:"UseFIPS"},VR={[_n]:"UseDualStack"},RR={[J]:"isSet",[K]:[{[_n]:"Endpoint"}]},$R={[_n]:"Endpoint"},Ke={url:"https://sts.amazonaws.com",[ss]:{authSchemes:[{name:LR,signingRegion:zR,signingName:UR}]},[os]:{}},vi={},IR={conditions:[{[J]:je,[K]:[Ve,"aws-global"]}],[fe]:Ke,[M]:fe},HR={[J]:as,[K]:[jR,!0]},GR={[J]:as,[K]:[VR,!0]},qR={[J]:as,[K]:[!0,{[J]:bv,[K]:[{[_n]:Nv},"supportsFIPS"]}]},BR={[_n]:Nv},CR={[J]:as,[K]:[!0,{[J]:bv,[K]:[BR,"supportsDualStack"]}]},kR={url:WR,[ss]:{},[os]:{}},vK=[$R],MR=[HR],DR=[GR],EK={version:"1.0",parameters:{Region:PR,UseDualStack:Sv,UseFIPS:Sv,Endpoint:PR,UseGlobalEndpoint:Sv},rules:[{conditions:[{[J]:"aws.partition",[K]:[Ve],assign:Nv}],[M]:Ht,rules:[{conditions:[{[J]:as,[K]:[{[_n]:"UseGlobalEndpoint"},wK]},{[J]:as,[K]:[jR,OR]},{[J]:as,[K]:[VR,OR]},{[J]:"not",[K]:[RR]}],[M]:Ht,rules:[{conditions:[{[J]:je,[K]:[Ve,"ap-northeast-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"ap-south-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"ap-southeast-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"ap-southeast-2"]}],endpoint:Ke,[M]:fe},IR,{conditions:[{[J]:je,[K]:[Ve,"ca-central-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"eu-central-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"eu-north-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"eu-west-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"eu-west-2"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"eu-west-3"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"sa-east-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,zR]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"us-east-2"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"us-west-1"]}],endpoint:Ke,[M]:fe},{conditions:[{[J]:je,[K]:[Ve,"us-west-2"]}],endpoint:Ke,[M]:fe},{endpoint:{url:WR,[ss]:{authSchemes:[{name:LR,signingRegion:"{Region}",signingName:UR}]},[os]:vi},[M]:fe}]},{conditions:[RR,{[J]:"parseURL",[K]:vK,assign:"url"}],[M]:Ht,rules:[{conditions:MR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[M]:Md},{[M]:Ht,rules:[{conditions:DR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[M]:Md},{endpoint:{url:$R,[ss]:vi,[os]:vi},[M]:fe}]}]},{conditions:[HR,GR],[M]:Ht,rules:[{conditions:[qR,CR],[M]:Ht,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[ss]:vi,[os]:vi},[M]:fe}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[M]:Md}]},{conditions:MR,[M]:Ht,rules:[{conditions:[qR],[M]:Ht,rules:[{[M]:Ht,rules:[{conditions:[{[J]:je,[K]:["aws-us-gov",{[J]:bv,[K]:[BR,"name"]}]}],endpoint:kR,[M]:fe},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[ss]:vi,[os]:vi},[M]:fe}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[M]:Md}]},{conditions:DR,[M]:Ht,rules:[{conditions:[CR],[M]:Ht,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[ss]:vi,[os]:vi},[M]:fe}]},{error:"DualStack is enabled but this partition does not support DualStack",[M]:Md}]},{[M]:Ht,rules:[IR,{endpoint:kR,[M]:fe}]}]}]};a_.ruleSet=EK});var KR=u(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});c_.defaultEndpointResolver=void 0;var SK=gd(),NK=JR(),bK=n((t,e={})=>(0,SK.resolveEndpoint)(NK.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");c_.defaultEndpointResolver=bK});var XR=u(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});d_.getRuntimeConfig=void 0;var xK=C(),AK=Mn(),YR=od(),QR=di(),TK=KR(),OK=n(t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??YR.fromBase64,base64Encoder:t?.base64Encoder??YR.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??TK.defaultEndpointResolver,logger:t?.logger??new xK.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??AK.parseUrl,utf8Decoder:t?.utf8Decoder??QR.fromUtf8,utf8Encoder:t?.utf8Encoder??QR.toUtf8}),"getRuntimeConfig");d_.getRuntimeConfig=OK});var tI=u(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});l_.getRuntimeConfig=void 0;var PK=(A(),b(x)),RK=PK.__importDefault(b0()),IK=qg(),u_=hr(),qK=Ev(),CK=Jc(),ZR=ci(),Dd=rn(),eI=Yc(),kK=Qc(),MK=Mt(),DK=sd(),FK=XR(),LK=C(),zK=Ed(),UK=C(),WK=n(t=>{(0,UK.emitWarningIfUnsupportedVersion)(process.version);let e=(0,zK.resolveDefaultsModeConfig)(t),r=n(()=>e().then(LK.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,FK.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??kK.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,IK.decorateDefaultCredentialProvider)(qK.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,DK.defaultUserAgent)({serviceId:i.serviceId,clientVersion:RK.default.version}),maxAttempts:t?.maxAttempts??(0,Dd.loadConfig)(ZR.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Dd.loadConfig)(u_.NODE_REGION_CONFIG_OPTIONS,u_.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new eI.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Dd.loadConfig)({...ZR.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||MK.DEFAULT_RETRY_MODE}),sha256:t?.sha256??CK.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??eI.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Dd.loadConfig)(u_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Dd.loadConfig)(u_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");l_.getRuntimeConfig=WK});var f_=u(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.STSClient=void 0;var jK=hr(),VK=Ac(),$K=ne(),rI=Tc(),HK=Oc(),GK=Pc(),iI=ci(),BK=S0(),nI=zc(),JK=C(),KK=N0(),YK=tI(),Ia=class extends JK.Client{constructor(e){let r=(0,YK.getRuntimeConfig)(e),i=(0,KK.resolveClientEndpointParameters)(r),s=(0,jK.resolveRegionConfig)(i),o=(0,$K.resolveEndpointConfig)(s),a=(0,iI.resolveRetryConfig)(o),c=(0,rI.resolveHostHeaderConfig)(a),l=(0,BK.resolveStsAuthConfig)(c,{stsClientCtor:Ia}),p=(0,nI.resolveUserAgentConfig)(l);super(p),this.config=p,this.middlewareStack.use((0,iI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,VK.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,rI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,HK.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,GK.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,nI.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(Ia,"STSClient");p_.STSClient=Ia});var sI=u(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});h_.STS=void 0;var QK=Ep(),XK=Ag(),ZK=bp(),e6=Tg(),t6=Og(),r6=Pg(),i6=Rg(),n6=Ig(),s6=f_(),m_=class extends s6.STSClient{assumeRole(e,r,i){let s=new QK.AssumeRoleCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}assumeRoleWithSAML(e,r,i){let s=new XK.AssumeRoleWithSAMLCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}assumeRoleWithWebIdentity(e,r,i){let s=new ZK.AssumeRoleWithWebIdentityCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}decodeAuthorizationMessage(e,r,i){let s=new e6.DecodeAuthorizationMessageCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getAccessKeyInfo(e,r,i){let s=new t6.GetAccessKeyInfoCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getCallerIdentity(e,r,i){let s=new r6.GetCallerIdentityCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getFederationToken(e,r,i){let s=new i6.GetFederationTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getSessionToken(e,r,i){let s=new n6.GetSessionTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(m_,"STS");h_.STS=m_});var oI=u(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});var yn=(A(),b(x));yn.__exportStar(Ep(),zr);yn.__exportStar(Ag(),zr);yn.__exportStar(bp(),zr);yn.__exportStar(Tg(),zr);yn.__exportStar(Og(),zr);yn.__exportStar(Pg(),zr);yn.__exportStar(Rg(),zr);yn.__exportStar(Ig(),zr)});var uI=u(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.decorateDefaultCredentialProvider=Ur.getDefaultRoleAssumerWithWebIdentity=Ur.getDefaultRoleAssumer=void 0;var aI=qg(),cI=f_(),dI=n((t,e)=>e?n(class extends t{constructor(i){super(i);for(let s of e)this.middlewareStack.use(s)}},"CustomizableSTSClient"):t,"getCustomizableStsClientCtor"),o6=n((t={},e)=>(0,aI.getDefaultRoleAssumer)(t,dI(cI.STSClient,e)),"getDefaultRoleAssumer");Ur.getDefaultRoleAssumer=o6;var a6=n((t={},e)=>(0,aI.getDefaultRoleAssumerWithWebIdentity)(t,dI(cI.STSClient,e)),"getDefaultRoleAssumerWithWebIdentity");Ur.getDefaultRoleAssumerWithWebIdentity=a6;var c6=n(t=>e=>t({roleAssumer:(0,Ur.getDefaultRoleAssumer)(e),roleAssumerWithWebIdentity:(0,Ur.getDefaultRoleAssumerWithWebIdentity)(e),...e}),"decorateDefaultCredentialProvider");Ur.decorateDefaultCredentialProvider=c6});var lI=u(xv=>{"use strict";Object.defineProperty(xv,"__esModule",{value:!0});var d6=(A(),b(x));d6.__exportStar(Zt(),xv)});var pI=u(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.STSServiceException=void 0;var Fd=(A(),b(x));Fd.__exportStar(sI(),Ei);Fd.__exportStar(f_(),Ei);Fd.__exportStar(oI(),Ei);Fd.__exportStar(uI(),Ei);Fd.__exportStar(lI(),Ei);var u6=fp();Object.defineProperty(Ei,"STSServiceException",{enumerable:!0,get:function(){return u6.STSServiceException}})});var bI=u(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});__.ruleSet=void 0;var vI="required",Ni="fn",bi="argv",qa="ref",Av="PartitionResult",Si="tree",Ld="error",zd="endpoint",fI={[vI]:!1,type:"String"},mI={[vI]:!0,default:!1,type:"Boolean"},EI={[qa]:"Endpoint"},SI={[Ni]:"booleanEquals",[bi]:[{[qa]:"UseFIPS"},!0]},NI={[Ni]:"booleanEquals",[bi]:[{[qa]:"UseDualStack"},!0]},Wr={},hI={[Ni]:"booleanEquals",[bi]:[!0,{[Ni]:"getAttr",[bi]:[{[qa]:Av},"supportsFIPS"]}]},_I={[Ni]:"booleanEquals",[bi]:[!0,{[Ni]:"getAttr",[bi]:[{[qa]:Av},"supportsDualStack"]}]},yI=[EI],gI=[SI],wI=[NI],l6={version:"1.0",parameters:{Region:fI,UseDualStack:mI,UseFIPS:mI,Endpoint:fI},rules:[{conditions:[{[Ni]:"aws.partition",[bi]:[{[qa]:"Region"}],assign:Av}],type:Si,rules:[{conditions:[{[Ni]:"isSet",[bi]:yI},{[Ni]:"parseURL",[bi]:yI,assign:"url"}],type:Si,rules:[{conditions:gI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ld},{type:Si,rules:[{conditions:wI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ld},{endpoint:{url:EI,properties:Wr,headers:Wr},type:zd}]}]},{conditions:[SI,NI],type:Si,rules:[{conditions:[hI,_I],type:Si,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Wr,headers:Wr},type:zd}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ld}]},{conditions:gI,type:Si,rules:[{conditions:[hI],type:Si,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Wr,headers:Wr},type:zd}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ld}]},{conditions:wI,type:Si,rules:[{conditions:[_I],type:Si,rules:[{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Wr,headers:Wr},type:zd}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ld}]},{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dnsSuffix}",properties:Wr,headers:Wr},type:zd}]}]};__.ruleSet=l6});var xI=u(y_=>{"use strict";Object.defineProperty(y_,"__esModule",{value:!0});y_.defaultEndpointResolver=void 0;var p6=gd(),f6=bI(),m6=n((t,e={})=>(0,p6.resolveEndpoint)(f6.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");y_.defaultEndpointResolver=m6});var OI=u(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});g_.getRuntimeConfig=void 0;var h6=C(),_6=Mn(),AI=od(),TI=di(),y6=xI(),g6=n(t=>({apiVersion:"2018-08-01",base64Decoder:t?.base64Decoder??AI.fromBase64,base64Encoder:t?.base64Encoder??AI.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??y6.defaultEndpointResolver,logger:t?.logger??new h6.NoOpLogger,serviceId:t?.serviceId??"RDS Data",urlParser:t?.urlParser??_6.parseUrl,utf8Decoder:t?.utf8Decoder??TI.fromUtf8,utf8Encoder:t?.utf8Encoder??TI.toUtf8}),"getRuntimeConfig");g_.getRuntimeConfig=g6});var II=u(v_=>{"use strict";Object.defineProperty(v_,"__esModule",{value:!0});v_.getRuntimeConfig=void 0;var w6=(A(),b(x)),v6=w6.__importDefault(xb()),E6=pI(),w_=hr(),S6=Ev(),N6=Jc(),PI=ci(),Ud=rn(),RI=Yc(),b6=Qc(),x6=Mt(),A6=sd(),T6=OI(),O6=C(),P6=Ed(),R6=C(),I6=n(t=>{(0,R6.emitWarningIfUnsupportedVersion)(process.version);let e=(0,P6.resolveDefaultsModeConfig)(t),r=n(()=>e().then(O6.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,T6.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??b6.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,E6.decorateDefaultCredentialProvider)(S6.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,A6.defaultUserAgent)({serviceId:i.serviceId,clientVersion:v6.default.version}),maxAttempts:t?.maxAttempts??(0,Ud.loadConfig)(PI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Ud.loadConfig)(w_.NODE_REGION_CONFIG_OPTIONS,w_.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new RI.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Ud.loadConfig)({...PI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||x6.DEFAULT_RETRY_MODE}),sha256:t?.sha256??N6.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??RI.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ud.loadConfig)(w_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Ud.loadConfig)(w_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");v_.getRuntimeConfig=I6});var Tv=u(S_=>{"use strict";Object.defineProperty(S_,"__esModule",{value:!0});S_.RDSDataClient=void 0;var q6=hr(),C6=Ac(),k6=ne(),qI=Tc(),M6=Oc(),D6=Pc(),CI=ci(),kI=ui(),MI=zc(),F6=C(),L6=bb(),z6=II(),E_=class extends F6.Client{constructor(e){let r=(0,z6.getRuntimeConfig)(e),i=(0,L6.resolveClientEndpointParameters)(r),s=(0,q6.resolveRegionConfig)(i),o=(0,k6.resolveEndpointConfig)(s),a=(0,CI.resolveRetryConfig)(o),c=(0,qI.resolveHostHeaderConfig)(a),l=(0,kI.resolveAwsAuthConfig)(c),p=(0,MI.resolveUserAgentConfig)(l);super(p),this.config=p,this.middlewareStack.use((0,CI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,C6.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,qI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,M6.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,D6.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,kI.getAwsAuthPlugin)(this.config)),this.middlewareStack.use((0,MI.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(E_,"RDSDataClient");S_.RDSDataClient=E_});var DI=u(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});b_.RDSData=void 0;var U6=wy(),W6=vy(),j6=Ey(),V6=Sy(),$6=Ny(),H6=by(),G6=Tv(),N_=class extends G6.RDSDataClient{batchExecuteStatement(e,r,i){let s=new U6.BatchExecuteStatementCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}beginTransaction(e,r,i){let s=new W6.BeginTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}commitTransaction(e,r,i){let s=new j6.CommitTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}executeSql(e,r,i){let s=new V6.ExecuteSqlCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}executeStatement(e,r,i){let s=new $6.ExecuteStatementCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}rollbackTransaction(e,r,i){let s=new H6.RollbackTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(N_,"RDSData");b_.RDSData=N_});var FI=u(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var Ca=(A(),b(x));Ca.__exportStar(wy(),gn);Ca.__exportStar(vy(),gn);Ca.__exportStar(Ey(),gn);Ca.__exportStar(Sy(),gn);Ca.__exportStar(Ny(),gn);Ca.__exportStar(by(),gn)});var LI=u(Ov=>{"use strict";Object.defineProperty(Ov,"__esModule",{value:!0});var B6=(A(),b(x));B6.__exportStar(ri(),Ov)});var zI=u(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.RDSDataServiceException=void 0;var x_=(A(),b(x));x_.__exportStar(DI(),wn);x_.__exportStar(Tv(),wn);x_.__exportStar(FI(),wn);x_.__exportStar(LI(),wn);var J6=Du();Object.defineProperty(wn,"RDSDataServiceException",{enumerable:!0,get:function(){return J6.RDSDataServiceException}})});import K6 from"path";function Cv(t){return t===void 0}n(Cv,"isUndefined");function Ye(t){return typeof t=="string"}n(Ye,"isString");function kv(t){return typeof t=="number"}n(kv,"isNumber");function jd(t){return typeof t=="boolean"}n(jd,"isBoolean");function Vd(t){return t===null}n(Vd,"isNull");function Mv(t){return t instanceof Date}n(Mv,"isDate");function Dv(t){return typeof t=="bigint"}n(Dv,"isBigInt");function _t(t){return typeof t=="function"}n(_t,"isFunction");function yt(t){return typeof t=="object"&&t!==null}n(yt,"isObject");function Fv(t){return t[t.length-1]}n(Fv,"getLast");function d(t){return Object.freeze(t)}n(d,"freeze");function xi(t){return Array.isArray(t)}n(xi,"isReadonlyArray");function Ai(t){return t}n(Ai,"noop");var F=d({is(t){return t.kind==="IdentifierNode"},create(t){return d({kind:"IdentifierNode",name:t})}});var st=d({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return d({kind:"SchemableIdentifierNode",identifier:F.create(t)})},createWithSchema(t,e){return d({kind:"SchemableIdentifierNode",schema:F.create(t),identifier:F.create(e)})}});var ot=d({is(t){return t.kind==="TableNode"},create(t){return d({kind:"TableNode",table:st.create(t)})},createWithSchema(t,e){return d({kind:"TableNode",table:st.createWithSchema(t,e)})}});var ce=d({is(t){return t.kind==="AlterTableNode"},create(t){return d({kind:"AlterTableNode",table:ot.create(t)})},cloneWithTableProps(t,e){return d({...t,...e})},cloneWithColumnAlteration(t,e){return d({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}});var sr=d({is(t){return t.kind==="CreateIndexNode"},create(t){return d({kind:"CreateIndexNode",name:F.create(t)})},cloneWith(t,e){return d({...t,...e})}});var $d=d({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return d({kind:"CreateSchemaNode",schema:F.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var Lv=["preserve rows","delete rows","drop"],gt=d({is(t){return t.kind==="CreateTableNode"},create(t){return d({kind:"CreateTableNode",table:t,columns:d([])})},cloneWithColumn(t,e){return d({...t,columns:d([...t.columns,e])})},cloneWithConstraint(t,e){return d({...t,constraints:t.constraints?d([...t.constraints,e]):d([e])})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):d([e])})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):d([e])})},cloneWith(t,e){return d({...t,...e})}});var cs=d({is(t){return t.kind==="DropIndexNode"},create(t,e){return d({kind:"DropIndexNode",name:st.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var Ma=d({is(t){return t.kind==="DropSchemaNode"},create(t,e){return d({kind:"DropSchemaNode",schema:F.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var Da=d({is(t){return t.kind==="DropTableNode"},create(t,e){return d({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return d({...t,...e})}});var Ot=d({is(t){return t.kind==="AliasNode"},create(t,e){return d({kind:"AliasNode",node:t,alias:e})}});function He(t){return yt(t)&&_t(t.toOperationNode)}n(He,"isOperationNodeSource");function zv(t){return yt(t)&&"expressionType"in t&&He(t)}n(zv,"isExpression");var ds=d({is(t){return t.kind==="AndNode"},create(t,e){return d({kind:"AndNode",left:t,right:e})}});var us=d({is(t){return t.kind==="OrNode"},create(t,e){return d({kind:"OrNode",left:t,right:e})}});var ls=d({is(t){return t.kind==="OnNode"},create(t){return d({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return d({...t,on:e==="And"?ds.create(t.on,r):us.create(t.on,r)})}});var at=d({is(t){return t.kind==="JoinNode"},create(t,e){return d({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return d({kind:"JoinNode",joinType:t,table:e,on:ls.create(r)})},cloneWithOn(t,e){return d({...t,on:t.on?ls.cloneWithOperation(t.on,"And",e):ls.create(e)})},cloneWithOrOn(t,e){return d({...t,on:t.on?ls.cloneWithOperation(t.on,"Or",e):ls.create(e)})}});var jr=d({is(t){return t.kind==="OrderByNode"},create(t){return d({kind:"OrderByNode",items:d([t])})},cloneWithItem(t,e){return d({...t,items:d([...t.items,e])})}});var P_=d({is(t){return t.kind==="PartitionByNode"},create(t){return d({kind:"PartitionByNode",items:d(t)})},cloneWithItems(t,e){return d({...t,items:d([...t.items,...e])})}});var Fa=d({is(t){return t.kind==="OverNode"},create(){return d({kind:"OverNode"})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?jr.cloneWithItem(t.orderBy,e):jr.create(e)})},cloneWithPartitionByItems(t,e){return d({...t,partitionBy:t.partitionBy?P_.cloneWithItems(t.partitionBy,e):P_.create(e)})}});var vn=d({is(t){return t.kind==="FromNode"},create(t){return d({kind:"FromNode",froms:d(t)})},cloneWithFroms(t,e){return d({...t,froms:d([...t.froms,...e])})}});var R_=d({is(t){return t.kind==="GroupByNode"},create(t){return d({kind:"GroupByNode",items:d(t)})},cloneWithItems(t,e){return d({...t,items:d([...t.items,...e])})}});var La=d({is(t){return t.kind==="HavingNode"},create(t){return d({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return d({...t,having:e==="And"?ds.create(t.having,r):us.create(t.having,r)})}});var k=d({is(t){return t.kind==="SelectQueryNode"},create(t,e){return d({kind:"SelectQueryNode",from:vn.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return d({...t,selections:t.selections?d([...t.selections,...e]):d(e)})},cloneWithDistinctOn(t,e){return d({...t,distinctOn:t.distinctOn?d([...t.distinctOn,...e]):d(e)})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):d([e])})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):d([e])})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?jr.cloneWithItem(t.orderBy,e):jr.create(e)})},cloneWithGroupByItems(t,e){return d({...t,groupBy:t.groupBy?R_.cloneWithItems(t.groupBy,e):R_.create(e)})},cloneWithLimit(t,e){return d({...t,limit:e})},cloneWithOffset(t,e){return d({...t,offset:e})},cloneWithHaving(t,e){return d({...t,having:t.having?La.cloneWithOperation(t.having,"And",e):La.create(e)})},cloneWithOrHaving(t,e){return d({...t,having:t.having?La.cloneWithOperation(t.having,"Or",e):La.create(e)})},cloneWithSetOperation(t,e){return d({...t,setOperations:t.setOperations?d([...t.setOperations,e]):d([e])})},cloneWithExplain(t,e){return d({...t,explain:e})},cloneWithoutSelections(t){return d({...t,selections:[]})},cloneWithoutLimit(t){return d({...t,limit:void 0})},cloneWithoutOffset(t){return d({...t,offset:void 0})},cloneWithoutOrderBy(t){return d({...t,orderBy:void 0})}});var or=d({is(t){return t.kind==="SelectModifierNode"},create(t){return d({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return d({kind:"SelectModifierNode",rawModifier:t})}});var Hd=d({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return d({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}});var de=d({is(t){return t.kind==="RawNode"},create(t,e){return d({kind:"RawNode",sqlFragments:d(t),parameters:d(e)})},createWithSql(t){return de.create([t],[])},createWithChild(t){return de.create(["",""],[t])},createWithChildren(t){return de.create(new Array(t.length+1).fill(""),t)}});var Uv=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","?","?&","!<","!>","<=>","!~","~","~*","!~*","&&","||","@@","@@@","!!","<->"];var Gd=d({is(t){return t.kind==="OperatorNode"},create(t){return d({kind:"OperatorNode",operator:t})}});var Bd=d({is(t){return t.kind==="ParensNode"},create(t){return d({kind:"ParensNode",node:t})}});var W=d({is(t){return t.kind==="ColumnNode"},create(t){return d({kind:"ColumnNode",column:F.create(t)})}});var ps=d({is(t){return t.kind==="SelectAllNode"},create(){return d({kind:"SelectAllNode"})}});var En=d({is(t){return t.kind==="ReferenceNode"},create(t,e){return d({kind:"ReferenceNode",table:t,column:e})},createSelectAll(t){return d({kind:"ReferenceNode",table:t,column:ps.create()})}});function Hr(t){return Ye(t)?$r(t):t.toOperationNode()}n(Hr,"parseSimpleReferenceExpression");function Ti(t){return xi(t)?t.map(e=>Vr(e)):[Vr(t)]}n(Ti,"parseReferenceExpressionOrList");function Vr(t){return Sn(t)?fs(t):Hr(t)}n(Vr,"parseReferenceExpression");function $r(t){let e=".";if(t.includes(e)){let r=t.split(e).map(jv);if(r.length===3)return KI(r);if(r.length===2)return YI(r);throw new Error(`invalid column reference ${t}`)}else return W.create(t)}n($r,"parseStringReference");function Wv(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(jv);return Ot.create($r(r),F.create(i))}else return $r(t)}n(Wv,"parseAliasedStringReference");function za(t){return W.create(t)}n(za,"parseColumnName");function KI(t){let[e,r,i]=t;return En.create(ot.createWithSchema(e,r),W.create(i))}n(KI,"parseStringReferenceWithTableAndSchema");function YI(t){let[e,r]=t;return En.create(ot.create(e),W.create(r))}n(YI,"parseStringReferenceWithTable");function jv(t){return t.trim()}n(jv,"trim");var Jd=d({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return d({kind:"PrimitiveValueListNode",values:d([...t])})}});var ms=d({is(t){return t.kind==="ValueListNode"},create(t){return d({kind:"ValueListNode",values:d(t)})}});var ct=d({is(t){return t.kind==="ValueNode"},create(t){return d({kind:"ValueNode",value:t})},createImmediate(t){return d({kind:"ValueNode",value:t,immediate:!0})}});function Kd(t){return xi(t)?QI(t):ar(t)}n(Kd,"parseValueExpressionOrList");function ar(t){return Sn(t)?fs(t):ct.create(t)}n(ar,"parseValueExpression");function QI(t){return t.some(Sn)?ms.create(t.map(e=>ar(e))):Jd.create(t)}n(QI,"parseValueExpressionList");function De(t){return k_("where",t)}n(De,"parseWhere");function q_(t){return k_("having",t)}n(q_,"parseHaving");function C_(t){return k_("on",t)}n(C_,"parseOn");function ue(t,e,r){return Hd.create(Vr(t),M_(e),Vr(r))}n(ue,"parseReferentialFilter");function k_(t,e){if(e.length===3)return XI(e[0],e[1],e[2]);if(e.length===1)return eq(t,e[0]);throw Vv(t,e)}n(k_,"parseFilterExpression");function XI(t,e,r){return(e==="is"||e==="is not")&&(Vd(r)||jd(r))?ZI(t,e,r):Hd.create(Vr(t),M_(e),Kd(r))}n(XI,"parseFilter");function ZI(t,e,r){return Hd.create(Vr(t),M_(e),ct.createImmediate(r))}n(ZI,"parseIs");function M_(t){if(Ye(t)&&Uv.includes(t))return Gd.create(t);if(He(t))return t.toOperationNode();throw new Error(`invalid comparison operator ${JSON.stringify(t)} passed to a filter method`)}n(M_,"parseComparisonOperatorExpression");function eq(t,e){if(_t(e))return tq[t](e);if(He(e)){let r=e.toOperationNode();if(de.is(r))return r}throw Vv(t,e)}n(eq,"parseOneArgFilterExpression");function Vv(t,e){return new Error(`invalid arguments passed to a '${t}' method: ${JSON.stringify(e)}`)}n(Vv,"createFilterExpressionError");var tq=d({where(t){let r=t(I_()).toOperationNode();if(!r.where)throw new Error("no `where` methods called inside a group callback");return Bd.create(r.where.where)},having(t){let r=t(I_()).toOperationNode();if(!r.having)throw new Error("no `having` methods called inside a group callback");return Bd.create(r.having.having)},on(t){let r=t(Yd("InnerJoin","table")).toOperationNode();if(!r.on)throw new Error("no `on` methods called inside a group callback");return Bd.create(r.on.on)}});function Fe(t,e){if(e.length===3)return iq(t,e[0],e[1],e[2]);if(e.length===2)return rq(t,e[0],e[1]);throw new Error("not implemented")}n(Fe,"parseJoin");function rq(t,e,r){return r(Yd(t,e)).toOperationNode()}n(rq,"parseCallbackJoin");function iq(t,e,r,i){return at.createWithOn(t,Gr(e),ue(r,"=",i))}n(iq,"parseSingleOnJoin");var hs=d({is(t){return t.kind==="SelectionNode"},create(t){return d({kind:"SelectionNode",selection:t})},createSelectAll(){return d({kind:"SelectionNode",selection:ps.create()})},createSelectAllFromTable(t){return d({kind:"SelectionNode",selection:En.createSelectAll(t)})}});var Ua=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return Hr(this.#e)}};n(Ua,"DynamicReferenceBuilder");function $v(t){return yt(t)&&He(t)&&Ye(t.dynamicReference)}n($v,"isDynamicReferenceBuilder");function Oi(t){return xi(t)?t.map(e=>Hv(e)):[Hv(t)]}n(Oi,"parseSelectExpressionOrList");function Hv(t){return Ye(t)?hs.create(Wv(t)):$v(t)?hs.create(t.toOperationNode()):hs.create(Qd(t))}n(Hv,"parseSelectExpression");function Pi(t){return t?Array.isArray(t)?t.map(Gv):[Gv(t)]:[hs.createSelectAll()]}n(Pi,"parseSelectAll");function Gv(t){if(Ye(t))return hs.createSelectAllFromTable(ve(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}n(Gv,"parseSelectAllArg");var Qe=d({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return d({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return d({...t,...e})}});var Ri=d({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return d({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return d({...t,from:t.from?vn.cloneWithFroms(t.from,e):vn.create(e)})},cloneWithUpdates(t,e){return d({...t,updates:t.updates?d([...t.updates,...e]):e})},cloneWithExplain(t,e){return d({...t,explain:e})}});var D_=d({is(t){return t.kind==="UsingNode"},create(t){return d({kind:"UsingNode",tables:d(t)})},cloneWithTables(t,e){return d({...t,tables:d([...t.tables,...e])})}});var Br=d({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return d({kind:"DeleteQueryNode",from:vn.create([t]),...e&&{with:e}})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?jr.cloneWithItem(t.orderBy,e):jr.create(e)})},cloneWithLimit(t,e){return d({...t,limit:e})},cloneWithExplain(t,e){return d({...t,explain:e})},cloneWithUsing(t,e){return d({...t,using:t.using!==void 0?D_.cloneWithTables(t.using,e):D_.create(e)})}});var Re=d({is(t){return t.kind==="WhereNode"},create(t){return d({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return d({...t,where:e==="And"?ds.create(t.where,r):us.create(t.where,r)})}});var F_=d({is(t){return t.kind==="ReturningNode"},create(t){return d({kind:"ReturningNode",selections:d(t)})},cloneWithSelections(t,e){return d({...t,selections:t.selections?d([...t.selections,...e]):d(e)})}});var q=d({is(t){return Br.is(t)||Qe.is(t)||Ri.is(t)||k.is(t)},cloneWithWhere(t,e){return d({...t,where:t.where?Re.cloneWithOperation(t.where,"And",e):Re.create(e)})},cloneWithOrWhere(t,e){return d({...t,where:t.where?Re.cloneWithOperation(t.where,"Or",e):Re.create(e)})},cloneWithJoin(t,e){return d({...t,joins:t.joins?d([...t.joins,e]):d([e])})},cloneWithReturning(t,e){return d({...t,returning:t.returning?F_.cloneWithSelections(t.returning,e):F_.create(e)})},cloneWithoutWhere(t){return d({...t,where:void 0})}});var Bv=d({is(t){return t.kind==="OrderByItemNode"},create(t,e){return d({kind:"OrderByItemNode",orderBy:t,direction:e})}});function _s(t,e){return Bv.create(nq(t),sq(e))}n(_s,"parseOrderBy");function nq(t){return Vr(t)}n(nq,"parseOrderByExpression");function sq(t){if(t)return t==="asc"||t==="desc"?de.createWithSql(t):t.toOperationNode()}n(sq,"parseOrderByDirectionExpression");function R(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}n(R,"preventAwait");var Xd=d({is(t){return t.kind==="LimitNode"},create(t){return d({kind:"LimitNode",limit:ct.create(t)})}});var Jv=d({is(t){return t.kind==="OffsetNode"},create(t){return d({kind:"OffsetNode",offset:ct.create(t)})}});var Kv=d({is(t){return t.kind==="GroupByItemNode"},create(t){return d({kind:"GroupByItemNode",groupBy:t})}});function Yv(t){return Ti(t).map(Kv.create)}n(Yv,"parseGroupBy");var Bt=class extends Error{node;constructor(e){super("no result"),this.node=e}};n(Bt,"NoResultError");var Ii=d({is(t){return t.kind==="ExplainNode"},create(t,e){return d({kind:"ExplainNode",format:t,options:e})}});var Zd=d({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return d({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function Nn(t,e,r){return Zd.create(t,e.toOperationNode(),r)}n(Nn,"parseSetOperation");var Qv=d({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return d({kind:"UnaryOperationNode",operator:t,operand:e})}});function he(t){return Xv("exists",t)}n(he,"parseExists");function _e(t){return Xv("not exists",t)}n(_e,"parseNotExists");function Xv(t,e){return Qv.create(Gd.create(t),Kd(e))}n(Xv,"parseUnaryOperation");var N=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}where(...e){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,De(e))})}whereRef(e,r,i){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,ue(e,r,i))})}orWhere(...e){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,De(e))})}orWhereRef(e,r,i){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,ue(e,r,i))})}whereExists(e){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,he(e))})}whereNotExists(e){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,_e(e))})}orWhereExists(e){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,he(e))})}orWhereNotExists(e){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,_e(e))})}having(...e){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,q_(e))})}havingRef(e,r,i){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,ue(e,r,i))})}orHaving(...e){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,q_(e))})}orHavingRef(e,r,i){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,ue(e,r,i))})}havingExists(e){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,he(e))})}havingNotExist(e){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,_e(e))})}orHavingExists(e){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,he(e))})}orHavingNotExists(e){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,_e(e))})}select(e){return new N({...this.#e,queryNode:k.cloneWithSelections(this.#e.queryNode,Oi(e))})}distinctOn(e){return new N({...this.#e,queryNode:k.cloneWithDistinctOn(this.#e.queryNode,Ti(e))})}modifyFront(e){return new N({...this.#e,queryNode:k.cloneWithFrontModifier(this.#e.queryNode,or.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,or.createWithExpression(e.toOperationNode()))})}distinct(){return new N({...this.#e,queryNode:k.cloneWithFrontModifier(this.#e.queryNode,or.create("Distinct"))})}forUpdate(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,or.create("ForUpdate"))})}forShare(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,or.create("ForShare"))})}forKeyShare(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,or.create("ForKeyShare"))})}forNoKeyUpdate(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,or.create("ForNoKeyUpdate"))})}skipLocked(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,or.create("SkipLocked"))})}noWait(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,or.create("NoWait"))})}selectAll(e){return new N({...this.#e,queryNode:k.cloneWithSelections(this.#e.queryNode,Pi(e))})}innerJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("InnerJoin",e))})}leftJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("LeftJoin",e))})}rightJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("RightJoin",e))})}fullJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("FullJoin",e))})}innerJoinLateral(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("LateralInnerJoin",e))})}leftJoinLateral(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("LateralLeftJoin",e))})}orderBy(e,r){return new N({...this.#e,queryNode:k.cloneWithOrderByItem(this.#e.queryNode,_s(e,r))})}groupBy(e){return new N({...this.#e,queryNode:k.cloneWithGroupByItems(this.#e.queryNode,Yv(e))})}limit(e){return new N({...this.#e,queryNode:k.cloneWithLimit(this.#e.queryNode,Xd.create(e))})}offset(e){return new N({...this.#e,queryNode:k.cloneWithOffset(this.#e.queryNode,Jv.create(e))})}union(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("union",e,!1))})}unionAll(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("union",e,!0))})}intersect(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("intersect",e,!1))})}intersectAll(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("intersect",e,!0))})}except(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("except",e,!1))})}exceptAll(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("except",e,!0))})}as(e){return new eu(this,e)}clearSelect(){return new N({...this.#e,queryNode:k.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new N({...this.#e,queryNode:q.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new N({...this.#e,queryNode:k.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new N({...this.#e,queryNode:k.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new N({...this.#e,queryNode:k.cloneWithoutOrderBy(this.#e.queryNode)})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new N({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new N(this.#e)}castTo(){return this.$castTo()}$assertType(){return new N(this.#e)}assertType(){return new N(this.#e)}withPlugin(e){return new N({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let s of i)yield*s.rows}async explain(e,r){return await new N({...this.#e,queryNode:k.cloneWithExplain(this.#e.queryNode,Ii.create(e,r?.toOperationNode()))}).execute()}};n(N,"SelectQueryBuilder");R(N,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var eu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ot.create(this.#e.toOperationNode(),F.create(this.#t))}};n(eu,"AliasedSelectQueryBuilder");var bn=class{nodeStack=[];#e=d({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e);return this.nodeStack.pop(),d(r)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&d(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",table:this.transformNode(e.table),column:this.transformNode(e.column)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:d([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),expression:this.transformNode(e.expression),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",column:this.transformNode(e.column),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:e.tables}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}};n(bn,"OperationNodeTransformer");var oq=d({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0}),Wa=class extends bn{#e;#t=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);let r=this.#i(e);for(let s of r)this.#t.add(s);let i=super.transformNodeImpl(e);for(let s of r)this.#t.delete(s);return i}transformSchemableIdentifier(e){let r=super.transformSchemableIdentifier(e);return r.schema||!this.#t.has(e.identifier.name)?r:{...r,schema:F.create(this.#e)}}transformReferences(e){let r=super.transformReferences(e);return r.table.table.schema?r:{...r,table:ot.createWithSchema(this.#e,r.table.table.identifier.name)}}#r(e){return e.kind in oq}#i(e){let r=new Set;if("name"in e&&e.name&&st.is(e.name)&&this.#s(e.name,r),"from"in e&&e.from)for(let i of e.from.froms)this.#n(i,r);if("into"in e&&e.into&&this.#n(e.into,r),"table"in e&&e.table&&this.#n(e.table,r),"joins"in e&&e.joins)for(let i of e.joins)this.#n(i.table,r);return"with"in e&&e.with&&this.#o(e.with,r),r}#n(e,r){let i=ot.is(e)?e:Ot.is(e)&&ot.is(e.node)?e.node:null;i&&this.#s(i.table,r)}#s(e,r){this.#t.has(e.identifier.name)||r.add(e.identifier.name)}#o(e,r){for(let i of e.expressions)r.delete(i.name.table.table.identifier.name)}};n(Wa,"WithSchemaTransformer");var Jt=class{#e;constructor(e){this.#e=new Wa(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}};n(Jt,"WithSchemaPlugin");var Zv=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function eE(t){let e="";for(let r=0;r<t;++r)e+=aq();return e}n(eE,"randomString");function aq(){return Zv[~~(Math.random()*Zv.length)]}n(aq,"randomChar");function j(){return new tu}n(j,"createQueryId");var tu=class{#e;get queryId(){return this.#e===void 0&&(this.#e=eE(8)),this.#e}};n(tu,"LazyQueryId");var Le=d({is(t){return t.kind==="AggregateFunctionNode"},create(t,e){return d({kind:"AggregateFunctionNode",func:t,column:e})},cloneWithDistinct(t){return d({...t,distinct:!0})},cloneWithFilter(t,e){return d({...t,filter:t.filter?Re.cloneWithOperation(t.filter,"And",e):Re.create(e)})},cloneWithOrFilter(t,e){return d({...t,filter:t.filter?Re.cloneWithOperation(t.filter,"Or",e):Re.create(e)})},cloneWithOver(t,e){return d({...t,over:e})}});function tE(t){return de.create(t.length>1?["coalesce(",...new Array(t.length-1).fill(", "),")"]:["coalesce(",")"],Ti(t))}n(tE,"parseCoalesce");var ys=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}};n(ys,"Deferred");var rE=new Set;function iE(t){rE.has(t)||(rE.add(t),console.log(t))}n(iE,"logOnce");var cq=d([]),xn=class{#e;constructor(e=cq){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let i of this.#e){let s=i.transformQuery({node:e,queryId:r});if(s.kind===e.kind)e=s;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${s.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{let s=await i.executeQuery(e),o=await this.#t(s,r);return dq(s,o),o})}async*stream(e,r,i){let s=new ys,o=new ys;this.provideConnection(async c=>(s.resolve(c),await o.promise)).catch(c=>s.reject(c));let a=await s.promise;try{for await(let c of a.streamQuery(e,r))yield await this.#t(c,i)}finally{o.resolve()}}async#t(e,r){for(let i of this.#e)e=await i.transformResult({result:e,queryId:r});return e}};n(xn,"QueryExecutorBase");function dq(t,e){let{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||iE("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}n(dq,"warnOfOutdatedDriverOrPlugins");var Jr=class extends xn{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Jr([...this.plugins,e])}withPlugins(e){return new Jr([...this.plugins,...e])}withPluginAtFront(e){return new Jr([e,...this.plugins])}withoutPlugins(){return new Jr([])}};n(Jr,"NoopQueryExecutor");var An=new Jr;var be=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}as(e){return new ru(this,e)}$castTo(){return new be({...this.#e})}castTo(){return this.$castTo()}withPlugin(e){return new be({...this.#e,plugins:this.#e.plugins!==void 0?d([...this.#e.plugins,e]):d([e])})}toOperationNode(){let e=this.#e.plugins!==void 0?An.withPlugins(this.#e.plugins):An;return this.#t(e)}async execute(e){let r=this.#e.plugins!==void 0?e.getExecutor().withPlugins(this.#e.plugins):e.getExecutor();return r.executeQuery(this.#r(r),this.#e.queryId)}#t(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#t(e),this.#e.queryId)}};n(be,"RawBuilder");R(be,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var ru=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ot.create(this.#e.toOperationNode(),He(this.#t)?this.#t.toOperationNode():F.create(this.#t))}};n(ru,"AliasedRawBuilder");var Ee=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}as(e){return new iu(this,e)}distinct(){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...e){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithFilter(this.#e.aggregateFunctionNode,De(e))})}filterWhereExists(e){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithFilter(this.#e.aggregateFunctionNode,he(e))})}filterWhereNotExists(e){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithFilter(this.#e.aggregateFunctionNode,_e(e))})}filterWhereRef(e,r,i){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithFilter(this.#e.aggregateFunctionNode,ue(e,r,i))})}orFilterWhere(...e){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithOrFilter(this.#e.aggregateFunctionNode,De(e))})}orFilterWhereExists(e){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithOrFilter(this.#e.aggregateFunctionNode,he(e))})}orFilterWhereNotExists(e){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithOrFilter(this.#e.aggregateFunctionNode,_e(e))})}orFilterWhereRef(e,r,i){return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithOrFilter(this.#e.aggregateFunctionNode,ue(e,r,i))})}over(e){let r=nE();return new Ee({...this.#e,aggregateFunctionNode:Le.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}toOperationNode(){return this.#e.aggregateFunctionNode}};n(Ee,"AggregateFunctionBuilder");R(Ee,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var iu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ot.create(this.#e.toOperationNode(),F.create(this.#t))}};n(iu,"AliasedAggregateFunctionBuilder");var Tn=class{constructor(){this.avg=this.avg.bind(this),this.coalesce=this.coalesce.bind(this),this.count=this.count.bind(this),this.max=this.max.bind(this),this.min=this.min.bind(this),this.sum=this.sum.bind(this)}avg(e){return new Ee({aggregateFunctionNode:Le.create("avg",Hr(e))})}coalesce(e,...r){return new be({queryId:j(),rawNode:tE([e,...r])})}count(e){return new Ee({aggregateFunctionNode:Le.create("count",Hr(e))})}max(e){return new Ee({aggregateFunctionNode:Le.create("max",Hr(e))})}min(e){return new Ee({aggregateFunctionNode:Le.create("min",Hr(e))})}sum(e){return new Ee({aggregateFunctionNode:Le.create("sum",Hr(e))})}};n(Tn,"FunctionModule");var On=class{#e;constructor(e){this.#e=d(e)}get fn(){return new Tn}selectFrom(e){return new N({queryId:j(),executor:this.#e.executor,queryNode:k.create(cr(e))})}withSchema(e){return new On({...this.#e,executor:this.#e.executor.withPluginAtFront(new Jt(e))})}ref(e){return new be({queryId:j(),plugins:this.#e.executor.plugins,rawNode:de.createWithChild($r(e))})}};n(On,"ExpressionBuilder");var Ge=class{#e;constructor(e){this.#e=d(e)}on(...e){return new Ge({...this.#e,joinNode:at.cloneWithOn(this.#e.joinNode,C_(e))})}orOn(...e){return new Ge({...this.#e,joinNode:at.cloneWithOrOn(this.#e.joinNode,C_(e))})}onRef(e,r,i){return new Ge({...this.#e,joinNode:at.cloneWithOn(this.#e.joinNode,ue(e,r,i))})}orOnRef(e,r,i){return new Ge({...this.#e,joinNode:at.cloneWithOrOn(this.#e.joinNode,ue(e,r,i))})}onExists(e){return new Ge({...this.#e,joinNode:at.cloneWithOn(this.#e.joinNode,he(e))})}onNotExists(e){return new Ge({...this.#e,joinNode:at.cloneWithOn(this.#e.joinNode,_e(e))})}orOnExists(e){return new Ge({...this.#e,joinNode:at.cloneWithOrOn(this.#e.joinNode,he(e))})}orOnNotExists(e){return new Ge({...this.#e,joinNode:at.cloneWithOrOn(this.#e.joinNode,_e(e))})}onTrue(){return new Ge({...this.#e,joinNode:at.cloneWithOn(this.#e.joinNode,de.createWithSql("true"))})}toOperationNode(){return this.#e.joinNode}};n(Ge,"JoinBuilder");R(Ge,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var sE=d({is(t){return t.kind==="PartitionByItemNode"},create(t){return d({kind:"PartitionByItemNode",partitionBy:t})}});function oE(t){return Ti(t).map(sE.create)}n(oE,"parsePartitionBy");var Kr=class{#e;constructor(e){this.#e=d(e)}orderBy(e,r){return new Kr({overNode:Fa.cloneWithOrderByItem(this.#e.overNode,_s(e,r))})}partitionBy(e){return new Kr({overNode:Fa.cloneWithPartitionByItems(this.#e.overNode,oE(e))})}toOperationNode(){return this.#e.overNode}};n(Kr,"OverBuilder");R(Kr,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var aE=d({is(t){return t.kind==="ValuesNode"},create(t){return d({kind:"ValuesNode",values:d(t)})}});var cE=d({is(t){return t.kind==="DefaultInsertValueNode"},create(){return d({kind:"DefaultInsertValueNode"})}});function dE(t){return uq(Array.isArray(t)?t:[t])}n(dE,"parseInsertObjectOrList");function uq(t){let e=lq(t);return[d([...e.keys()].map(W.create)),aE.create(t.map(r=>pq(r,e)))]}n(uq,"parseInsertColumnsAndValues");function lq(t){let e=new Map;for(let r of t){let i=Object.keys(r);for(let s of i)!e.has(s)&&r[s]!==void 0&&e.set(s,e.size)}return e}n(lq,"parseColumnNamesAndIndexes");function pq(t,e){let r=Object.keys(t),i=Array.from({length:e.size}),s=!1;for(let a of r){let c=e.get(a);if(c!==void 0){let l=t[a];Sn(l)&&(s=!0),i[c]=l}}if(r.length<e.size||s){let a=cE.create();return ms.create(i.map(c=>Cv(c)?a:ar(c)))}return Jd.create(i)}n(pq,"parseRowValues");var uE=d({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return d({kind:"ColumnUpdateNode",column:t,value:e})}});function gs(t){return Object.entries(t).filter(([e,r])=>r!==void 0).map(([e,r])=>uE.create(W.create(e),ar(r)))}n(gs,"parseUpdateObject");var lE=d({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return d({kind:"OnDuplicateKeyNode",updates:t})}});var ja=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get insertId(){return this.#e}get numInsertedOrUpdatedRows(){return this.#t}};n(ja,"InsertResult");var Z=d({is(t){return t.kind==="OnConflictNode"},create(){return d({kind:"OnConflictNode"})},cloneWith(t,e){return d({...t,...e})},cloneWithIndexWhere(t,e){return d({...t,indexWhere:t.indexWhere?Re.cloneWithOperation(t.indexWhere,"And",e):Re.create(e)})},cloneWithIndexOrWhere(t,e){return d({...t,indexWhere:t.indexWhere?Re.cloneWithOperation(t.indexWhere,"Or",e):Re.create(e)})},cloneWithUpdateWhere(t,e){return d({...t,updateWhere:t.updateWhere?Re.cloneWithOperation(t.updateWhere,"And",e):Re.create(e)})},cloneWithUpdateOrWhere(t,e){return d({...t,updateWhere:t.updateWhere?Re.cloneWithOperation(t.updateWhere,"Or",e):Re.create(e)})},cloneWithoutIndexWhere(t){return d({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return d({...t,updateWhere:void 0})}});var xe=class{#e;constructor(e){this.#e=d(e)}column(e){let r=W.create(e);return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,r]):d([r])})})}columns(e){let r=e.map(W.create);return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,...r]):d(r)})})}constraint(e){return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{constraint:F.create(e)})})}expression(e){return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,De(e))})}whereRef(e,r,i){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,ue(e,r,i))})}orWhere(...e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,De(e))})}orWhereRef(e,r,i){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,ue(e,r,i))})}whereExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,he(e))})}whereNotExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,_e(e))})}orWhereExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,he(e))})}orWhereNotExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,_e(e))})}clearWhere(){return new xe({...this.#e,onConflictNode:Z.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new Va({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{updates:gs(e)})})}};n(xe,"OnConflictBuilder");R(xe,"don't await OnConflictBuilder instances.");var Va=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.onConflictNode}};n(Va,"OnConflictDoNothingBuilder");R(Va,"don't await OnConflictDoNothingBuilder instances.");var Xe=class{#e;constructor(e){this.#e=d(e)}where(...e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,De(e))})}whereRef(e,r,i){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,ue(e,r,i))})}orWhere(...e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,De(e))})}orWhereRef(e,r,i){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,ue(e,r,i))})}whereExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,he(e))})}whereNotExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,_e(e))})}orWhereExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,he(e))})}orWhereNotExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,_e(e))})}clearWhere(){return new Xe({...this.#e,onConflictNode:Z.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}toOperationNode(){return this.#e.onConflictNode}};n(Xe,"OnConflictUpdateBuilder");R(Xe,"don't await OnConflictUpdateBuilder instances.");var ye=class{#e;constructor(e){this.#e=d(e)}values(e){let[r,i]=dE(e);return new ye({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{columns:r,values:i})})}columns(e){return new ye({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{columns:d(e.map(W.create))})})}expression(e){return new ye({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{values:fs(e)})})}ignore(){return new ye({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(e){return new ye({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{onConflict:e(new xe({onConflictNode:Z.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new ye({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{onDuplicateKey:lE.create(gs(e))})})}returning(e){return new ye({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Oi(e))})}returningAll(){return new ye({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Pi())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new ye({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new ye(this.#e)}castTo(){return this.$castTo()}$assertType(){return new ye(this.#e)}assertType(){return new ye(this.#e)}withPlugin(e){return new ye({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new ja(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async explain(e,r){return await new ye({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{explain:Ii.create(e,r?.toOperationNode())})}).execute()}};n(ye,"InsertQueryBuilder");R(ye,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var $a=class{#e;constructor(e){this.#e=e}get numDeletedRows(){return this.#e}};n($a,"DeleteResult");var G=class{#e;constructor(e){this.#e=d(e)}where(...e){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,De(e))})}whereRef(e,r,i){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,ue(e,r,i))})}orWhere(...e){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,De(e))})}orWhereRef(e,r,i){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,ue(e,r,i))})}whereExists(e){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,he(e))})}whereNotExists(e){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,_e(e))})}orWhereExists(e){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,he(e))})}orWhereNotExists(e){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,_e(e))})}clearWhere(){return new G({...this.#e,queryNode:q.cloneWithoutWhere(this.#e.queryNode)})}using(e){return new G({...this.#e,queryNode:Br.cloneWithUsing(this.#e.queryNode,cr(e))})}innerJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("InnerJoin",e))})}leftJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("LeftJoin",e))})}rightJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("RightJoin",e))})}fullJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("FullJoin",e))})}returning(e){return new G({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Oi(e))})}returningAll(){return new G({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Pi())})}orderBy(e,r){return new G({...this.#e,queryNode:Br.cloneWithOrderByItem(this.#e.queryNode,_s(e,r))})}limit(e){return new G({...this.#e,queryNode:Br.cloneWithLimit(this.#e.queryNode,Xd.create(e))})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new G({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new G(this.#e)}castTo(){return this.$castTo()}$assertType(){return new G(this.#e)}assertType(){return new G(this.#e)}withPlugin(e){return new G({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new $a(i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async explain(e,r){return await new G({...this.#e,queryNode:Br.cloneWithExplain(this.#e.queryNode,Ii.create(e,r?.toOperationNode()))}).execute()}};n(G,"DeleteQueryBuilder");R(G,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var Ha=class{#e;constructor(e){this.#e=e}get numUpdatedRows(){return this.#e}};n(Ha,"UpdateResult");var Y=class{#e;constructor(e){this.#e=d(e)}where(...e){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,De(e))})}whereRef(e,r,i){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,ue(e,r,i))})}orWhere(...e){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,De(e))})}orWhereRef(e,r,i){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,ue(e,r,i))})}whereExists(e){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,he(e))})}whereNotExists(e){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,_e(e))})}orWhereExists(e){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,he(e))})}orWhereNotExists(e){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,_e(e))})}clearWhere(){return new Y({...this.#e,queryNode:q.cloneWithoutWhere(this.#e.queryNode)})}from(e){return new Y({...this.#e,queryNode:Ri.cloneWithFromItems(this.#e.queryNode,cr(e))})}innerJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("InnerJoin",e))})}leftJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("LeftJoin",e))})}rightJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("RightJoin",e))})}fullJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,Fe("FullJoin",e))})}set(e){return new Y({...this.#e,queryNode:Ri.cloneWithUpdates(this.#e.queryNode,gs(e))})}returning(e){return new Y({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Oi(e))})}returningAll(){return new Y({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Pi())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new Y({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new Y(this.#e)}castTo(){return this.$castTo()}$assertType(){return new Y(this.#e)}assertType(){return new Y(this.#e)}withPlugin(e){return new Y({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new Ha(i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async explain(e,r){return await new Y({...this.#e,queryNode:Ri.cloneWithExplain(this.#e.queryNode,Ii.create(e,r?.toOperationNode()))}).execute()}};n(Y,"UpdateQueryBuilder");R(Y,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var pE=d({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return d({kind:"CommonTableExpressionNode",name:t,expression:e})}});var L_=d({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return d({kind:"CommonTableExpressionNameNode",table:ot.create(t),columns:e?d(e.map(W.create)):void 0})}});function z_(t,e){let r=e(fE());return pE.create(fq(t),r.toOperationNode())}n(z_,"parseCommonTableExpression");function fq(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(s=>s.trim());return L_.create(r,i)}else return L_.create(t)}n(fq,"parseCommonTableExpressionName");var Ga=d({is(t){return t.kind==="WithNode"},create(t,e){return d({kind:"WithNode",expressions:d([t]),...e})},cloneWithExpression(t,e){return d({...t,expressions:d([...t.expressions,e])})}});var wt=class{#e;constructor(e){this.#e=d(e)}selectFrom(e){return new N({queryId:j(),executor:this.#e.executor,queryNode:k.create(cr(e),this.#e.withNode)})}insertInto(e){return new ye({queryId:j(),executor:this.#e.executor,queryNode:Qe.create(ve(e),this.#e.withNode)})}replaceInto(e){return new ye({queryId:j(),executor:this.#e.executor,queryNode:Qe.create(ve(e),this.#e.withNode,!0)})}deleteFrom(e){return new G({queryId:j(),executor:this.#e.executor,queryNode:Br.create(Gr(e),this.#e.withNode)})}updateTable(e){return new Y({queryId:j(),executor:this.#e.executor,queryNode:Ri.create(Gr(e),this.#e.withNode)})}with(e,r){let i=z_(e,r);return new wt({...this.#e,withNode:this.#e.withNode?Ga.cloneWithExpression(this.#e.withNode,i):Ga.create(i)})}withRecursive(e,r){let i=z_(e,r);return new wt({...this.#e,withNode:this.#e.withNode?Ga.cloneWithExpression(this.#e.withNode,i):Ga.create(i,{recursive:!0})})}withPlugin(e){return new wt({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new wt({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new wt({...this.#e,executor:this.#e.executor.withPluginAtFront(new Jt(e))})}};n(wt,"QueryCreator");function I_(){return new N({queryId:j(),executor:An,queryNode:k.create(cr([]))})}n(I_,"createSelectQueryBuilder");function U_(){return new On({executor:An})}n(U_,"createExpressionBuilder");function fE(){return new wt({executor:An})}n(fE,"createQueryCreator");function Yd(t,e){return new Ge({joinNode:at.create(t,Gr(e))})}n(Yd,"createJoinBuilder");function nE(){return new Kr({overNode:Fa.create()})}n(nE,"createOverBuilder");function fs(t){if(He(t))return t.toOperationNode();if(_t(t))return t(U_()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}n(fs,"parseExpression");function Qd(t){if(He(t))return t.toOperationNode();if(_t(t))return t(U_()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}n(Qd,"parseAliasedExpression");function Sn(t){return zv(t)||_t(t)}n(Sn,"isExpressionOrFactory");function cr(t){return xi(t)?t.map(e=>Gr(e)):[Gr(t)]}n(cr,"parseTableExpressionOrList");function Gr(t){return Ye(t)?mq(t):Qd(t)}n(Gr,"parseTableExpression");function mq(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(mE);return Ot.create(ve(r),F.create(i))}else return ve(t)}n(mq,"parseAliasedTable");function ve(t){let e=".";if(t.includes(e)){let[r,i]=t.split(e).map(mE);return ot.createWithSchema(r,i)}else return ot.create(t)}n(ve,"parseTable");function mE(t){return t.trim()}n(mE,"trim");var W_=d({is(t){return t.kind==="AddColumnNode"},create(t){return d({kind:"AddColumnNode",column:t})}});var Yr=d({is(t){return t.kind==="AlterColumnNode"},create(t){return d({kind:"AlterColumnNode",column:W.create(t)})},cloneWith(t,e){return d({...t,...e})}});var le=d({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return d({kind:"ColumnDefinitionNode",column:W.create(t),dataType:e})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):[e]})},cloneWith(t,e){return d({...t,...e})}});var j_=d({is(t){return t.kind==="DropColumnNode"},create(t){return d({kind:"DropColumnNode",column:W.create(t)})}});var V_=d({is(t){return t.kind==="RenameColumnNode"},create(t,e){return d({kind:"RenameColumnNode",column:W.create(t),renameTo:W.create(e)})}});var ws=d({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return d({kind:"CheckConstraintNode",expression:t,name:e?F.create(e):void 0})}});var hE=["no action","restrict","cascade","set null","set default"],vs=d({is(t){return t.kind==="ReferencesNode"},create(t,e){return d({kind:"ReferencesNode",table:t,columns:d([...e])})},cloneWithOnDelete(t,e){return d({...t,onDelete:e})},cloneWithOnUpdate(t,e){return d({...t,onUpdate:e})}});function nu(t){return He(t)?t.toOperationNode():ct.createImmediate(t)}n(nu,"parseDefaultValueExpression");var Ba=d({is(t){return t.kind==="GeneratedNode"},create(t){return d({kind:"GeneratedNode",...t})},createWithExpression(t){return d({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return d({...t,...e})}});var _E=d({is(t){return t.kind==="DefaultValueNode"},create(t){return d({kind:"DefaultValueNode",defaultValue:t})}});function Es(t){if(hE.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}n(Es,"parseOnModifyForeignAction");var X=class{#e;constructor(e){this.#e=e}autoIncrement(){return new X(le.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new X(le.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=$r(e);if(!En.is(r)||ps.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new X(le.cloneWith(this.#e,{references:vs.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new X(le.cloneWith(this.#e,{references:vs.cloneWithOnDelete(this.#e.references,Es(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new X(le.cloneWith(this.#e,{references:vs.cloneWithOnUpdate(this.#e.references,Es(e))}))}unique(){return new X(le.cloneWith(this.#e,{unique:!0}))}notNull(){return new X(le.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new X(le.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new X(le.cloneWith(this.#e,{defaultTo:_E.create(nu(e))}))}check(e){return new X(le.cloneWith(this.#e,{check:ws.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new X(le.cloneWith(this.#e,{generated:Ba.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new X(le.cloneWith(this.#e,{generated:Ba.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new X(le.cloneWith(this.#e,{generated:Ba.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new X(le.cloneWith(this.#e,{generated:Ba.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new X(le.cloneWithFrontModifier(this.#e,e.toOperationNode()))}modifyEnd(e){return new X(le.cloneWithEndModifier(this.#e,e.toOperationNode()))}toOperationNode(){return this.#e}};n(X,"ColumnDefinitionBuilder");R(X,"don't await ColumnDefinitionBuilder instances directly.");var $_=d({is(t){return t.kind==="ModifyColumnNode"},create(t){return d({kind:"ModifyColumnNode",column:t})}});var su=d({is(t){return t.kind==="DataTypeNode"},create(t){return d({kind:"DataTypeNode",dataType:t})}});function Pn(t){return He(t)?t.toOperationNode():su.create(t)}n(Pn,"parseDataTypeExpression");var Rn=d({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return d({kind:"ForeignKeyConstraintNode",columns:t,references:vs.create(e,r),name:i?F.create(i):void 0})},cloneWith(t,e){return d({...t,...e})}});var Kt=class{#e;constructor(e){this.#e=e}onDelete(e){return new Kt(Rn.cloneWith(this.#e,{onDelete:Es(e)}))}onUpdate(e){return new Kt(Rn.cloneWith(this.#e,{onUpdate:Es(e)}))}toOperationNode(){return this.#e}};n(Kt,"ForeignKeyConstraintBuilder");R(Kt,"don't await ForeignKeyConstraintBuilder instances directly.");var Ja=d({is(t){return t.kind==="AddConstraintNode"},create(t){return d({kind:"AddConstraintNode",constraint:t})}});var ou=d({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return d({kind:"UniqueConstraintNode",columns:d(t.map(W.create)),name:e?F.create(e):void 0})}});var Ss=d({is(t){return t.kind==="DropConstraintNode"},create(t){return d({kind:"DropConstraintNode",constraintName:F.create(t)})},cloneWith(t,e){return d({...t,...e})}});var Ci=class{alterColumnNode;constructor(e){this.alterColumnNode=e}setDataType(e){return new qi(Yr.cloneWith(this.alterColumnNode,{dataType:su.create(e)}))}setDefault(e){return new qi(Yr.cloneWith(this.alterColumnNode,{setDefault:nu(e)}))}dropDefault(){return new qi(Yr.cloneWith(this.alterColumnNode,{dropDefault:!0}))}setNotNull(){return new qi(Yr.cloneWith(this.alterColumnNode,{setNotNull:!0}))}dropNotNull(){return new qi(Yr.cloneWith(this.alterColumnNode,{dropNotNull:!0}))}};n(Ci,"AlterColumnBuilder");var qi=class extends Ci{toOperationNode(){return this.alterColumnNode}};n(qi,"AlteredColumnBuilder");var Qr=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Qr,"AlterTableExecutor");R(Qr,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Xr=class{#e;constructor(e){this.#e=d(e)}onDelete(e){return new Xr({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new Xr({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}toOperationNode(){return this.#e.executor.transformQuery(ce.cloneWithTableProps(this.#e.node,{addConstraint:Ja.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Xr,"AlterTableAddForeignKeyConstraintBuilder");R(Xr,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var dr=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new dr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new dr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new dr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(dr,"AlterTableDropConstraintBuilder");R(dr,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");var Ns=class{#e;constructor(e){this.#e=d(e)}renameTo(e){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{renameTo:ve(e)})})}setSchema(e){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{setSchema:F.create(e)})})}alterColumn(e,r){let i=r(new Ci(Yr.create(e)));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,j_.create(e))})}renameColumn(e,r){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,V_.create(e,r))})}addColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,W_.create(s.toOperationNode()))})}modifyColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,$_.create(s.toOperationNode()))})}addUniqueConstraint(e,r){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{addConstraint:Ja.create(ou.create(r,e))})})}addCheckConstraint(e,r){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{addConstraint:Ja.create(ws.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,s){return new Xr({...this.#e,constraintBuilder:new Kt(Rn.create(r.map(W.create),ve(i),s.map(W.create),e))})}dropConstraint(e){return new dr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.create(e)})})}$call(e){return e(this)}call(e){return this.$call(e)}};n(Ns,"AlterTableBuilder");var Ze=class{#e;constructor(e){this.#e=d(e)}alterColumn(e,r){let i=r(new Ci(Yr.create(e)));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,j_.create(e))})}renameColumn(e,r){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,V_.create(e,r))})}addColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,W_.create(s.toOperationNode()))})}modifyColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,$_.create(s.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Ze,"AlterTableColumnAlteringBuilder");R(Ns,"don't await AlterTableBuilder instances");R(Ci,"don't await AlterColumnBuilder instances");R(Ze,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var yE=d({is(t){return t.kind==="ListNode"},create(t){return d({kind:"ListNode",items:d(t)})}});var dt=class{#e;constructor(e){this.#e=d(e)}ifNotExists(){return new dt({...this.#e,node:sr.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new dt({...this.#e,node:sr.cloneWith(this.#e.node,{unique:!0})})}on(e){return new dt({...this.#e,node:sr.cloneWith(this.#e.node,{table:ve(e)})})}column(e){return new dt({...this.#e,node:sr.cloneWith(this.#e.node,{expression:za(e)})})}columns(e){return new dt({...this.#e,node:sr.cloneWith(this.#e.node,{expression:yE.create(e.map(za))})})}expression(e){return new dt({...this.#e,node:sr.cloneWith(this.#e.node,{expression:e.toOperationNode()})})}using(e){return new dt({...this.#e,node:sr.cloneWith(this.#e.node,{using:de.createWithSql(e)})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(dt,"CreateIndexBuilder");R(dt,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var ki=class{#e;constructor(e){this.#e=d(e)}ifNotExists(){return new ki({...this.#e,node:$d.cloneWith(this.#e.node,{ifNotExists:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ki,"CreateSchemaBuilder");R(ki,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var gE=d({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return d({kind:"PrimaryKeyConstraintNode",columns:d(t.map(W.create)),name:e?F.create(e):void 0})}});function wE(t){if(Lv.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}n(wE,"parseOnCommitAction");var ze=class{#e;constructor(e){this.#e=d(e)}temporary(){return new ze({...this.#e,node:gt.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ze({...this.#e,node:gt.cloneWith(this.#e.node,{onCommit:wE(e)})})}ifNotExists(){return new ze({...this.#e,node:gt.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new ze({...this.#e,node:gt.cloneWithColumn(this.#e.node,s.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new ze({...this.#e,node:gt.cloneWithConstraint(this.#e.node,gE.create(r,e))})}addUniqueConstraint(e,r){return new ze({...this.#e,node:gt.cloneWithConstraint(this.#e.node,ou.create(r,e))})}addCheckConstraint(e,r){return new ze({...this.#e,node:gt.cloneWithConstraint(this.#e.node,ws.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,s,o=Ai){let a=o(new Kt(Rn.create(r.map(W.create),ve(i),s.map(W.create),e)));return new ze({...this.#e,node:gt.cloneWithConstraint(this.#e.node,a.toOperationNode())})}modifyFront(e){return new ze({...this.#e,node:gt.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ze({...this.#e,node:gt.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}$call(e){return e(this)}call(e){return this.$call(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ze,"CreateTableBuilder");R(ze,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var ur=class{#e;constructor(e){this.#e=d(e)}on(e){return new ur({...this.#e,node:cs.cloneWith(this.#e.node,{table:ve(e)})})}ifExists(){return new ur({...this.#e,node:cs.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ur({...this.#e,node:cs.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ur,"DropIndexBuilder");R(ur,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Zr=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new Zr({...this.#e,node:Ma.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Zr({...this.#e,node:Ma.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Zr,"DropSchemaBuilder");R(Zr,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var ei=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new ei({...this.#e,node:Da.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ei({...this.#e,node:Da.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ei,"DropTableBuilder");R(ei,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var Yt=d({is(t){return t.kind==="CreateViewNode"},create(t){return d({kind:"CreateViewNode",name:st.create(t)})},cloneWith(t,e){return d({...t,...e})}});var Ka=class extends bn{transformValue(e){return{...super.transformValue(e),immediate:!0}}};n(Ka,"ImmediateValueTransformer");var Ya=class{#e=new Ka;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};n(Ya,"ImmediateValuePlugin");var vt=class{#e;constructor(e){this.#e=d(e)}temporary(){return new vt({...this.#e,node:Yt.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new vt({...this.#e,node:Yt.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new vt({...this.#e,node:Yt.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new vt({...this.#e,node:Yt.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new vt({...this.#e,node:Yt.cloneWith(this.#e.node,{columns:e.map(za)})})}as(e){let r=e.withPlugin(new Ya).toOperationNode();return new vt({...this.#e,node:Yt.cloneWith(this.#e.node,{as:r})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(vt,"CreateViewBuilder");R(vt,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");var bs=d({is(t){return t.kind==="DropViewNode"},create(t){return d({kind:"DropViewNode",name:st.create(t)})},cloneWith(t,e){return d({...t,...e})}});var lr=class{#e;constructor(e){this.#e=d(e)}materialized(){return new lr({...this.#e,node:bs.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new lr({...this.#e,node:bs.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new lr({...this.#e,node:bs.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(lr,"DropViewBuilder");R(lr,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var au=d({is(t){return t.kind==="CreateTypeNode"},create(t){return d({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return d({...t,enum:ms.create(e.map(r=>ct.createImmediate(r)))})}});var Mi=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Mi({...this.#e,node:au.cloneWithEnum(this.#e.node,e)})}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Mi,"CreateTypeBuilder");R(Mi,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");var cu=d({is(t){return t.kind==="DropTypeNode"},create(t){return d({kind:"DropTypeNode",name:t})},cloneWith(t,e){return d({...t,...e})}});var Di=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new Di({...this.#e,node:cu.cloneWith(this.#e.node,{ifExists:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Di,"DropTypeBuilder");R(Di,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function H_(t){let e=".";if(t.includes(e)){let r=t.split(e).map(hq);if(r.length===2)return st.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return st.create(t)}n(H_,"parseSchemableIdentifier");function hq(t){return t.trim()}n(hq,"trim");var ti=class{#e;constructor(e){this.#e=e}createTable(e){return new ze({queryId:j(),executor:this.#e,node:gt.create(ve(e))})}dropTable(e){return new ei({queryId:j(),executor:this.#e,node:Da.create(ve(e))})}createIndex(e){return new dt({queryId:j(),executor:this.#e,node:sr.create(e)})}dropIndex(e){return new ur({queryId:j(),executor:this.#e,node:cs.create(e)})}createSchema(e){return new ki({queryId:j(),executor:this.#e,node:$d.create(e)})}dropSchema(e){return new Zr({queryId:j(),executor:this.#e,node:Ma.create(e)})}alterTable(e){return new Ns({queryId:j(),executor:this.#e,node:ce.create(e)})}createView(e){return new vt({queryId:j(),executor:this.#e,node:Yt.create(e)})}dropView(e){return new lr({queryId:j(),executor:this.#e,node:bs.create(e)})}createType(e){return new Mi({queryId:j(),executor:this.#e,node:au.create(H_(e))})}dropType(e){return new Di({queryId:j(),executor:this.#e,node:cu.create(H_(e))})}withPlugin(e){return new ti(this.#e.withPlugin(e))}withoutPlugins(){return new ti(this.#e.withoutPlugins())}withSchema(e){return new ti(this.#e.withPluginAtFront(new Jt(e)))}};n(ti,"SchemaModule");var Qa=class{ref(e){return new Ua(e)}};n(Qa,"DynamicModule");var Xa=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}};n(Xa,"DefaultConnectionProvider");var Qt=class extends xn{#e;#t;#r;constructor(e,r,i,s=[]){super(s),this.#e=e,this.#t=r,this.#r=i}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new Qt(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new Qt(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new Qt(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new Qt(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Qt(this.#e,this.#t,this.#r,[])}};n(Qt,"DefaultQueryExecutor");function G_(){return typeof performance<"u"&&_t(performance.now)?performance.now():Date.now()}n(G_,"performanceNow");var Za=class{#e;#t;#r;#i;#n=new WeakSet;constructor(e,r){this.#e=e,this.#t=r}async init(){this.#r||(this.#r=this.#e.init().catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){await this.init();let e=await this.#e.acquireConnection();return this.#n.has(e)||(this.#s()&&this.#o(e),this.#n.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#r&&(await this.#r,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#s(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(e){let r=e.executeQuery;e.executeQuery=async i=>{let s=G_();try{return await r.call(e,i)}catch(o){throw this.#c(o),o}finally{this.#d(i,s)}}}#c(e){this.#t.error(()=>({level:"error",error:e}))}#d(e,r){this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(r)}))}#u(e){return G_()-e}};n(Za,"RuntimeDriver");var xs=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t;let r=this.#r(e);return this.#t=r.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),r}async#r(e){return await e(this.#e)}};n(xs,"SingleConnectionProvider");var vE=["read uncommitted","read committed","repeatable read","serializable"];var Ose=d(["query","error"]),ec=class{#e;#t;constructor(e){_t(e)?(this.#t=e,this.#e=d({query:!0,error:!0})):(this.#t=_q,this.#e=d({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}query(e){this.#e.query&&this.#t(e())}error(e){this.#e.error&&this.#t(e())}};n(ec,"Log");function _q(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}n(_q,"defaultLogger");var Xt=class extends wt{#e;constructor(e){let r,i;if(yq(e))r={executor:e.executor},i={...e};else{let s=e.dialect,o=s.createDriver(),a=s.createQueryCompiler(),c=s.createAdapter(),l=new ec(e.log??[]),p=new Za(o,l),f=new Xa(p),m=new Qt(a,c,f,e.plugins??[]);r={executor:m},i={config:e,executor:m,dialect:s,driver:p}}super(r),this.#e=d(i)}get schema(){return new ti(this.#e.executor)}get dynamic(){return new Qa}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}get fn(){return new Tn}transaction(){return new In({...this.#e})}connection(){return new tc({...this.#e})}withPlugin(e){return new Xt({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Xt({...this.#e,executor:this.#e.executor.withoutPlugins()})}withTables(){return new Xt({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}};n(Xt,"Kysely");var Fi=class extends Xt{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new Fi({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Fi({...this.#e,executor:this.#e.executor.withoutPlugins()})}withTables(){return new Fi({...this.#e})}};n(Fi,"Transaction");function yq(t){return yt(t)&&yt(t.config)&&yt(t.driver)&&yt(t.executor)&&yt(t.dialect)}n(yq,"isKyselyProps");var tc=class{#e;constructor(e){this.#e=d(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let i=this.#e.executor.withConnectionProvider(new xs(r)),s=new Xt({...this.#e,executor:i});return await e(s)})}};n(tc,"ConnectionBuilder");R(tc,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var In=class{#e;constructor(e){this.#e=d(e)}setIsolationLevel(e){return new In({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,...i}=this.#e,s={isolationLevel:r};return gq(s),this.#e.executor.provideConnection(async o=>{let a=this.#e.executor.withConnectionProvider(new xs(o)),c=new Fi({...i,executor:a});try{await this.#e.driver.beginTransaction(o,s);let l=await e(c);return await this.#e.driver.commitTransaction(o),l}catch(l){throw await this.#e.driver.rollbackTransaction(o),l}})}};n(In,"TransactionBuilder");R(In,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function gq(t){if(t.isolationLevel&&!vE.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}n(gq,"validateTransactionSettings");var et=Object.assign((t,...e)=>new be({queryId:j(),rawNode:de.create(t,e?.map(ar)??[])}),{ref(t){return new be({queryId:j(),rawNode:de.createWithChild($r(t))})},value(t){return new be({queryId:j(),rawNode:de.createWithChild(ar(t))})},table(t){return new be({queryId:j(),rawNode:de.createWithChild(ve(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",new be({queryId:j(),rawNode:de.create(e,t.map(F.create))})},literal(t){return new be({queryId:j(),rawNode:de.createWithChild(ct.createImmediate(t))})},raw(t){return new be({queryId:j(),rawNode:de.createWithSql(t)})},join(t,e=et`, `){let r=new Array(2*t.length-1),i=e.toOperationNode();for(let s=0;s<t.length;++s)r[2*s]=ar(t[s]),s!==t.length-1&&(r[2*s+1]=i);return new be({queryId:j(),rawNode:de.createWithChildren(r)})}});var rc=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=d({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}};n(rc,"OperationNodeVisitor");var qn=class extends rc{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.visitNode(e),d({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!Qe.is(this.parentNode)&&!Yt.is(this.parentNode)&&!Zd.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select "),e.distinctOn&&(this.compileDistinctOn(e.distinctOn),this.append(" ")),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.selections&&(this.compileList(e.selections),this.append(" ")),this.visitNode(e.from),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let i=e.length-1;for(let s=0;s<=i;s++)this.visitNode(e[s]),s<i&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.nodeStack.find(q.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(e.into),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.nodeStack.find(q.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){this.visitNode(e.table),this.append("."),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Ye(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let i=0;i<r.length;++i)this.appendValue(r[i]),i!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(vq[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:i}=e;for(let s=0;s<r.length;++s)this.append(r[s]),i.length>s&&this.visitNode(i[s])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.nodeStack.find(q.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),this.visitNode(e.table),this.append(" set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.expression&&(this.append(" ("),this.visitNode(e.expression),this.append(")"))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileList(e.columnAlterations)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(wq[e.modifier])}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.visitNode(e.column),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.append(" "),this.visitNode(e.operand)}visitUsing(e){this.append("using "),this.compileList(e.tables)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),s="";for(let o of e)s+=o,o===r?s+=r:o===i&&(s+=i);return s}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Ye(e))this.append(`'${e}'`);else if(kv(e)||jd(e))this.append(e.toString());else if(Vd(e))this.append("null");else if(Mv(e))this.appendImmediateValue(e.toISOString());else if(Dv(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}};n(qn,"DefaultQueryCompiler");var wq=d({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),vq=d({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});var Cn=class{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}};n(Cn,"DialectAdapterBase");var ic=class{transformQuery(e){return e.node}async transformResult(e){return e.result}};n(ic,"NoopPlugin");var sc="kysely_migration",Ts="kysely_migration_lock",B_="migration_lock",J_=d({__noMigrations__:!0}),nc=class{#e;constructor(e){this.#e=d(e)}async getMigrations(){let e=await this.#a(this.#i)?await this.#e.db.withPlugin(this.#s).selectFrom(this.#i).select(["name","timestamp"]).execute():[];return(await this.#f()).map(({name:i,...s})=>{let o=e.find(a=>a.name===i);return{name:i,migration:s,executedAt:o?new Date(o.timestamp):void 0}})}async migrateToLatest(){return this.#t(({migrations:e})=>e.length-1)}async migrateTo(e){return this.#t(({migrations:r})=>{if(e===J_)return-1;let i=r.findIndex(s=>s.name===e);if(i===-1)throw new Error(`migration "${e}" doesn't exist`);return i})}async migrateUp(){return this.#t(({currentIndex:e,migrations:r})=>Math.min(e+1,r.length-1))}async migrateDown(){return this.#t(({currentIndex:e})=>Math.max(e-1,-1))}async#t(e){try{return await this.#o(),await this.#h(e)}catch(r){return r instanceof As?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#i(){return this.#e.migrationTableName??sc}get#n(){return this.#e.migrationLockTableName??Ts}get#s(){return this.#r?new Jt(this.#r):new ic}async#o(){await this.#c(),await this.#d(),await this.#u(),await this.#m()}async#c(){if(this.#r&&!await this.#l())try{await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute()}catch(e){if(!await this.#l())throw e}}async#d(){if(!await this.#a(this.#i))try{this.#r&&await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute(),await this.#e.db.schema.withPlugin(this.#s).createTable(this.#i).ifNotExists().addColumn("name","varchar(255)",e=>e.notNull().primaryKey()).addColumn("timestamp","varchar(255)",e=>e.notNull()).execute()}catch(e){if(!await this.#a(this.#i))throw e}}async#u(){if(!await this.#a(this.#n))try{await this.#e.db.schema.withPlugin(this.#s).createTable(this.#n).ifNotExists().addColumn("id","varchar(255)",e=>e.notNull().primaryKey()).addColumn("is_locked","integer",e=>e.notNull().defaultTo(0)).execute()}catch(e){if(!await this.#a(this.#n))throw e}}async#m(){if(!await this.#p())try{await this.#e.db.withPlugin(this.#s).insertInto(this.#n).values({id:B_,is_locked:0}).execute()}catch(e){if(!await this.#p())throw e}}async#l(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#a(e){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(s=>s.name===e&&(!r||s.schema===r))}async#p(){return!!await this.#e.db.withPlugin(this.#s).selectFrom(this.#n).where("id","=",B_).select("id").executeTakeFirst()}async#h(e){let r=this.#e.db.getExecutor().adapter,i=d({lockTable:this.#e.migrationLockTableName??Ts,lockRowId:B_,lockTableSchema:this.#e.migrationTableSchema}),s=n(async o=>{try{await r.acquireMigrationLock(o,i);let a=await this.#_(o);if(a.migrations.length===0)return{results:[]};let c=e(a);return c===void 0?{results:[]}:c<a.currentIndex?await this.#w(o,a,c):c>a.currentIndex?await this.#v(o,a,c):{results:[]}}finally{await r.releaseMigrationLock(o,i)}},"run");return r.supportsTransactionalDdl?this.#e.db.transaction().execute(s):this.#e.db.connection().execute(s)}async#_(e){let r=await this.#f(),i=await this.#y(e);return this.#g(r,i),d({migrations:r,currentIndex:r.findIndex(s=>s.name===Fv(i))})}async#f(){let e=await this.#e.provider.getMigrations();return Object.keys(e).sort().map(r=>({...e[r],name:r}))}async#y(e){return(await e.withPlugin(this.#s).selectFrom(this.#i).select("name").orderBy("name").execute()).map(i=>i.name)}#g(e,r){for(let i of r)if(!e.some(s=>s.name===i))throw new Error(`corrupted migrations: previously executed migration ${i} is missing`);for(let i=0;i<r.length;++i)if(e[i].name!==r[i])throw new Error(`corrupted migrations: expected previously executed migration ${r[i]} to be at index ${i} but ${e[i].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#w(e,r,i){let s=[];for(let o=r.currentIndex;o>i;--o)s.push({migrationName:r.migrations[o].name,direction:"Down",status:"NotExecuted"});for(let o=0;o<s.length;++o){let a=r.migrations.find(c=>c.name===s[o].migrationName);try{a.down&&(await a.down(e),await e.withPlugin(this.#s).deleteFrom(this.#i).where("name","=",a.name).execute(),s[o]={migrationName:a.name,direction:"Down",status:"Success"})}catch(c){throw s[o]={migrationName:a.name,direction:"Down",status:"Error"},new As({error:c,results:s})}}return{results:s}}async#v(e,r,i){let s=[];for(let o=r.currentIndex+1;o<=i;++o)s.push({migrationName:r.migrations[o].name,direction:"Up",status:"NotExecuted"});for(let o=0;o<s.length;++o){let a=r.migrations.find(c=>c.name===s[o].migrationName);try{await a.up(e),await e.withPlugin(this.#s).insertInto(this.#i).values({name:a.name,timestamp:new Date().toISOString()}).execute(),s[o]={migrationName:a.name,direction:"Up",status:"Success"}}catch(c){throw s[o]={migrationName:a.name,direction:"Up",status:"Error"},new As({error:c,results:s})}}return{results:s}}};n(nc,"Migrator");var As=class extends Error{#e;constructor(e){super(),this.#e=e}get resultSet(){return this.#e}};n(As,"MigrationResultSetError");var Eq=/"/g,oc=class extends qn{sanitizeIdentifier(e){return e.replace(Eq,'""')}};n(oc,"PostgresQueryCompiler");var ac=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",this.#e.selectFrom("pg_class").select(et`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",et`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where("c.relkind","=","r").where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",sc).where("c.relname","!=",Ts));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let s=r.find(o=>o.name===i.table&&o.schema===i.schema);return s||(s=d({name:i.table,schema:i.schema,columns:[]}),r.push(s)),s.columns.push(d({name:i.column,dataType:i.type,dataTypeSchema:i.type_schema,isNullable:!i.not_null,isAutoIncrementing:!!i.auto_incrementing,hasDefaultValue:i.has_default})),r},[])}};n(ac,"PostgresIntrospector");var Sq=BigInt("3853314791062309107"),cc=class extends Cn{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e){await et`select pg_advisory_xact_lock(${et.literal(Sq)})`.execute(e)}async releaseMigrationLock(){}};n(cc,"PostgresAdapter");var Nq=/`/g,dc=class extends qn{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(Nq,"``")}};n(dc,"MysqlQueryCompiler");var uc=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns").select(["COLUMN_NAME","COLUMN_DEFAULT","TABLE_NAME","TABLE_SCHEMA","IS_NULLABLE","DATA_TYPE","EXTRA"]).where("table_schema","=",et`database()`).orderBy("table_name").orderBy("ordinal_position").$castTo();e.withInternalKyselyTables||(r=r.where("table_name","!=",sc).where("table_name","!=",Ts));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let s=r.find(o=>o.name===i.TABLE_NAME);return s||(s=d({name:i.TABLE_NAME,schema:i.TABLE_SCHEMA,columns:[]}),r.push(s)),s.columns.push(d({name:i.COLUMN_NAME,dataType:i.DATA_TYPE,isNullable:i.IS_NULLABLE==="YES",isAutoIncrementing:i.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:i.COLUMN_DEFAULT!==null})),r},[])}};n(uc,"MysqlIntrospector");var EE="ea586330-2c93-47c8-908d-981d9d270f9d",bq=60*60,lc=class extends Cn{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e){await et`select get_lock(${et.literal(EE)}, ${et.literal(bq)})`.execute(e)}async releaseMigrationLock(e){await et`select release_lock(${et.literal(EE)})`.execute(e)}};n(lc,"MysqlAdapter");var pc=class{#e;constructor(e){this.#e=e}async init(){}async acquireConnection(){return new du(this.#e)}async beginTransaction(e){await e.beginTransaction()}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async releaseConnection(e){}async destroy(){}};n(pc,"DataApiDriver");var du=class{#e;#t;constructor(e){this.#e=e}async beginTransaction(){let e=await this.#e.client.beginTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,database:this.#e.database});this.#t=e.transactionId}async commitTransaction(){if(!this.#t)throw new Error("Cannot commit a transaction before creating it");await this.#e.client.commitTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async rollbackTransaction(){if(!this.#t)throw new Error("Cannot rollback a transaction before creating it");await this.#e.client.rollbackTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async executeQuery(e){let r=await this.#e.client.executeStatement({transactionId:this.#t,secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,sql:e.sql,parameters:e.parameters,database:this.#e.database,includeResultMetadata:!0});if(!r.columnMetadata){let o=BigInt(r.numberOfRecordsUpdated||0);return{numAffectedRows:o,numUpdatedOrDeletedRows:o,insertId:r.generatedFields&&r.generatedFields.length>0?BigInt(r.generatedFields[0].longValue):void 0,rows:[]}}return{rows:r.records?.filter(o=>o.length!==0).map(o=>Object.fromEntries(o.map((a,c)=>[r.columnMetadata[c].label||r.columnMetadata[c].name,a.stringValue??a.blobValue??a.longValue??a.arrayValue??a.doubleValue??(a.isNull?null:a.booleanValue)])))||[]}}async*streamQuery(e,r){throw new Error("Data API does not support streaming")}};n(du,"DataApiConnection");var fc=class extends oc{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...SE(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};n(fc,"PostgresDataApiQueryCompiler");var mc=class extends dc{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...SE(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};n(mc,"MysqlDataApiQueryCompiler");function SE(t){switch(typeof t){case"bigint":return{value:{doubleValue:Number(t)}};case"boolean":return{value:{booleanValue:t}};case"number":return Number.isInteger(t)?{value:{longValue:t}}:{value:{doubleValue:t}};case"object":if(t==null)return{value:{isNull:!0}};if(Buffer.isBuffer(t))return{value:{blobValue:t}};if(t instanceof Date)return{typeHint:"TIMESTAMP",value:{stringValue:NE(t.toISOString())}};if(t?.value&&Tq(t.value))return t.typeHint&&t.value.stringValue&&typeof t.value.stringValue=="string"&&(t.value.stringValue=xq(t.typeHint,t.value.stringValue)),t;break;case"string":return{value:{stringValue:t}}}throw new Os("Could not serialize value")}n(SE,"serialize");function xq(t,e){switch(t){case"DATE":return K_(e).slice(0,10);case"TIME":return e.match(/^\d{4}-\d{2}-\d{2}/)?K_(e).slice(11,23):Aq(e);case"TIMESTAMP":return NE(K_(e))}return e}n(xq,"fixStringValue");function Aq(t){let e=(t||"00:00:00").split(":");for(;e.length<3;)e.push("00");return e.join(":").slice(0,12)}n(Aq,"fixTimeString");function NE(t){return t.replace("T"," ").slice(0,23)}n(NE,"fixISOString");function K_(t){return new Date(Date.parse(t)).toISOString()}n(K_,"parseToISOString");function Tq(t){for(let e of Pq)if(t[e])return!0;if(t.arrayValue){for(let e of Oq)if(t.arrayValue?.[e])return!0}return!1}n(Tq,"isValueObject");var Os=class extends Error{constructor(e){super(e),this.name=Os.name}};n(Os,"QueryCompilerError");var Oq=["booleanValues","doubleValues","longValues","stringValues"],Pq=["blobValue","booleanValue","doubleValue","isNull","longValue","stringValue"];var hc=class{#e;constructor(e){this.#e=e}createAdapter(){if(this.#e.mode==="postgres")return new cc;if(this.#e.mode==="mysql")return new lc;throw new Error("Unknown mode "+this.#e.mode)}createDriver(){return new pc(this.#e.driver)}createQueryCompiler(){if(this.#e.mode==="postgres")return new fc;if(this.#e.mode==="mysql")return new mc;throw new Error("Unknown mode "+this.#e.mode)}createIntrospector(e){if(this.#e.mode==="postgres")return new ac(e);if(this.#e.mode==="mysql")return new uc(e);throw new Error("Unknown mode "+this.#e.mode)}};n(hc,"DataApiDialect");var UI=JI(zI(),1);import Y6 from"url";async function xEe(t){let e=new Xt({dialect:new hc({mode:process.env.RDS_ENGINE_MODE,driver:{client:new UI.RDSData({}),database:t?.database||process.env.RDS_DATABASE,secretArn:process.env.RDS_SECRET,resourceArn:process.env.RDS_ARN}})}),r=new nc({db:e,provider:new A_(K6.resolve(process.env.RDS_MIGRATIONS_PATH))});if(!t.type||t.type==="latest"){let i=await r.migrateToLatest(),s=i.error||i.results?.find(o=>o.status==="Error");if(s)throw s;return i}if(t.type==="to"){if(!t.data.name)return await r.migrateTo(J_);let i=await r.migrateTo(t.data.name),s=i.error||i.results?.find(o=>o.status==="Error");if(s)throw s;return i}if(t.type==="list")return await r.getMigrations()}n(xEe,"handler");var A_=class{#e;constructor(e){this.#e=e}async getMigrations(){let e=await import("fs/promises"),r=await import("path"),i={},s=await e.readdir(this.#e);for(let o of s)if(o.endsWith(".js")||o.endsWith(".cjs")||o.endsWith(".mjs")){let[a]=r.basename(o).split("."),c=r.join(this.#e,o);if(process.env.LAMBDA_TASK_ROOT){let p=await import(c);i[a]=p;continue}let l=c.replace(/(mjs|cjs|js)/g,`${Date.now()}.$1`);try{await e.copyFile(c,l);let p=await import(Y6.pathToFileURL(l).href);i[a]=p}catch(p){console.error(p)}await e.rm(l)}return i}};n(A_,"DynamicFileMigrationProvider");export{xEe as handler};
